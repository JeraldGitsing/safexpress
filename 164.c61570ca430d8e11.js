"use strict";(self.webpackChunkstartng=self.webpackChunkstartng||[]).push([[164],{164:(Le,b,d)=>{d.r(b),d.d(b,{MasterdataModule:()=>Fe,routes:()=>B});var m=d(6814),A=d(2787),a=d(5861);class I{}var N=d(3519),p=d.n(N),e=d(9212),h=d(9862);let T=(()=>{class r{constructor(t){this.http=t,this.url="api/users"}getUsers(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getUsersType(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}addUser(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}getDataMethod(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}deleteUser(t){return this.http.delete(this.url+"/"+t)}AlertOne(t,n,i){p().fire({icon:t,title:n,text:i,allowOutsideClick:!1})}busyLoading(){return new Promise((t,n)=>{p().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{p().showLoading(),t()}})})}AlertTwo(t,n,i){p().fire({position:"center",icon:t,title:n,text:i,showConfirmButton:!1,timer:2500})}closeBusyLoading(){p().close()}modDataOnly(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}QuerySender(t){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+t)}uploadFile(t,n){const i=new FormData;return i.append("file",t),this.http.post(localStorage.getItem("Server")+"/api/uploadimg?fname="+n,i)}static#e=this.\u0275fac=function(n){return new(n||r)(e.LFG(h.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac})}return r})();var x=d(1716),u=d(6223),_=d(5979),C=d(2425),Z=d(3999),U=d(3154),v=d(6472),O=d(7130);function S(r,s){1&r&&e._UZ(0,"i",50)}function P(r,s){1&r&&e._UZ(0,"i",51)}function q(r,s){1&r&&e._UZ(0,"i",52)}const J=(r,s)=>({"text-success":r,"text-inverse":s});function F(r,s){if(1&r&&e._UZ(0,"i",53),2&r){const t=e.oxw().$implicit;e.Q6J("ngClass",e.WLB(2,J,t.isActive,!t.isActive))("ngbTooltip",t.isActive?"active":"passive")}}function D(r,s){1&r&&e._UZ(0,"i",54),2&r&&e.Q6J("ngbTooltip","deleted")}function L(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24)(6,"h5",25),e.YNc(7,S,1,0,"i",26)(8,P,1,0,"i",27)(9,q,1,0,"i",28),e._uU(10),e.qZA(),e.TgZ(11,"div",29)(12,"a",30),e.NdJ("click",function(i){const l=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.openMenuAssign(i,l))}),e._UZ(13,"i",31),e.qZA(),e.TgZ(14,"a",30),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2),c=e.MAs(20);return e.KtG(l.OpenUpdateUser(c,o))}),e._UZ(15,"i",32),e.qZA()()(),e.TgZ(16,"div",33)(17,"div",34)(18,"div",35)(19,"img",36),e.NdJ("error",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onImgError(o))}),e.qZA()(),e.TgZ(20,"div",37)(21,"div",12)(22,"div",38),e._uU(23,"Full Name"),e.qZA(),e.TgZ(24,"div",39),e._uU(25,":"),e.qZA(),e.TgZ(26,"div",40)(27,"span",41),e._uU(28),e.qZA()(),e.TgZ(29,"div",38),e._uU(30,"User Name"),e.qZA(),e.TgZ(31,"div",39),e._uU(32,":"),e.qZA(),e.TgZ(33,"div",40)(34,"span",41),e._uU(35),e.qZA()(),e.TgZ(36,"div",38),e._uU(37,"User Type"),e.qZA(),e.TgZ(38,"div",39),e._uU(39,":"),e.qZA(),e.TgZ(40,"div",40)(41,"span",41),e._uU(42),e.qZA()()()()()()()(),e.TgZ(43,"div",42)(44,"div",23)(45,"div",24)(46,"h5",25),e.YNc(47,F,1,5,"i",43)(48,D,1,1,"i",44),e._uU(49),e.qZA(),e.TgZ(50,"div",29)(51,"a",30),e.NdJ("click",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.closeMenuAssign(i))}),e._UZ(52,"i",45),e.qZA()()(),e.TgZ(53,"div",33)(54,"ngx-bootstrap-multiselect",46),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.menuIds=i)}),e.qZA(),e.TgZ(55,"div",47)(56,"button",48),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.assignMenuItemsToUser(o))}),e._uU(57," Assign menu items to user "),e.qZA(),e.TgZ(58,"p",49),e._uU(59,"Logout and login to see result."),e.qZA()()()()()()()()}if(2&r){const t=s.$implicit,n=e.oxw(2);e.xp6(7),e.Q6J("ngIf","Login"===t.UserStatus),e.xp6(1),e.Q6J("ngIf","Logout"===t.UserStatus),e.xp6(1),e.Q6J("ngIf","New"===t.UserStatus),e.xp6(1),e.hij(" ",t.username," "),e.xp6(9),e.Q6J("src",n.getImageUrl(t),e.LSH),e.xp6(9),e.Oqu(t.FullName),e.xp6(7),e.Oqu(t.username),e.xp6(7),e.Oqu(t.UserType),e.xp6(5),e.Q6J("ngIf",!t.isDeleted),e.xp6(1),e.Q6J("ngIf",t.isDeleted),e.xp6(1),e.hij(" ",t.username," "),e.xp6(5),e.MGl("id","menuSelect",t.id,""),e.Q6J("options",n.menuSelectOptions)("texts",n.menuSelectTexts)("settings",n.menuSelectSettings)("ngModel",t.menuIds)}}const k=r=>({itemsPerPage:9,currentPage:r});function Q(r,s){if(1&r&&(e.TgZ(0,"div",12),e.YNc(1,L,60,16,"div",18),e.ALo(2,"paginate"),e.ALo(3,"UserSearchPipe"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.users,t.searchText),e.VKq(7,k,t.p)))}}function G(r,s){if(1&r&&e._UZ(0,"img",79),2&r){const t=e.oxw(2);e.Q6J("src",t.UserDetails.Userimage,e.LSH)}}function H(r,s){if(1&r&&e._UZ(0,"img",79),2&r){const t=e.oxw(2);e.Q6J("src",t.imageSrc,e.LSH)}}function Y(r,s){if(1&r&&(e.TgZ(0,"option",80),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("selected",t.UserType)("value",t.UserType),e.xp6(1),e.hij(" ",t.UserType," ")}}function K(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"h4",57),e._uU(3,"ADD USER"),e.qZA(),e.TgZ(4,"div",29)(5,"a",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.modalRef.close())}),e._UZ(6,"i",45),e.qZA()()(),e.TgZ(7,"div",59)(8,"div",12)(9,"div",60)(10,"form",61)(11,"div",62),e.YNc(12,G,1,1,"img",63)(13,H,1,1,"img",63),e.TgZ(14,"input",64,65),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onFileSelected(i))}),e.qZA(),e.TgZ(16,"button",66),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(15);return e.KtG(i.click())}),e.TgZ(17,"span"),e._uU(18,"Browse"),e.qZA()()(),e.TgZ(19,"div",67)(20,"div",68)(21,"div",69)(22,"label",70),e._uU(23,"User Name"),e.qZA(),e.TgZ(24,"input",71),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.UserDetails.UserName=i)}),e.qZA()(),e.TgZ(25,"div",69)(26,"label",70),e._uU(27,"Full Name"),e.qZA(),e.TgZ(28,"input",71),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.UserDetails.UserFullName=i)}),e.qZA()(),e.TgZ(29,"div",69)(30,"label",70),e._uU(31,"User Type"),e.qZA(),e.TgZ(32,"select",72),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.UserDetails.UserType=i)}),e._UZ(33,"option",73),e.YNc(34,Y,2,3,"option",74),e.qZA()()()(),e._UZ(35,"div",75),e.TgZ(36,"div",76)(37,"button",77),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddUser())}),e.TgZ(38,"span"),e._uU(39,"Add"),e.qZA()()(),e._UZ(40,"div",78),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",!t.imageSrc),e.xp6(1),e.Q6J("ngIf",t.imageSrc),e.xp6(11),e.Q6J("ngModel",t.UserDetails.UserName),e.xp6(4),e.Q6J("ngModel",t.UserDetails.UserFullName),e.xp6(4),e.Q6J("ngModel",t.UserDetails.UserType),e.xp6(2),e.Q6J("ngForOf",t.DropDownMenu)}}function j(r,s){if(1&r&&e._UZ(0,"img",79),2&r){const t=e.oxw(2);e.Q6J("src",t.UserDetails.Userimage,e.LSH)}}function E(r,s){if(1&r&&e._UZ(0,"img",79),2&r){const t=e.oxw(2);e.Q6J("src",t.imageSrc,e.LSH)}}function R(r,s){if(1&r&&(e.TgZ(0,"option",80),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("selected",t.UserType)("value",t.UserType),e.xp6(1),e.hij(" ",t.UserType," ")}}function $(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"h4",57),e._uU(3,"UPDATE USER"),e.qZA(),e.TgZ(4,"div",29)(5,"a",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.modalRef.close())}),e._UZ(6,"i",45),e.qZA()()(),e.TgZ(7,"div",59)(8,"div",12)(9,"div",60)(10,"form",61)(11,"div",62),e.YNc(12,j,1,1,"img",63)(13,E,1,1,"img",63),e.TgZ(14,"input",64,65),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onFileSelected(i))}),e.qZA(),e.TgZ(16,"button",66),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(15);return e.KtG(i.click())}),e.TgZ(17,"span"),e._uU(18,"Browse"),e.qZA()()(),e.TgZ(19,"div",67)(20,"div",68)(21,"div",69)(22,"label",70),e._uU(23,"User Name"),e.qZA(),e.TgZ(24,"input",81),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.UserDetails.UserName=i)}),e.qZA()(),e.TgZ(25,"div",69)(26,"label",70),e._uU(27,"Full Name"),e.qZA(),e.TgZ(28,"input",82),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.UserDetails.UserFullName=i)}),e.qZA()(),e.TgZ(29,"div",69)(30,"label",70),e._uU(31,"User Type"),e.qZA(),e.TgZ(32,"select",83),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.UserDetails.UserType=i)}),e._UZ(33,"option",73),e.YNc(34,R,2,3,"option",74),e.qZA()()()(),e._UZ(35,"div",75),e.TgZ(36,"div",76)(37,"button",84),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onResetUser())}),e.TgZ(38,"span"),e._uU(39,"Reset"),e.qZA()(),e.TgZ(40,"button",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onUpdateUser())}),e.TgZ(41,"span"),e._uU(42,"Update"),e.qZA()()(),e._UZ(43,"div",78),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",!t.imageSrc),e.xp6(1),e.Q6J("ngIf",t.imageSrc),e.xp6(11),e.Q6J("ngModel",t.UserDetails.UserName),e.xp6(4),e.Q6J("ngModel",t.UserDetails.UserFullName),e.xp6(4),e.Q6J("ngModel",t.UserDetails.UserType),e.xp6(2),e.Q6J("ngForOf",t.DropDownMenu)}}let W=(()=>{class r{constructor(t,n,i,o,l,c,g){this.fb=t,this.toastrService=i,this.translateService=o,this.apiservice=l,this.menuService=c,this.modalService=g,this.Floors=[],this.type="grid",this.imageSrc=null,this.meridian=!0,this.UserDetails={UserName:"",UserFullName:"",UserType:"",Userimage:""},this.menuIds=[],this.UserDefaultMenu=[],this.getMenus=[],this.menuHeader=[],this.DropDownMenu=[{UserType:"Requestor"},{UserType:"Picker"},{UserType:"Processor"},{UserType:"Supervisor"}],this.menuSelectSettings={enableSearch:!0,checkedStyle:"fontawesome",buttonClasses:"btn btn-secondary btn-block",dynamicTitleMaxItems:0,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.menuSelectTexts={checked:"menu item selected",checkedPlural:"menu items selected",searchPlaceholder:"Find menu item...",defaultTitle:"Select menu items for user",allSelected:"All selected"},this.menuSelectOptions=[],n.backdrop="static",n.keyboard=!1,this.getMenus=this.menuService.getVerticalMenuItems();var M=this.getMenus.filter(f=>0==f.hasSubMenu);this.menuItems=M,this.menuItems.forEach(f=>{let De={id:f.id,parentId:f.parentId,name:this.translateService.instant(f.title)};this.menuSelectOptions.push(De)})}ngOnInit(){this.baseUrl=localStorage.getItem("Server")||"",this.onLoadUser()}toggle(t){this.type=t}getUserMenu(t){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var i=(0,a.Z)(function*(o,l){yield n.apiservice.getDataMethod("&querytag=getUserMenuSettings&value1="+t.username+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(g){n.menuIds=g;let M=n.menuIds.map(f=>f.id);t.menuIds=M,o()});return function(g){return c.apply(this,arguments)}}())});return function(o,l){return i.apply(this,arguments)}}())})()}onLoadUsermenu(t){var n=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.getUserMenu(t)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(i=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}openMenuAssign(t,n){var i=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield i.getUserMenu(n)})).then((0,a.Z)(function*(){return yield i.openUpdate(t)})).then((0,a.Z)(function*(){return yield i.apiservice.closeBusyLoading()})).catch(o=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}openUpdate(t){return new Promise((n,i)=>{let o=t.target.parentNode;for(;o;)if(o=o.parentNode,o.classList.contains("content")){o.classList.add("flipped"),o.parentNode.parentNode.classList.add("z-index-1");break}n()})}closeMenuAssign(t){let n=t.target.parentNode;for(;n;)if(n=n.parentNode,n.classList.contains("content")){n.classList.remove("flipped"),n.parentNode.parentNode.classList.remove("z-index-1");break}}assignMenuItemsToUser(t){var n=this;0!==t.menuIds.length?(this.menuHeader=t.menuIds,this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.DeleteUserMenu(t)})).then((0,a.Z)(function*(){return yield n.InsertNewUserMenu(t)})).then((0,a.Z)(function*(){return yield n.getParentId()})).then((0,a.Z)(function*(){return yield n.insertparentId(t)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(i=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!")),this.toastrService.success("Please, logout and login to see result.","Successfully assigned !")):this.toastrService.error("Please, select item first","invalid!")}getCommonItems(){return this.menuService.getVerticalMenuItems().filter(t=>this.menuHeader.some(n=>this.areEqual(t,n)))}areEqual(t,n){return t.id===n}openModal(t){var n=this;this.UserDetails={UserName:"",UserFullName:"",UserType:"",Userimage:"assets/img/app/no-image.png"},this.imageSrc="",this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.onShowModal(t)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(i=>console.log("error","Inserting Data","Error while loading the data!"))}onShowModal(t){var n=this;return new Promise(function(){var i=(0,a.Z)(function*(o,l){n.modalRef=n.modalService.open(t,{container:".app"}),o()});return function(o,l){return i.apply(this,arguments)}}())}onAddUser(){var t=this;return(0,a.Z)(function*(){""!=t.UserDetails.UserName?""!=t.UserDetails.UserFullName?0===t.users.filter(i=>i.username==t.UserDetails.UserName).length?(t.closeModal(),yield Promise.all([t.apiservice.busyLoading(),yield t.AddUserWMS(),yield t.onUploadFile(),yield t.getUsers2(),t.apiservice.closeBusyLoading()]),t.apiservice.AlertOne("success","Add User","User "+t.UserDetails.UserName+" successfully added!")):t.toastrService.warning("UserName already exist!"):t.toastrService.warning("Please enter user full name!"):t.toastrService.warning("Please enter username!")})()}AddUserWMS(){return new Promise(t=>setTimeout(()=>{this.apiservice.modDataOnly("&querytag=InsertWMSUser&value1="+this.UserDetails.UserName.toUpperCase()+"&value2=-&value3=New&value4="+this.UserDetails.UserFullName.toUpperCase()+"&value5="+localStorage.getItem("User")+"&value6="+this.UserDetails.UserType+"&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(n=>{t()})},200))}getUsers2(){var t=this;return(0,a.Z)(function*(){return new Promise(n=>setTimeout((0,a.Z)(function*(){yield t.apiservice.getUsers("&querytag=getAllUser&value1=&value2=&value3=&value4=").subscribe(function(){var i=(0,a.Z)(function*(o){t.users=yield o,t.modalRef&&t.modalRef.close(),n()});return function(o){return i.apply(this,arguments)}}())}),200))})()}formatDate(t){return`${t.getFullYear()}${this.padZero(t.getMonth()+1)}${this.padZero(t.getDate())}`}padZero(t){return t<10?`0${t}`:`${t}`}OpenUpdateUser(t,n){this.UserDetails.UserName=n.username,this.UserDetails.UserFullName=n.FullName,this.UserDetails.Userimage=n.Userimage,this.imageSrc=n.Userimage,this.modalRef=this.modalService.open(t,{container:".app"})}closeModal(){this.modalRef.close()}getUsers(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield t.apiservice.getUsers("&querytag=getAllUser&value1=&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(c){t.users=yield c,t.modalRef&&t.modalRef.close(),i()});return function(c){return l.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())})()}getUsersMenu(t){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var i=(0,a.Z)(function*(o,l){yield n.apiservice.getDataMethod("&querytag=getUserMenuModule&value1="+t+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(g){console.log(g),n.UserDefaultMenu=yield g,o()});return function(g){return c.apply(this,arguments)}}())});return function(o,l){return i.apply(this,arguments)}}())})()}LoadUserMenus(t){var n=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.getUsersMenu(t.target.value)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(i=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onLoadUser(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.getUsers()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onUpdateUser(){var t=this;return(0,a.Z)(function*(){t.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.UpdateUser()})).then((0,a.Z)(function*(){return yield t.onUploadFile()})).then((0,a.Z)(function*(){return yield t.onLoadUser()})).catch(n=>console.log("rejected"))})()}getUserExist(t){return new Promise((n,i)=>{this.apiservice.getDataMethod("&querytag=CreateUserExist&value1="+t.username+"&value2=&value3=&value4=").subscribe(o=>{0!==o.length?(this.toastrService.warning("User name already exist!"),i()):n()})})}InsertUser(t){return new Promise((n,i)=>{this.modalRef.close(),this.apiservice.busyLoading(),this.apiservice.addUser("&querytag=InsertUser&value1="+t.username+"&value2=&value3="+t.FullName+"&value4=New&value5=-&value6=Admin&value7=NaN").subscribe(o=>{0!==o?(this.apiservice.AlertOne("success","Create User","User"+t.username+" successfully !"),n()):(this.apiservice.AlertOne("error","Create User","User"+t.username+" failed to insert!"),n())})})}InsertUserMenu(t){return new Promise((n,i)=>{this.UserDefaultMenu.forEach(o=>{this.apiservice.addUser("&querytag=InsertUserMenu&value1="+o.MenuId+"&value2="+I+"&value3="+o.MenuDescription+"&value4="+localStorage.getItem("User")+"&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),n()})}InsertNewUserMenu(t){return new Promise((n,i)=>{this.menuHeader.forEach(o=>{this.apiservice.addUser("&querytag=InsertUserMenu&value1="+o+"&value2="+t.username+"&value3=&value4="+localStorage.getItem("User")+"&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),n()})}InsertUserMenuHeader(t){return new Promise((n,i)=>{this.UserDefaultMenu.forEach(o=>{this.apiservice.addUser("&querytag=InsertUserMenu&value1="+o.MenuId+"&value2="+t.username+"&value3="+o.MenuDescription+"&value4="+localStorage.getItem("User")+"&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),n()})}DeleteUserMenu(t){return new Promise((n,i)=>{this.filteredArray=this.getCommonItems(),this.apiservice.addUser("&querytag=DeleteUserMenu&value1="+t.username+"&value2=&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(o=>{}),n()})}getParentId(){return new Promise((t,n)=>{this.parentMenu=[...new Set(this.filteredArray.filter(i=>0!==i.parentId).map(i=>i.parentId))],t()})}insertparentId(t){return new Promise((n,i)=>{this.parentMenu.forEach(o=>{this.apiservice.addUser("&querytag=InsertUserMenu&value1="+o+"&value2="+t.username+"&value3=&value4="+localStorage.getItem("User")+"&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),n()})}fileChange(t){const n=new FileReader;if(t.files.length){const i=t.files[0];n.onload=()=>{this.image=n.result},n.readAsDataURL(i)}}removeImage(){this.image=""}UpdateUser(){return new Promise((t,n)=>{this.modalRef.close(),this.apiservice.busyLoading(),this.apiservice.addUser("&querytag=UpdateUserDetails&value1="+this.UserDetails.UserFullName+"&value2="+this.UserDetails.UserType+"&value3="+this.UserDetails.UserName+"&value4="+localStorage.getItem("User")+"&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(i=>{0!==i?(this.apiservice.AlertOne("success","User Update","User "+this.UserDetails.UserName+" successfully updated!"),t()):(this.apiservice.AlertOne("error","Update User","User "+this.UserDetails.UserName+" failed to update!"),t())})})}onResetUser(){var t=this;return(0,a.Z)(function*(){t.modalRef.close(),p().fire({title:"Are you sure?",text:"You want to reset?",icon:"question",showCancelButton:!0,allowOutsideClick:!1,cancelButtonText:"No",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(n=>{n.isConfirmed&&t.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.ResetUser()})).then((0,a.Z)(function*(){return yield t.onLoadUser()})).catch(i=>console.log("rejected"))})})()}ResetUser(){return new Promise((t,n)=>{this.modalRef.close(),this.apiservice.busyLoading(),this.apiservice.addUser("&querytag=ResetUPassword&value1="+this.UserDetails.UserName+"&value2=NaNNaNNaNNaN&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(i=>{0!==i&&(this.apiservice.AlertOne("success","Reset User","User "+this.UserDetails.UserName+" successfully reset!"),t())})})}onFileSelected(t){if(this.file=t.target.files[0],this.file){const n=new FileReader;n.onload=i=>{i.target&&i.target.result&&(this.imageSrc=i.target.result)},n.readAsDataURL(this.file)}}onUploadFile(){var t=this;return new Promise(n=>setTimeout((0,a.Z)(function*(){t.file&&t.apiservice.uploadFile(t.file,t.UserDetails.UserName).subscribe(i=>{}),n()}),200))}getImageUrl(t){return`${this.baseUrl}/imgEmp?filename=${t.username}`}onImgError(t){t.UserImage="assets/img/app/noimage.jpg"}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(u.QS),e.Y36(_.NM),e.Y36(C._W),e.Y36(Z.sK),e.Y36(T),e.Y36(x.h),e.Y36(_.FF))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-usermaster"]],features:[e._Bn([T,x.h])],decls:21,vars:4,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search user by name...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","border-top-0","border-right-0","border-bottom-0",3,"click"],[1,"fa","fa-user-plus"],[1,"fa","fa-refresh"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["modalContent",""],["modalContentUpdate",""],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],["class","fa fa-user mr-2 text-success",4,"ngIf"],["class","fa fa-user mr-2 text-danger",4,"ngIf"],["class","fa fa-user mr-2 text-info",4,"ngIf"],[1,"widget-controls"],["href","javascript:void(0);",1,"transition",3,"click"],[1,"fa","fa-bars"],[1,"fa","fa-pencil"],[1,"card-body","pt-3"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-2","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"badge","mr-1"],[1,"back"],["class","fa fa-user mr-2","placement","bottom",3,"ngClass","ngbTooltip",4,"ngIf"],["class","fa fa-user mr-2 text-danger","placement","bottom",3,"ngbTooltip",4,"ngIf"],[1,"fa","fa-times"],[1,"custom-multiselect",3,"id","options","texts","settings","ngModel","ngModelChange"],[1,"w-100","text-center","pt-3"],[1,"btn","btn-success",3,"click"],[1,"text-gray","fs-13","mt-2"],[1,"fa","fa-user","mr-2","text-success"],[1,"fa","fa-user","mr-2","text-danger"],[1,"fa","fa-user","mr-2","text-info"],["placement","bottom",1,"fa","fa-user","mr-2",3,"ngClass","ngbTooltip"],["placement","bottom",1,"fa","fa-user","mr-2","text-danger",3,"ngbTooltip"],[1,"modal-body","bg-gray"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["data-widgster","close",1,"transition",2,"color","rgb(238, 8, 8)",3,"click"],[1,"modal-body"],[1,"col-12","vertical-tabs"],[1,"row","px-3","mt-1"],[1,"nav","flex-column","left","col-4","border-0","rounded-0","mr-0","bg-light"],["class","mt-4 ml-4 mr-2 mb-2","width","70%",3,"src",4,"ngIf"],["type","file",2,"display","none",3,"change"],["fileInput",""],[1,"btn","btn-gray","ml-2","mr-2",3,"click"],[1,"tab-content","col-8","border-0"],["id","basic",1,"tab-pane","active"],[1,"form-group"],[1,"text-gray"],["type","text",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],["name","uType",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"selected","value",4,"ngFor","ngForOf"],[1,"col-7","bg-white","text-center","py-1"],[1,"col-5","bg-white","text-center","py-1"],["type","submit",1,"btn","btn-success","mr-1",3,"click"],[1,"col-12","bg-white","text-center","py-1"],["width","70%",1,"mt-4","ml-4","mr-2","mb-2",3,"src"],[3,"selected","value"],["readonly","","name","username","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","FullName","type","text",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],["name","uTypee",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-warning","mr-1",3,"click"],[1,"btn","btn-success","mr-1",3,"click"]],template:function(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"i",5),e.qZA()(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(c){return i.searchText=c}),e.qZA(),e.TgZ(7,"div",7)(8,"span",8),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(18);return e.KtG(i.openModal(c))}),e._UZ(9,"i",9),e.qZA(),e.TgZ(10,"span",8),e.NdJ("click",function(){return i.onLoadUser()}),e._UZ(11,"i",10),e.qZA()()()()(),e.YNc(12,Q,4,9,"div",11),e.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"pagination-controls",15),e.NdJ("pageChange",function(c){return i.p=c}),e.qZA()()()(),e.YNc(17,K,41,6,"ng-template",null,16,e.W1O)(19,$,44,6,"ng-template",null,17,e.W1O)}2&n&&(e.xp6(6),e.Q6J("ngModel",i.searchText),e.xp6(6),e.Q6J("ngIf","grid"==i.type),e.xp6(4),e.Q6J("autoHide",!0)("maxSize",3))},dependencies:[m.mk,m.sg,m.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.On,u.F,_._L,U.RW,v.LS,O.g,v._s],styles:[".flip{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip .content{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip .content div.front,.flip .content div.back{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip .content div.front .card,.flip .content div.back .card{height:180px}.flip .content div.back{z-index:1;transform:rotateY(180deg)}.flip .content div.back .dropdown{width:100%}.flip .content div.back .dropdown .dropdown-menu{width:100%;margin-top:-1px}.flip .content div.back .dropdown .dropdown-menu a{color:#666}.flip .content div.back .dropdown .dropdown-menu a .fa-check{color:#378d3b}.flip .content div.back .dropdown .dropdown-menu a .fa-times{color:#d22e2e}.flip .content.flipped{transform:rotateY(180deg)}.z-index-1{z-index:1}.app.dark .bg-light{background-color:#fff!important}.app.combined .bg-gray{background-color:#bcbfc5!important}.modal-body{position:relative;flex:1 1 auto;padding:.5rem}.modal-title{margin-bottom:0;line-height:.5;color:#fff}.img-upload-btn{position:absolute;padding:0;width:calc(100% - 30px);height:38px;opacity:0}.image-wrapper{position:relative}.image-wrapper .delete-img{position:absolute;top:8px;right:10px;border:2px solid #fff;color:#fff;padding:3px 5px;border-radius:50%;visibility:hidden;cursor:pointer}.image-wrapper:hover .delete-img{visibility:visible}.app.light .bg-light{background-color:#fff!important}\n"],encapsulation:2})}return r})();var z=d(8101);let y=(()=>{class r{constructor(t){this.http=t}getBins(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getBinType(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}addBin(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}getDataMethod(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}AlertOne(t,n,i){p().fire({icon:t,title:n,text:i,allowOutsideClick:!1})}busyLoading(){return new Promise((t,n)=>{p().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{p().showLoading(),t()}})})}AlertTwo(t,n,i){p().fire({position:"center",icon:t,title:n,text:i,showConfirmButton:!1,timer:2500})}closeBusyLoading(){p().close()}modDataOnly(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}static#e=this.\u0275fac=function(n){return new(n||r)(e.LFG(h.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac})}return r})(),V=(()=>{class r{transform(t,n){if(!n||!t)return t;const i=new RegExp(n,"ig");return t.filter(o=>-1!==o.BinName.search(i))}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275pipe=e.Yjl({name:"BinSearchPipe",type:r,pure:!1})}return r})();function X(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"a",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw(2),l=e.MAs(20);return e.KtG(o.openModalUpdate(l,i))}),e._UZ(1,"i",52),e.qZA()}}function ee(r,s){if(1&r&&(e.TgZ(0,"span",53),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function te(r,s){if(1&r&&(e.TgZ(0,"span",54),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function ne(r,s){if(1&r&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function ie(r,s){if(1&r&&(e.TgZ(0,"span",56),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function re(r,s){if(1&r&&(e.TgZ(0,"span",53),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function oe(r,s){if(1&r&&(e.TgZ(0,"span",56),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function ae(r,s){if(1&r&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function se(r,s){if(1&r&&(e.TgZ(0,"span",53),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.BinType)}}function le(r,s){if(1&r&&(e.TgZ(0,"span",53),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.conres)}}function ce(r,s){if(1&r&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.conres)}}function ue(r,s){if(1&r&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.conres)}}function de(r,s){if(1&r&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.FloorAssignment)}}function pe(r,s){if(1&r&&(e.TgZ(0,"span",57),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.FloorAssignment)}}const ge=(r,s)=>({"text-success":r,"text-inverse":s});function me(r,s){if(1&r&&e._UZ(0,"i",58),2&r){const t=e.oxw().$implicit;e.Q6J("ngClass",e.WLB(2,ge,t.BinStatus,!t.BinStatus))("ngbTooltip",t.BinStatuse?"active":"passive")}}function _e(r,s){1&r&&e._UZ(0,"i",59),2&r&&e.Q6J("ngbTooltip","Inactive")}function ve(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24)(6,"h5",25),e._uU(7),e.qZA(),e.TgZ(8,"div",26)(9,"span",27),e._uU(10),e.qZA(),e.YNc(11,X,2,0,"a",28),e.qZA()(),e.TgZ(12,"div",29)(13,"div",30)(14,"div",31),e._UZ(15,"img",32),e.qZA(),e.TgZ(16,"div",33)(17,"div",12)(18,"div",34),e._uU(19,"Bin Type"),e.qZA(),e.TgZ(20,"div",35),e._uU(21,":"),e.qZA(),e.TgZ(22,"div",36),e.YNc(23,ee,2,1,"span",37)(24,te,2,1,"span",38)(25,ne,2,1,"span",39)(26,ie,2,1,"span",40)(27,re,2,1,"span",37)(28,oe,2,1,"span",40)(29,ae,2,1,"span",39)(30,se,2,1,"span",37),e.qZA(),e.TgZ(31,"div",34),e._uU(32,"Bin Name"),e.qZA(),e.TgZ(33,"div",35),e._uU(34,":"),e.qZA(),e.TgZ(35,"div",36),e._uU(36),e.qZA(),e.TgZ(37,"div",34),e._uU(38,"ETP"),e.qZA(),e.TgZ(39,"div",35),e._uU(40,":"),e.qZA(),e.TgZ(41,"div",36),e.YNc(42,le,2,1,"span",37)(43,ce,2,1,"span",41)(44,ue,2,1,"span",39),e.qZA(),e.TgZ(45,"div",34),e._uU(46,"Floor"),e.qZA(),e.TgZ(47,"div",35),e._uU(48,":"),e.qZA(),e.TgZ(49,"div",36),e.YNc(50,de,2,1,"span",39)(51,pe,2,1,"span",42),e.qZA()()()()()()(),e.TgZ(52,"div",43)(53,"div",23)(54,"div",24)(55,"h5",25),e.YNc(56,me,1,5,"i",44)(57,_e,1,1,"i",45),e._uU(58),e.qZA(),e.TgZ(59,"div",26)(60,"a",46),e.NdJ("click",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.closeMenuAssign(i))}),e._UZ(61,"i",47),e.qZA()()(),e.TgZ(62,"div",29),e._UZ(63,"ngx-bootstrap-multiselect",48),e.TgZ(64,"div",49)(65,"button",50),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.assignMenuItemsToUser(o))}),e._uU(66," Assign menu items to user "),e.qZA(),e.TgZ(67,"p",51),e._uU(68,"Logout and login to see result."),e.qZA()()()()()()()()}if(2&r){const t=s.$implicit,n=e.oxw(2);e.xp6(7),e.hij(" ",t.BinName," "),e.xp6(3),e.Oqu(t.FloorAssignment),e.xp6(1),e.Q6J("ngIf","Sales Floor"!==t.BinType),e.xp6(12),e.Q6J("ngIf","Inbound Staging"===t.BinType),e.xp6(1),e.Q6J("ngIf","Picking Bin"===t.BinType),e.xp6(1),e.Q6J("ngIf","Damage"===t.BinType),e.xp6(1),e.Q6J("ngIf","Reserve"===t.BinType),e.xp6(1),e.Q6J("ngIf","Outbound Staging"===t.BinType),e.xp6(1),e.Q6J("ngIf","O2O Area"===t.BinType),e.xp6(1),e.Q6J("ngIf","Return"===t.BinType),e.xp6(1),e.Q6J("ngIf","Sales Floor"===t.BinType),e.xp6(6),e.Oqu(t.BinDesc),e.xp6(6),e.Q6J("ngIf","L1"===t.conres),e.xp6(1),e.Q6J("ngIf","L2"===t.conres),e.xp6(1),e.Q6J("ngIf","L3"===t.conres),e.xp6(6),e.Q6J("ngIf","Not assigned"===t.FloorAssignment),e.xp6(1),e.Q6J("ngIf","Not assigned"!==t.FloorAssignment),e.xp6(5),e.Q6J("ngIf",!t.BinStatus),e.xp6(1),e.Q6J("ngIf",t.BinStatus),e.xp6(1),e.hij(" ",t.BinName," "),e.xp6(5),e.MGl("id","menuSelect",t.id,""),e.Q6J("options",n.menuSelectOptions)("texts",n.menuSelectTexts)("settings",n.menuSelectSettings)}}const fe=r=>({itemsPerPage:6,currentPage:r});function he(r,s){if(1&r&&(e.TgZ(0,"div",12),e.YNc(1,ve,69,24,"div",18),e.ALo(2,"paginate"),e.ALo(3,"BinSearchPipe"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.Bins,t.searchText),e.VKq(7,fe,t.p)))}}function xe(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit,n=e.oxw(2);e.Q6J("selected",t.TypeName==n.Bin.BinType)("value",t.TypeName),e.xp6(1),e.hij(" ",t.TypeName," ")}}function Ce(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("selected",""==t.FloorName)("value",t.FloorName),e.xp6(1),e.hij(" ",t.FloorName," ")}}function Ze(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit,n=e.oxw(2);e.Q6J("selected",t.ToLocation==n.Bin.conres)("value",t.ToLocation),e.xp6(1),e.hij(" ",t.ToLocation," ")}}function Ue(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",60)(1,"div",61)(2,"h4",62),e._uU(3,"ADD BIN"),e.qZA()(),e.TgZ(4,"div",63)(5,"div",12)(6,"div",64)(7,"form",65)(8,"ul",66),e._UZ(9,"img",67),e.qZA(),e.TgZ(10,"div",68)(11,"div",69)(12,"div",70)(13,"label",71),e._uU(14,"Bin Code"),e.qZA(),e.TgZ(15,"input",72),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.BinName=i)}),e.qZA()(),e.TgZ(16,"div",70)(17,"label",71),e._uU(18,"Bin Description"),e.qZA(),e.TgZ(19,"input",73),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.BinDesc=i)}),e.qZA()(),e.TgZ(20,"div",70)(21,"label",71),e._uU(22,"Bin Type"),e.qZA(),e.TgZ(23,"select",74),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.BinType=i)}),e._UZ(24,"option",75),e.YNc(25,xe,2,3,"option",76),e.qZA()(),e.TgZ(26,"div",70)(27,"label",71),e._uU(28,"Min Quantity"),e.qZA(),e.TgZ(29,"input",77),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.MinLen=i)}),e.qZA()(),e.TgZ(30,"div",70)(31,"label",71),e._uU(32,"Max Quantity"),e.qZA(),e.TgZ(33,"input",78),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.MaxLen=i)}),e.qZA()(),e.TgZ(34,"div",70)(35,"label",71),e._uU(36,"Floor"),e.qZA(),e.TgZ(37,"select",79),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.FloorAssignment=i)}),e._UZ(38,"option",80),e.YNc(39,Ce,2,3,"option",76),e.qZA()(),e.TgZ(40,"div",70)(41,"label",71),e._uU(42,"ETP"),e.qZA(),e.TgZ(43,"select",81),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.conres=i)}),e._UZ(44,"option",75),e.YNc(45,Ze,2,3,"option",76),e.qZA()()()(),e._UZ(46,"div",82),e.TgZ(47,"div",83)(48,"button",84),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddBin())}),e.TgZ(49,"span"),e._uU(50,"Add"),e.qZA()(),e.TgZ(51,"button",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e._uU(52,"Cancel"),e.qZA()(),e._UZ(53,"div",86),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(15),e.Q6J("ngModel",t.Bin.BinName),e.xp6(4),e.Q6J("ngModel",t.Bin.BinDesc),e.xp6(4),e.Q6J("ngModel",t.Bin.BinType),e.xp6(2),e.Q6J("ngForOf",t.BinType),e.xp6(4),e.Q6J("ngModel",t.Bin.MinLen),e.xp6(4),e.Q6J("ngModel",t.Bin.MaxLen),e.xp6(4),e.Q6J("ngModel",t.Bin.FloorAssignment),e.xp6(2),e.Q6J("ngForOf",t.Floors),e.xp6(4),e.Q6J("ngModel",t.Bin.conres),e.xp6(2),e.Q6J("ngForOf",t.DropDownMenu)}}function Me(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit,n=e.oxw(2);e.Q6J("selected",t.TypeName==n.Bin.BinType)("value",t.TypeName),e.xp6(1),e.hij(" ",t.TypeName," ")}}function be(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("selected",""==t.FloorName)("value",t.FloorName),e.xp6(1),e.hij(" ",t.FloorName," ")}}function Te(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",60)(1,"div",61)(2,"h4",62),e._uU(3,"UPDATE BIN"),e.qZA()(),e.TgZ(4,"div",63)(5,"div",12)(6,"div",64)(7,"form",65)(8,"ul",66),e._UZ(9,"img",67),e.qZA(),e.TgZ(10,"div",68)(11,"div",88)(12,"div",70)(13,"label",71),e._uU(14,"Bin Code"),e.qZA(),e.TgZ(15,"input",89),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.BinName=i)}),e.qZA()(),e.TgZ(16,"div",70)(17,"label",71),e._uU(18,"Bin Description"),e.qZA(),e.TgZ(19,"input",90),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.BinDesc=i)}),e.qZA()(),e.TgZ(20,"div",70)(21,"label",71),e._uU(22,"Bin Type"),e.qZA(),e.TgZ(23,"select",91),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.BinType=i)}),e._UZ(24,"option",75),e.YNc(25,Me,2,3,"option",76),e.qZA()(),e.TgZ(26,"div",70)(27,"label",71),e._uU(28,"Min Quantity"),e.qZA(),e.TgZ(29,"input",92),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.MinLen=i)}),e.qZA()(),e.TgZ(30,"div",70)(31,"label",71),e._uU(32,"Max Quantity"),e.qZA(),e.TgZ(33,"input",93),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.MaxLen=i)}),e.qZA()(),e.TgZ(34,"div",70)(35,"label",71),e._uU(36,"Floor"),e.qZA(),e.TgZ(37,"select",79),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.FloorAssignment=i)}),e._UZ(38,"option",80),e.YNc(39,be,2,3,"option",76),e.qZA()(),e.TgZ(40,"div",70)(41,"label",71),e._uU(42,"ETP"),e.qZA(),e.TgZ(43,"input",94),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.Bin.conres=i)}),e.qZA()()()(),e._UZ(44,"div",82),e.TgZ(45,"div",83)(46,"button",95),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onUpdateBin())}),e.TgZ(47,"span"),e._uU(48,"Update"),e.qZA()(),e.TgZ(49,"button",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e._uU(50,"Cancel"),e.qZA()(),e._UZ(51,"div",86),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(15),e.Q6J("ngModel",t.Bin.BinName),e.xp6(4),e.Q6J("ngModel",t.Bin.BinDesc),e.xp6(4),e.Q6J("ngModel",t.Bin.BinType),e.xp6(2),e.Q6J("ngForOf",t.BinType),e.xp6(4),e.Q6J("ngModel",t.Bin.MinLen),e.xp6(4),e.Q6J("ngModel",t.Bin.MaxLen),e.xp6(4),e.Q6J("ngModel",t.Bin.FloorAssignment),e.xp6(2),e.Q6J("ngForOf",t.Floors),e.xp6(4),e.Q6J("ngModel",t.Bin.conres)}}let ye=(()=>{class r{constructor(t,n,i,o,l,c,g){this.fb=t,this.toastrService=i,this.translateService=o,this.apiservice=l,this.menuService=c,this.modalService=g,this.Floors=[],this.DropDownMenu=[{ToLocation:"L1"},{ToLocation:"L2"}],this.Bin={BinName:"",BinDesc:"",BinType:"",FloorAssignment:"",conres:"",MinLen:0,MaxLen:0},this.FloorAss=[{Floor:"1st Floor"},{Floor:"2nd Floor"}],this.type="grid",this.menuSelectSettings={enableSearch:!0,checkedStyle:"fontawesome",buttonClasses:"btn btn-secondary btn-block",dynamicTitleMaxItems:0,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.menuSelectTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"menu item selected",checkedPlural:"menu items selected",searchPlaceholder:"Find menu item...",allSelected:"All selected"},this.menuSelectOptions=[],n.backdrop="static",n.keyboard=!1}ngOnInit(){this.onLoadBin(),this.getBinType()}toggle(t){this.type=t}openMenuAssign(t){let n=t.target.parentNode;for(;n;)if(n=n.parentNode,n.classList.contains("content")){n.classList.add("flipped"),n.parentNode.parentNode.classList.add("z-index-1");break}}closeMenuAssign(t){let n=t.target.parentNode;for(;n;)if(n=n.parentNode,n.classList.contains("content")){n.classList.remove("flipped"),n.parentNode.parentNode.classList.remove("z-index-1");break}}assignMenuItemsToUser(t){this.toastrService.success("Please, logout and login to see result.","Successfully assigned !")}openModal(t,n){this.modalRef=this.modalService.open(t,{container:".app"})}openModalUpdate(t,n){this.Bin.BinName=n.BinName,this.Bin.BinDesc=n.BinDesc,this.Bin.BinType=n.BinType,this.Bin.conres=n.conres,this.Bin.FloorAssignment=n.FloorAssignment,this.Bin.MaxLen=n.MaxLen,this.Bin.MinLen=n.MinLen,this.modalRef=this.modalService.open(t,{container:".app"})}closeModal(){this.modalRef.close()}getBin(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield t.apiservice.getBins("&querytag=getAllBin&value1=&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(c){t.Bins=c,i()});return function(c){return l.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())})()}onLoadBin(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.getBin()})).then((0,a.Z)(function*(){return yield t.getFloor()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getBinType(){var t=this;return(0,a.Z)(function*(){yield t.apiservice.getBinType("&querytag=getBinType&value1=&value2=&value3=&value4=").subscribe(n=>{t.BinType=n})})()}getFloor(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield t.apiservice.getBinType("&querytag=getFloor&value1=&value2=&value3=&value4=").subscribe(l=>{t.Floors=l,i()})});return function(i,o){return n.apply(this,arguments)}}())})()}AddBin(t){var n=this;return(0,a.Z)(function*(){n.getBinExist(t).then((0,a.Z)(function*(){return yield n.InsertBin(t)})).then((0,a.Z)(function*(){return yield n.onLoadBin()})).catch(i=>console.log("rejected"))})()}getBinExist(t){return new Promise((n,i)=>{this.apiservice.getDataMethod("&querytag=valBinExist&value1="+t.BinName+"&value2="+t.BinDesc+"&value3=&value4=").subscribe(o=>{0!==o.length?(this.toastrService.warning("Bin Name/Bin Description already exist!"),i()):n()})})}InsertBin(t){return new Promise((n,i)=>{this.modalRef.close(),this.apiservice.busyLoading(),this.apiservice.addBin("&querytag=InsertBin&value1="+t.BinName+"&value2="+t.BinDesc+"&value3="+t.BinType+"&value4="+t.BinSequence+"&value5="+t.MaxLen+"&value6="+t.MinLen+"&value7=Admin&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(o=>{0!==o?(this.apiservice.AlertOne("success","Create Bin Location","Bin"+t.BinName+" successfully !"),n()):(this.apiservice.AlertOne("error","Bin Location","Bin"+t.BinName+" failed to insert!"),n())})})}onAddBin(){var t=this;return(0,a.Z)(function*(){t.closeModal(),yield Promise.all([t.apiservice.busyLoading(),t.AddWMSBIN(),t.getBin2(),t.apiservice.closeBusyLoading()])})()}onUpdateBin(){var t=this;return(0,a.Z)(function*(){t.closeModal(),yield Promise.all([t.apiservice.busyLoading(),yield t.UpdateWMSBIN(),yield t.getBin2(),t.apiservice.closeBusyLoading()])})()}AddWMSBIN(){return new Promise(t=>setTimeout(()=>{this.apiservice.modDataOnly("&querytag=InsertWMSBin&value1="+this.Bin.BinName.toUpperCase()+"&value2="+this.Bin.BinDesc.toUpperCase()+"&value3="+this.Bin.BinType+"&value4="+this.Bin.MaxLen+"&value5="+this.Bin.MinLen+"&value6="+this.Bin.FloorAssignment+"&value7="+this.Bin.conres+"&value8="+localStorage.getItem("User")+"&value9="+this.Bin.FloorAssignment+"&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(n=>{t()})},200))}UpdateWMSBIN(){return new Promise(t=>setTimeout(()=>{this.apiservice.modDataOnly("&querytag=UpdateWMSBin&value1="+this.Bin.BinType+"&value2="+this.Bin.FloorAssignment+"&value3="+this.Bin.MaxLen+"&value4="+this.Bin.MinLen+"&value5="+this.Bin.BinName+"&value6="+localStorage.getItem("User")+"&value7="+this.Bin.conres+"&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(n=>{t()})},200))}getBin2(){var t=this;return(0,a.Z)(function*(){return new Promise(n=>setTimeout((0,a.Z)(function*(){yield t.apiservice.getBins("&querytag=getAllBin&value1=&value2=&value3=&value4=").subscribe(function(){var i=(0,a.Z)(function*(o){t.Bins=o,n()});return function(o){return i.apply(this,arguments)}}())}),200))})()}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(u.QS),e.Y36(_.NM),e.Y36(C._W),e.Y36(Z.sK),e.Y36(y),e.Y36(x.h),e.Y36(_.FF))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-binmaster"]],features:[e._Bn([y,x.h])],decls:21,vars:4,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search bin by name...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","border-top-0","border-right-0","border-bottom-0",3,"click"],[1,"fa","fa-plus"],[1,"fa","fa-refresh"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["modalContent",""],["modalUpdateContent",""],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"widget-controls"],[1,"badge","badge-warming","mr-1"],["href","javascript:void(0);","class","transition",3,"click",4,"ngIf"],[1,"card-body","pt-3"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["src","assets/img/bin/QRCode.png","width","90",1,"w-100"],[1,"media-body","ml-4"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-2","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],["class","badge badge-success mr-1",4,"ngIf"],["class","badge badge-primary mr-1",4,"ngIf"],["class","badge badge-danger mr-1",4,"ngIf"],["class","badge badge-warning mr-1",4,"ngIf"],["class","badge badge-warming mr-1",4,"ngIf"],["class","badge mr-1",4,"ngIf"],[1,"back"],["class","fa fa-user mr-2","placement","bottom",3,"ngClass","ngbTooltip",4,"ngIf"],["class","fa fa-user mr-2 text-danger","placement","bottom",3,"ngbTooltip",4,"ngIf"],["href","javascript:void(0);",1,"transition",3,"click"],[1,"fa","fa-times"],[1,"custom-multiselect",3,"id","options","texts","settings"],[1,"w-100","text-center","pt-3"],[1,"btn","btn-success",3,"click"],[1,"text-gray","fs-13","mt-2"],[1,"fa","fa-pencil"],[1,"badge","badge-success","mr-1"],[1,"badge","badge-primary","mr-1"],[1,"badge","badge-danger","mr-1"],[1,"badge","badge-warning","mr-1"],[1,"badge","mr-1"],["placement","bottom",1,"fa","fa-user","mr-2",3,"ngClass","ngbTooltip"],["placement","bottom",1,"fa","fa-user","mr-2","text-danger",3,"ngbTooltip"],[1,"modal-body","bg-gray"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"col-12","vertical-tabs"],[1,"row","px-3"],[1,"nav","flex-column","left","col-4","border-0","rounded-0","mr-0","bg-light"],["src","assets/img/bin/QRCode.png",1,"w-100","mr-2","ml-2","mt-2"],[1,"tab-content","col-8","border-0"],["id","basic",1,"tab-pane","active"],[1,"form-group"],[1,"text-gray"],["name","ABinName","type","text",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],["name","ABinDesc","type","text",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],["name","ABinType",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"selected","value",4,"ngFor","ngForOf"],["name","AMinLen","type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","AMaxLen","type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","AFloor",1,"form-control",3,"ngModel","ngModelChange"],["name","FloorAssignment","value",""],[1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7","bg-white","text-center","py-1"],[1,"col-5","bg-white","text-center","py-1"],[1,"btn","btn-success","mr-1",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"col-12","bg-white","text-center","py-1"],[3,"selected","value"],["id","basic1",1,"tab-pane","active"],["readonly","","name","UBinName","type","text",1,"form-control",3,"ngModel","ngModelChange"],["readonly","","name","UBinDesc","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","UBinType",1,"form-control",3,"ngModel","ngModelChange"],["name","UMinLen","type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","UMaxLen","type","number",1,"form-control",3,"ngModel","ngModelChange"],["readonly","","name","Uconres","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-info","mr-1",3,"click"]],template:function(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"i",5),e.qZA()(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(c){return i.searchText=c}),e.qZA(),e.TgZ(7,"div",7)(8,"span",8),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(18);return e.KtG(i.openModal(c,null))}),e._UZ(9,"i",9),e.qZA(),e.TgZ(10,"span",8),e.NdJ("click",function(){return i.onLoadBin()}),e._UZ(11,"i",10),e.qZA()()()()(),e.YNc(12,he,4,9,"div",11),e.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"pagination-controls",15),e.NdJ("pageChange",function(c){return i.p=c}),e.qZA()()()(),e.YNc(17,Ue,54,10,"ng-template",null,16,e.W1O)(19,Te,52,9,"ng-template",null,17,e.W1O)}2&n&&(e.xp6(6),e.Q6J("ngModel",i.searchText),e.xp6(6),e.Q6J("ngIf","grid"==i.type),e.xp6(4),e.Q6J("autoHide",!0)("maxSize",3))},dependencies:[m.mk,m.sg,m.O5,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.On,u.F,_._L,U.RW,v.LS,V,v._s],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.app.dark[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:#fff!important}.app.combined[_ngcontent-%COMP%]   .bg-gray[_ngcontent-%COMP%]{background-color:#bcbfc5!important}.modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:.5rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:.5;color:#fff}.all-caps-input[_ngcontent-%COMP%]{text-transform:uppercase}"]})}return r})(),w=(()=>{class r{constructor(t){this.http=t}getItems(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}uploadFile(t,n){const i=new FormData;return i.append("file",t),this.http.post(localStorage.getItem("Server")+"/api/uploadimg?fname="+n,i)}modDataOnly(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}AlertOne(t,n,i){p().fire({icon:t,title:n,text:i,allowOutsideClick:!1})}busyLoading(){return new Promise((t,n)=>{p().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{p().showLoading(),t()}})})}AlertTwo(t,n,i){p().fire({position:"center",icon:t,title:n,text:i,showConfirmButton:!1,timer:2500})}closeBusyLoading(){p().close()}static#e=this.\u0275fac=function(n){return new(n||r)(e.LFG(h.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac})}return r})(),we=(()=>{class r{transform(t,n){if(!n||!t)return t;const i=new RegExp(n,"ig");return t.filter(o=>-1!==o.ItemNumber.search(i)||-1!==o.ItemName.search(i)||-1!==o.UPC.search(i))}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275pipe=e.Yjl({name:"ItemSearchPipe",type:r,pure:!1})}return r})();function Be(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"div",23)(6,"h5",24),e._uU(7),e.qZA()(),e.TgZ(8,"div",25)(9,"div",26)(10,"div",27)(11,"img",28),e.NdJ("error",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onImgError(o))}),e.qZA()(),e.TgZ(12,"div",29)(13,"div",12)(14,"div",30),e._uU(15,"Item Number"),e.qZA(),e.TgZ(16,"div",31),e._uU(17,":"),e.qZA(),e.TgZ(18,"div",32),e._uU(19),e.qZA(),e.TgZ(20,"div",30),e._uU(21,"Location"),e.qZA(),e.TgZ(22,"div",31),e._uU(23,":"),e.qZA(),e.TgZ(24,"div",32),e._uU(25),e.qZA(),e.TgZ(26,"div",30),e._uU(27,"SLOC"),e.qZA(),e.TgZ(28,"div",31),e._uU(29,":"),e.qZA(),e.TgZ(30,"div",32)(31,"span",33),e._uU(32),e.qZA()()()()()()()()()()()}if(2&r){const t=s.$implicit;e.xp6(7),e.hij(" ",t.ItemDescription," "),e.xp6(4),e.Q6J("src",t.ItemImage,e.LSH),e.xp6(8),e.Oqu(t.ItemCode),e.xp6(6),e.Oqu(t.Locator),e.xp6(7),e.hij("P",t.Sloc,"")}}const Ae=r=>({itemsPerPage:6,currentPage:r});function Ie(r,s){if(1&r&&(e.TgZ(0,"div",12),e.YNc(1,Be,33,5,"div",17),e.ALo(2,"paginate"),e.ALo(3,"ItemSearchPipe"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.ProductRSFs,t.searchText),e.VKq(7,Ae,t.p)))}}function Ne(r,s){if(1&r&&(e.TgZ(0,"tr"),e._UZ(1,"td",37),e.TgZ(2,"td",37),e._uU(3),e.qZA(),e.TgZ(4,"td",37),e._uU(5),e.qZA(),e.TgZ(6,"td",37),e._uU(7),e.qZA(),e.TgZ(8,"td",37),e._uU(9),e.qZA(),e.TgZ(10,"td",37),e._uU(11),e.qZA(),e.TgZ(12,"td",37),e._uU(13),e.qZA()()),2&r){const t=s.$implicit;e.xp6(3),e.Oqu(t.ItemNumber),e.xp6(2),e.Oqu(t.ItemName),e.xp6(2),e.Oqu(t.Division),e.xp6(2),e.Oqu(t.Brand),e.xp6(2),e.Oqu(t.Category),e.xp6(2),e.Oqu(t.UPC)}}const Oe=r=>({itemsPerPage:10,currentPage:r});function Se(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",34)(3,"table",35)(4,"thead")(5,"tr"),e._UZ(6,"th"),e.TgZ(7,"th"),e._uU(8,"Item Code"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Item Description"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Ne,14,6,"tr",36),e.ALo(13,"paginate"),e.ALo(14,"ItemSearchPipe"),e.qZA()()()()()),2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",e.xi3(13,1,e.xi3(14,4,t.ProductRSFs,t.searchText),e.VKq(7,Oe,t.p)))}}function Pe(r,s){if(1&r&&e._UZ(0,"img",61),2&r){const t=e.oxw(2);e.Q6J("src",t.NewItemCode.ItemImage,e.LSH)}}function qe(r,s){if(1&r&&e._UZ(0,"img",61),2&r){const t=e.oxw(2);e.Q6J("src",t.imageSrc,e.LSH)}}function Je(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"h4",40),e._uU(3,"ADD ITEM"),e.qZA(),e.TgZ(4,"div",41)(5,"a",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.modalRef.close())}),e._UZ(6,"i",43),e.qZA()()(),e.TgZ(7,"div",44)(8,"div",12)(9,"div",45)(10,"form",46)(11,"div",47),e.YNc(12,Pe,1,1,"img",48)(13,qe,1,1,"img",48),e.TgZ(14,"input",49,50),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onFileSelected(i))}),e.qZA(),e.TgZ(16,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(15);return e.KtG(i.click())}),e.TgZ(17,"span"),e._uU(18,"Browse"),e.qZA()()(),e.TgZ(19,"div",52)(20,"div",53)(21,"div",54)(22,"label",55),e._uU(23,"Item Code"),e.qZA(),e.TgZ(24,"input",56),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.NewItemCode.ItemCode=i)}),e.qZA()(),e.TgZ(25,"div",54)(26,"label",55),e._uU(27,"Item Description"),e.qZA(),e.TgZ(28,"input",56),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.NewItemCode.ItemDescription=i)}),e.qZA()(),e.TgZ(29,"div",54)(30,"label",55),e._uU(31,"Location"),e.qZA(),e.TgZ(32,"input",56),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.NewItemCode.Locator=i)}),e.qZA()(),e.TgZ(33,"div",54)(34,"label",55),e._uU(35,"Sloc"),e.qZA(),e.TgZ(36,"input",56),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.NewItemCode.Sloc=i)}),e.qZA()()()(),e._UZ(37,"div",57),e.TgZ(38,"div",58)(39,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddItem())}),e.TgZ(40,"span"),e._uU(41,"Add"),e.qZA()()(),e._UZ(42,"div",60),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",!t.imageSrc),e.xp6(1),e.Q6J("ngIf",t.imageSrc),e.xp6(11),e.Q6J("ngModel",t.NewItemCode.ItemCode),e.xp6(4),e.Q6J("ngModel",t.NewItemCode.ItemDescription),e.xp6(4),e.Q6J("ngModel",t.NewItemCode.Locator),e.xp6(4),e.Q6J("ngModel",t.NewItemCode.Sloc)}}const B=[{path:"",redirectTo:"usermaster",pathMatch:"full"},{path:"usermaster",component:W,data:{breadcrumb:"User"}},{path:"binmaster",component:ye,data:{breadcrumb:"Bin"}},{path:"itemmaster",component:(()=>{class r{constructor(t,n,i,o,l){this.toastrService=n,this.translateService=i,this.apiservice=o,this.modalService=l,this.ProductRSFs=[],this.NewItemCode={ItemCode:"",ItemDescription:"",Locator:"",Sloc:"",ItemImage:"assets/img/app/no-image.png"},this.imageSrc=null,this.type="grid",t.backdrop="static",t.keyboard=!1}ngOnInit(){this.onLoadProduct()}toggle(t){this.type=t}getProduct(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield t.apiservice.getItems("&querytag=getAllProducts&value1=&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(c){t.ProductRSFs=c,i()});return function(c){return l.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())})()}onImgError(t){t.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",t.ImageStatus="None",console.log(t.ItemImage)}onLoadProduct(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.getProduct()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}openModal(t){var n=this;this.NewItemCode.ItemCode="",this.NewItemCode.ItemDescription="",this.NewItemCode.Locator="",this.NewItemCode.Sloc="",this.NewItemCode.ItemImage="assets/img/app/no-image.png",this.imageSrc="",this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.onShowModal(t)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(i=>console.log("error","Inserting Data","Error while loading the data!"))}onShowModal(t){var n=this;return new Promise(function(){var i=(0,a.Z)(function*(o,l){n.modalRef=n.modalService.open(t,{container:".app"}),o()});return function(o,l){return i.apply(this,arguments)}}())}onFileSelected(t){if(this.file=t.target.files[0],this.file){const n=new FileReader;n.onload=i=>{i.target&&i.target.result&&(this.imageSrc=i.target.result)},n.readAsDataURL(this.file)}}onUploadFile(){var t=this;return new Promise(n=>setTimeout((0,a.Z)(function*(){t.file&&t.apiservice.uploadFile(t.file,t.NewItemCode.ItemCode).subscribe(i=>{}),n()}),200))}onAddItem(){var t=this;return(0,a.Z)(function*(){""!=t.NewItemCode.ItemCode?""!=t.NewItemCode.ItemDescription?""!=t.NewItemCode.Locator?""!=t.NewItemCode.Sloc?0===t.ProductRSFs.filter(i=>i.ItemCode==t.NewItemCode.ItemCode).length?(t.modalRef.close(),yield Promise.all([t.apiservice.busyLoading(),yield t.AddData(),yield t.onUploadFile(),yield t.onLoadProduct(),t.apiservice.closeBusyLoading()]),t.apiservice.AlertOne("success","Add Item","Item "+t.NewItemCode.ItemCode+" has been successfully added!")):t.toastrService.warning("Item code already exist!"):t.toastrService.warning("Please enter sloc!"):t.toastrService.warning("Please enter locator!"):t.toastrService.warning("Please enter description!"):t.toastrService.warning("Please enter item code!")})()}AddData(){return new Promise(t=>setTimeout(()=>{this.apiservice.modDataOnly("&querytag=InsertItemData&value1="+this.NewItemCode.ItemCode.toUpperCase()+"&value2="+this.NewItemCode.ItemDescription.toUpperCase()+"&value3="+this.NewItemCode.Locator.toUpperCase()+"&value4="+this.NewItemCode.Sloc.toUpperCase()+"&value5=Active&value6="+localStorage.getItem("User")+"&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(n=>{t()})},200))}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(_.NM),e.Y36(C._W),e.Y36(Z.sK),e.Y36(w),e.Y36(_.FF))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-itemmaster"]],features:[e._Bn([w])],decls:20,vars:5,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search item by name...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"input-group-text","border-top-0","border-right-0","border-bottom-0",3,"click"],[1,"fa","fa-refresh"],[1,"fa","fa-plus"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["modalContent",""],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body","pt-3"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-2","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"badge","badge-warning","mr-1"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle","text-truncate"],[1,"modal-body","bg-gray"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"widget-controls"],["data-widgster","close",1,"transition",2,"color","rgb(238, 8, 8)",3,"click"],[1,"fa","fa-times"],[1,"modal-body"],[1,"col-12","vertical-tabs"],[1,"row","px-3","mt-1"],[1,"nav","flex-column","left","col-4","border-0","rounded-0","mr-0","bg-light"],["class","mt-4 ml-4 mr-2 mb-2","width","70%",3,"src",4,"ngIf"],["type","file",2,"display","none",3,"change"],["fileInput",""],[1,"btn","btn-gray","ml-2","mr-2",3,"click"],[1,"tab-content","col-8","border-0"],["id","basic",1,"tab-pane","active"],[1,"form-group"],[1,"text-gray"],["type","text",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],[1,"col-7","bg-white","text-center","py-1"],[1,"col-5","bg-white","text-center","py-1"],["type","submit",1,"btn","btn-success","mr-1",3,"click"],[1,"col-12","bg-white","text-center","py-1"],["width","70%",1,"mt-4","ml-4","mr-2","mb-2",3,"src"]],template:function(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"i",5),e.qZA()(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(c){return i.searchText=c}),e.qZA(),e.TgZ(7,"div",7)(8,"span",8),e.NdJ("click",function(){return i.onLoadProduct()}),e._UZ(9,"i",9),e.qZA(),e.TgZ(10,"span",8),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(19);return e.KtG(i.openModal(c))}),e._UZ(11,"i",10),e.qZA()()()()(),e.YNc(12,Ie,4,9,"div",11)(13,Se,15,9,"div",11),e.TgZ(14,"div",12)(15,"div",13)(16,"div",14)(17,"pagination-controls",15),e.NdJ("pageChange",function(c){return i.p=c}),e.qZA()()()(),e.YNc(18,Je,43,6,"ng-template",null,16,e.W1O)}2&n&&(e.xp6(6),e.Q6J("ngModel",i.searchText),e.xp6(6),e.Q6J("ngIf","grid"==i.type),e.xp6(1),e.Q6J("ngIf","list"==i.type),e.xp6(4),e.Q6J("autoHide",!0)("maxSize",7))},dependencies:[m.sg,m.O5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,v.LS,we,v._s],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.app.dark[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:#fff!important}.app.combined[_ngcontent-%COMP%]   .bg-gray[_ngcontent-%COMP%]{background-color:#bcbfc5!important}.modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:.5rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:.5;color:#fff}.all-caps-input[_ngcontent-%COMP%]{text-transform:uppercase}"]})}return r})(),data:{breadcrumb:"Items"}}];let Fe=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[m.ez,A.Bz.forChild(B),z.D,h.JF,u.u5,u.UX,_.IJ,U.Hv,v.JX]})}return r})()}}]);