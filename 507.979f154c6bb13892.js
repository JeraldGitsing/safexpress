"use strict";(self.webpackChunkstartng=self.webpackChunkstartng||[]).push([[507],{3507:(Ue,P,_)=>{_.r(P),_.d(P,{OutboundModule:()=>De,routes:()=>D});var h=_(6814),k=_(2787),N=_(8101),x=_(9862),m=_(6223),f=_(5979),A=_(3154),C=_(6472),a=_(5861),e=_(9212),M=_(1486),U=_(3519),g=_.n(U);let O=(()=>{class s{constructor(t){this.http=t}getPickList(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getOrderHeader(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getDetails(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getInventory(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getBins(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getWHList(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}modDataOnly(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}getDataMethod(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}addUploadItem(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}UpdateSeries(){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB&querytag=UpdateSeriesNum&value1=8&value2=&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=")}AlertOne(t,r,n){g().fire({icon:t,title:r,text:n,allowOutsideClick:!1})}busyLoading(){return new Promise((t,r)=>{g().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{g().showLoading(),t()}})})}AlertTwo(t,r,n){g().fire({position:"center",icon:t,title:r,text:n,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){g().close()}onNumberSeries(t,r){var n=r-t.toString().length+1;return Array(+(n>0&&n)).join("0")+t}static#e=this.\u0275fac=function(r){return new(r||s)(e.LFG(x.eN))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var y=_(1088),T=_(1716),S=_(2425),q=_(3999),B=_(7130),L=_(2692);function Q(s,d){1&s&&(e.TgZ(0,"div",21)(1,"span",22),e._UZ(2,"i",23),e.qZA()())}function H(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"input",24),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.searchText=n)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngModel",t.searchText)}}function E(s,d){1&s&&(e.TgZ(0,"div",21)(1,"span",22),e._UZ(2,"i",25),e.qZA()())}function R(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"input",26),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onpressentersku())})("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.ScanBarcode=n)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngModel",t.ScanBarcode)}}function G(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onBacktoHeaderL())}),e._UZ(1,"i",28),e._uU(2,"\xa0\xa0Back"),e.qZA()}}function J(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),i=e.MAs(22);return e.KtG(n.openModal(i))}),e._UZ(1,"i",30),e._uU(2,"\xa0\xa0Putaway"),e.qZA()}}function F(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),i=e.MAs(20);return e.KtG(n.UploadModal(i))}),e._UZ(1,"i",31),e._uU(2,"\xa0\xa0Upload"),e.qZA()}}function j(s,d){1&s&&(e.TgZ(0,"div",41)(1,"button",42),e._UZ(2,"i",43),e.qZA()())}function W(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"td",35),e.TgZ(2,"td",36),e._uU(3),e.qZA(),e.TgZ(4,"td",36),e._uU(5),e.qZA(),e.TgZ(6,"td",36),e._uU(7),e.qZA(),e.TgZ(8,"td",36),e._uU(9),e.qZA(),e.TgZ(10,"td",36),e._uU(11),e.qZA(),e.TgZ(12,"td",36),e._uU(13),e.qZA(),e.TgZ(14,"td",36),e._uU(15),e.qZA(),e.TgZ(16,"td",36),e._uU(17),e.qZA(),e.TgZ(18,"td",35)(19,"div",37)(20,"button",38),e.NdJ("click",function(){const i=e.CHM(t).$implicit,o=e.oxw(2);return e.KtG(o.onreceiveL(i))}),e._UZ(21,"i",39),e._uU(22,"\xa0\xa0Open"),e.qZA()(),e.YNc(23,j,3,0,"div",40),e.qZA()()}if(2&s){const t=d.$implicit;e.xp6(3),e.Oqu(t.CreateDate),e.xp6(2),e.Oqu(t.OrderNumber),e.xp6(2),e.AsE("",t.ToWarehouse," - ",t.WarehouseDescription,""),e.xp6(2),e.Oqu(t.TotalQty),e.xp6(2),e.Oqu(t.AllocatedQty),e.xp6(2),e.Oqu(t.DOStatus),e.xp6(2),e.Oqu(t.CreatedBy),e.xp6(2),e.Oqu(t.Remark),e.xp6(6),e.Q6J("ngIf",t.AllocatedQty!==t.TotalQty)}}const K=s=>({itemsPerPage:100,currentPage:s});function Y(s,d){if(1&s&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",32)(3,"table",33)(4,"thead")(5,"tr"),e._UZ(6,"th"),e.TgZ(7,"th"),e._uU(8,"Date Created"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Order Number"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Store/Warehouse"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Required Quantity"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Allocated Quantity"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Status"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Created By"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Remarks"),e.qZA(),e._UZ(23,"th"),e.qZA()(),e.TgZ(24,"tbody"),e.YNc(25,W,24,10,"tr",34),e.ALo(26,"paginate"),e.ALo(27,"UserSearchPipe"),e.qZA()()()()()),2&s){const t=e.oxw();e.xp6(25),e.Q6J("ngForOf",e.xi3(26,1,e.xi3(27,4,t.OrderHeaders,t.searchText),e.VKq(7,K,t.p)))}}function z(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.editQtyFunc(n))}),e._UZ(1,"i",46),e._uU(2,"\xa0\xa0Edit"),e.qZA()}}function V(s,d){if(1&s&&(e.TgZ(0,"tr"),e._UZ(1,"td",35),e.TgZ(2,"td",36),e._uU(3),e.qZA(),e.TgZ(4,"td",36),e._uU(5),e.qZA(),e.TgZ(6,"td",36),e._uU(7),e.qZA(),e.TgZ(8,"td",36),e._uU(9),e.qZA(),e.TgZ(10,"td",36),e._uU(11),e.qZA(),e.TgZ(12,"td",36),e._uU(13),e.qZA(),e.TgZ(14,"td",35)(15,"div",41),e.YNc(16,z,3,0,"button",44),e.qZA()()()),2&s){const t=d.$implicit;e.xp6(3),e.Oqu(t.Bin),e.xp6(2),e.Oqu(t.ItemNumber),e.xp6(2),e.Oqu(t.ItemName),e.xp6(2),e.Oqu(t.UPC),e.xp6(2),e.Oqu(t.OpenQty),e.xp6(2),e.Oqu(t.ScannedQty),e.xp6(3),e.Q6J("ngIf",0!=t.ScannedQty)}}function X(s,d){if(1&s&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",32)(3,"table",33)(4,"thead")(5,"tr"),e._UZ(6,"th"),e.TgZ(7,"th"),e._uU(8,"Location"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Item Number"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Item Description"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"UPC"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Required Quantity"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Scanned Quantity"),e.qZA(),e._UZ(19,"th"),e.qZA()(),e.TgZ(20,"tbody"),e.YNc(21,V,17,7,"tr",34),e.qZA()()()()()),2&s){const t=e.oxw();e.xp6(21),e.Q6J("ngForOf",t.PicklistDetails)}}function ee(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53)(4,"div",54)(5,"div",55)(6,"h6",56),e._uU(7),e.qZA(),e.TgZ(8,"div",57)(9,"button",58),e.NdJ("click",function(){const i=e.CHM(t).$implicit,o=e.oxw(2);return e.KtG(o.onreceiveG(i))}),e._UZ(10,"i",39),e.qZA()()(),e.TgZ(11,"div",59)(12,"div",60),e._UZ(13,"div",61),e.TgZ(14,"div",62)(15,"div",12)(16,"div",63),e._uU(17,"Warehouse"),e.qZA(),e.TgZ(18,"div",64),e._uU(19,":"),e.qZA(),e.TgZ(20,"div",65),e._uU(21),e.qZA(),e.TgZ(22,"div",63),e._uU(23,"Req. Quantity"),e.qZA(),e.TgZ(24,"div",64),e._uU(25,":"),e.qZA(),e.TgZ(26,"div",65),e._uU(27),e.qZA(),e.TgZ(28,"div",63),e._uU(29,"Alloc Quantity"),e.qZA(),e.TgZ(30,"div",64),e._uU(31,":"),e.qZA(),e.TgZ(32,"div",65),e._uU(33),e.qZA(),e.TgZ(34,"div",63),e._uU(35,"Status"),e.qZA(),e.TgZ(36,"div",64),e._uU(37,":"),e.qZA(),e.TgZ(38,"div",65)(39,"span",66),e._uU(40),e.qZA()()()()()()()()()()()}if(2&s){const t=d.$implicit;e.xp6(7),e.hij(" ",t.OrderNumber," "),e.xp6(14),e.Oqu(t.ToWarehouse),e.xp6(6),e.Oqu(t.TotalQty),e.xp6(6),e.Oqu(t.AllocatedQty),e.xp6(7),e.Oqu(t.DOStatus)}}const te=s=>({itemsPerPage:6,currentPage:s});function ne(s,d){if(1&s&&(e.TgZ(0,"div",47)(1,"div",48)(2,"div",12),e.YNc(3,ee,41,5,"div",49),e.ALo(4,"paginate"),e.ALo(5,"PutawayPipe"),e.qZA()()()),2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.xi3(4,1,e.xi3(5,4,t.OrderHeaders,t.searchText),e.VKq(7,te,t.p)))}}function re(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.editQtyFunc(n))}),e._UZ(1,"i",77),e.qZA()}}function ie(s,d){if(1&s&&(e.TgZ(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53)(4,"div",54)(5,"div",55)(6,"h5",56),e._uU(7),e.qZA(),e.TgZ(8,"div",57),e.YNc(9,re,2,0,"button",74),e.qZA()(),e.TgZ(10,"div",59)(11,"div",60),e._UZ(12,"div",61),e.TgZ(13,"div",62)(14,"div",12)(15,"div",63),e._uU(16,"Description"),e.qZA(),e.TgZ(17,"div",64),e._uU(18,":"),e.qZA(),e.TgZ(19,"div",75),e._uU(20),e.qZA(),e.TgZ(21,"div",63),e._uU(22,"Location"),e.qZA(),e.TgZ(23,"div",64),e._uU(24,":"),e.qZA(),e.TgZ(25,"div",65),e._uU(26),e.qZA(),e.TgZ(27,"div",63),e._uU(28,"UPC"),e.qZA(),e.TgZ(29,"div",64),e._uU(30,":"),e.qZA(),e.TgZ(31,"div",65),e._uU(32),e.qZA(),e.TgZ(33,"div",63),e._uU(34,"Open Qty"),e.qZA(),e.TgZ(35,"div",64),e._uU(36,":"),e.qZA(),e.TgZ(37,"div",65),e._uU(38),e.qZA(),e.TgZ(39,"div",63),e._uU(40,"Scanned Qty"),e.qZA(),e.TgZ(41,"div",64),e._uU(42,":"),e.qZA(),e.TgZ(43,"div",65),e._uU(44),e.qZA()()()()()()()()()()),2&s){const t=d.$implicit;e.xp6(7),e.hij(" ",t.ItemNumber," "),e.xp6(2),e.Q6J("ngIf",0!==t.ScannedQty),e.xp6(10),e.Q6J("ngbTooltip",t.ItemName),e.xp6(1),e.Oqu(t.ItemName),e.xp6(6),e.Oqu(t.Bin),e.xp6(6),e.Oqu(t.UPC),e.xp6(6),e.Oqu(t.OpenQty),e.xp6(6),e.Oqu(t.ScannedQty)}}function oe(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",67)(1,"div",48)(2,"div",68)(3,"h6",69),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"input",70),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onpressentersku())})("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.ScanBarcode=n)}),e.qZA()(),e.TgZ(7,"div",71)(8,"div",72),e._uU(9),e.qZA(),e.TgZ(10,"div",73),e._uU(11),e.qZA()(),e.TgZ(12,"div",12),e.YNc(13,ie,45,8,"div",49),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(4),e.hij("Reference No.: ",t.SubjectRef,""),e.xp6(2),e.Q6J("ngModel",t.ScanBarcode),e.xp6(3),e.hij("Current Location: ",t.currentBin,""),e.xp6(2),e.AsE("",t.totalScaned,"/",t.openQtydis,""),e.xp6(2),e.Q6J("ngForOf",t.PicklistDetails)}}function ae(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"i",98),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.removeFile())}),e.qZA()}}function ce(s,d){if(1&s&&(e.TgZ(0,"option",99),e._uU(1),e.qZA()),2&s){const t=d.$implicit;e.Q6J("value",t.Warehouse),e.xp6(1),e.AsE(" ",t.Warehouse," - ",t.WarehouseDescription," ")}}function se(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",78)(1,"h5",56),e._uU(2,"Upload Order"),e.qZA(),e.TgZ(3,"div",79)(4,"a",80),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeModal())}),e._UZ(5,"i",81),e.qZA()()(),e.TgZ(6,"div",82)(7,"div",83),e._UZ(8,"div",84),e.TgZ(9,"div",84)(10,"div",85)(11,"input",86),e.NdJ("change",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.fileChange(n))}),e.qZA(),e._UZ(12,"input",87),e.YNc(13,ae,1,0,"i",88),e.TgZ(14,"span",6)(15,"button",89),e._UZ(16,"i",90),e.qZA()()()(),e.TgZ(17,"div",84)(18,"select",91),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedWh=n)}),e.TgZ(19,"option",92),e._uU(20,"--Select Store---"),e.qZA(),e.YNc(21,ce,2,3,"option",93),e.qZA()(),e.TgZ(22,"div",84)(23,"input",94),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.uploadRemarks=n)}),e.qZA()(),e._UZ(24,"div",84),e.qZA(),e.TgZ(25,"div",95)(26,"div",96)(27,"button",97),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.pressUpload())}),e._uU(28,"Upload"),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(12),e.s9C("value",t.filename),e.xp6(1),e.Q6J("ngIf",t.filename),e.xp6(5),e.Q6J("ngModel",t.selectedWh),e.xp6(3),e.Q6J("ngForOf",t.warehouses),e.xp6(2),e.Q6J("ngModel",t.uploadRemarks)}}function le(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",100)(1,"h3",101),e._uU(2,"Scan Bin Location"),e.qZA()(),e.TgZ(3,"div",102)(4,"div",103)(5,"div",2)(6,"input",104),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onDialogPressEnter())})("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.targetLocation=n)}),e.qZA(),e.TgZ(7,"div",6)(8,"span",105),e._UZ(9,"i",106),e.qZA()()(),e.TgZ(10,"div",107)(11,"button",108),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.Putaway())}),e._uU(12,"Putaway"),e.qZA(),e.TgZ(13,"button",109),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeModal())}),e._uU(14,"Cancel"),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.targetLocation)}}function ue(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",100)(1,"h3",101),e._uU(2,"Scan Bin Location"),e.qZA()(),e.TgZ(3,"div",102)(4,"div",103)(5,"div",2)(6,"input",110),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.targetLocation=n)}),e.qZA()(),e.TgZ(7,"div",107)(8,"button",108),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.PutawayM())}),e._uU(9,"Putaway"),e.qZA(),e.TgZ(10,"button",109),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeModal())}),e._uU(11,"Cancel"),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.targetLocation)}}const w=s=>({show:s});function de(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",111)(1,"button",112),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onBacktoHeaderG())}),e._UZ(2,"i",113),e._uU(3,"\xa0\xa0\xa0Back"),e.qZA()()}if(2&s){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,w,t.showSetting))}}function ge(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",114)(1,"button",115),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),i=e.MAs(22);return e.KtG(n.openModal(i))}),e._uU(2,"Putaway\xa0\xa0"),e._UZ(3,"i",116),e.qZA()()}if(2&s){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,w,t.showSetting))}}let pe=(()=>{class s{handleKeyDown(t){"Shift"!==t.key&&"Enter"!==t.key&&"Unidentified"!==t.key&&(this.barcodeData+=t.key)}trimIfTooLong(t){const r=t.toString();return r.length>12?r.slice(0,-1):r}handleEnterKey(t){if("DetailsGrid"==this.type&&this.isMobile){this.barcodeData=this.trimIfTooLong(this.barcodeData);var r=this.PicklistDetails.filter(i=>i.Bin===this.barcodeData);if(""!==this.currentBin&&0!==r.length)this.toastrService.success("Scan item now!"),this.currentBin=this.barcodeData;else if(""==this.currentBin&&0!==r.length)this.toastrService.success("Scan item now!"),this.currentBin=this.barcodeData;else if(""!==this.currentBin&&0==r.length){var n=this.PicklistDetails.filter(i=>i.UPC===this.barcodeData&&i.Bin===this.currentBin);0!==n.length?n[0].OpenQty===n[0].ScannedQty?this.apiservice.AlertTwo("error","ERROR","Pick quantity exceeds open quantity!"):(n[0].ScannedQty+=1,this.totalScaned=this.ScannedSum(),n[0].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US")),this.PicklistDetails=this.PicklistDetails.slice().sort((i,o)=>o.timestamper-i.timestamper)):this.apiservice.AlertTwo("error","ERROR","Item not found in location!")}else this.currentBin="",this.apiservice.AlertTwo("error","Error","Scanned bin not in picklist!")}this.barcodeData=""}constructor(t,r,n,i,o,c,l){this.toastrService=r,this.scannerService=n,this.apiservice=i,this.breakpointObserver=o,this.menuService=c,this.translateService=l,this.PicklistDetails=[],this.OrderDetails=[],this.isMobile=!1,this.uploadRemarks="",this.type="headerlist",this.modalService=(0,e.f3M)(f.FF),this.rowData=[],this.PickList=[],this.scannedData="",this.totalScaned=0,this.barcodeData="",this.targetLocation="",this.isNewItem=!1,this.currentInventory=[],this.showSetting=!1,t.backdrop="static",t.keyboard=!1,this.detectDeviceType()}detectDeviceType(){this.breakpointObserver.observe([y.u3.Handset,y.u3.Tablet]).subscribe(t=>{this.isMobile=t.matches,this.type=this.isMobile?"headerGrid":"headerlist"})}onpressentersku(){if("Detailslist"===this.type&&!1===this.isPutawayLoc){this.ScanBarcode=this.trimIfTooLong(this.ScanBarcode);var t=this.PicklistDetails.filter(n=>n.Bin===this.ScanBarcode);if(""!==this.currentBin&&0!==t.length){for(let n=0;n<t.length;n++)t[n].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US"));this.PicklistDetails=this.PicklistDetails.slice().sort((n,i)=>i.timestamper-n.timestamper),this.toastrService.success("Scan item now!"),this.currentBin=this.ScanBarcode}else if(""==this.currentBin&&0!==t.length){for(let n=0;n<t.length;n++)t[n].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US"));this.PicklistDetails=this.PicklistDetails.slice().sort((n,i)=>i.timestamper-n.timestamper),this.toastrService.success("Scan item now!"),this.currentBin=this.ScanBarcode}else if(""!==this.currentBin&&0==t.length){var r=this.PicklistDetails.filter(n=>n.UPC===this.ScanBarcode&&n.Bin===this.currentBin);0!==r.length?r[0].OpenQty===r[0].ScannedQty?this.apiservice.AlertTwo("error","ERROR","Pick quantity exceeds open quantity!"):(r[0].ScannedQty+=1,r[0].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US")),this.PicklistDetails=this.PicklistDetails.slice().sort((n,i)=>i.timestamper-n.timestamper)):this.apiservice.AlertTwo("error","ERROR","Item not found in location!")}else this.currentBin="",this.apiservice.AlertTwo("error","Error","Scanned bin not in picklist!");this.ScanBarcode=""}}onDialogPressEnter(){if("Detailslist"===this.type&&!0===this.isPutawayLoc){var t=this.Bins.filter(r=>r.BinName===this.targetLocation);0!==t.length?"Outbound Staging"==t[0].BinType?(this.isReady=!0,this.toastrService.success("Please proceed on putaway!")):(this.toastrService.error("Scanned bin is not a outbound staging location!"),this.isReady=!1):(this.isReady=!1,this.toastrService.error("Please scan/enter bin location!"),this.ScanBarcode="")}}ngOnInit(){this.detectDeviceType(),this.isPutawayLoc=!1,this.currentBin="",this.isReady=!1,this.rowData=[],this.selectedWh="",this.selectedWh="0",this.seriesNumber="",this.uploadRemarks="",this.onLoadData()}UploadModal(t){this.modalRef=this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}removeFile(){this.filename="",this.rowData=[]}onLoadGetItem(t,r){var n=this;""===t.target.value||null==t.target.value||this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.onGetItem(t,r)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(i=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onGetItem(t,r){var n=this;return new Promise(function(){var i=(0,a.Z)(function*(o,c){console.log(t.target.value),yield n.apiservice.getDataMethod("&querytag=getSpecItem&value1="+t.target.value+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(u){0!==u.length?(n.OrderDetails[r].ItemName=u[0].ItemName,n.OrderDetails[r].Quantity=1,n.OrderDetails.push({ItemNumber:"",ItemName:"",Quantity:"0"})):n.toastrService.error("Invalid item number!","Item not found!"),o()});return function(u){return l.apply(this,arguments)}}())});return function(o,c){return i.apply(this,arguments)}}())}fileChange(t){var r=this;return(0,a.Z)(function*(){const n=t.target.files;if(n.length){if(r.filename=n[0].name,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==n[0].type)return r.toastrService.error("Invalid file format. Only excel file(.xlsx) are allowed!","Uploading Error"),void r.removeFile();const i=new FileReader;i.onload=o=>{const c=(0,M.ij)(o.target.result),l=c.SheetNames;if(l.length){let p=function(Z,ke){return Z.every(Ne=>ke.every(Ae=>Ne.hasOwnProperty(Ae)))};const u=M.P6.sheet_to_json(c.Sheets[l[0]]);if(0===u.length)return r.removeFile(),void r.toastrService.error("File is empty","Invalid content");if(!1===p(u,["ItemNumber","Quantity"]))return r.toastrService.error("Invalid column header on the file!","Invalid Header"),void r.removeFile();r.rowData=u}else r.removeFile(),r.toastrService.error("Error has been occured, please contact your admin.","File Upload")},i.readAsArrayBuffer(n[0])}})()}pressUpload(){var t=this;if(0!==this.rowData.length){if(""===this.selectedWh||null==this.selectedWh||"0"===this.selectedWh)return void this.toastrService.error("Please select store!","Upload File!");this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.GetSeriesNumber()})).then((0,a.Z)(function*(){return yield t.InsertHeader()})).then((0,a.Z)(function*(){return yield t.InsertDetails()})).then((0,a.Z)(function*(){return yield t.SuccessAlert("success","SUCCESS","Upload Successfully complete!")})).catch(r=>console.log("error","Inserting Data","Error while loading the data!"))}else this.toastrService.error("Please select file!","Upload File!")}GetSeriesNumber(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.apiservice.getDataMethod("&querytag=getSeries&value1=8&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.seriesNumber="OUT"+t.apiservice.onNumberSeries(c[0].NumberUsed+=1,9),n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())}GetTransactNumber(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.apiservice.getDataMethod("&querytag=getSeries&value1=0&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.transNumber="TRN"+t.apiservice.onNumberSeries(c[0].NumberUsed+=1,9),n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())}InsertHeader(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.apiservice.addUploadItem("&querytag=InsertUploadDOHead&value1="+t.seriesNumber+"&value2="+t.selectedWh+"&value3="+t.uploadRemarks+"&value4="+localStorage.getItem("User")+"&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var o=(0,a.Z)(function*(c){n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())}InsertDetails(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){for(let o=0;o<t.rowData.length;o++)t.apiservice.modDataOnly("&querytag=InsertUploadDOLine&value1="+t.seriesNumber+"&value2="+t.rowData[o].ItemNumber+"&value3="+t.rowData[o].Quantity+"&value4=Open&value5="+localStorage.getItem("User")+"&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var c=(0,a.Z)(function*(l){});return function(l){return c.apply(this,arguments)}}());t.apiservice.UpdateSeries().subscribe(function(){var o=(0,a.Z)(function*(c){});return function(c){return o.apply(this,arguments)}}()),n(),t.modalRef.close(),t.apiservice.closeBusyLoading(),t.SuccessAlert("success","SUCCESS","Uploading successfuly done!")});return function(n,i){return r.apply(this,arguments)}}())}busyLoadingPick(){return new Promise((t,r)=>{g().fire({title:"Please wait",html:"Creating Picklist..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{g().showLoading(),t()}})})}closeBusyLoadingPick(){g().close()}onLoadData(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.getWarehouses()})).then((0,a.Z)(function*(){return yield t.getBin()})).then((0,a.Z)(function*(){return yield t.loadOrderHeader()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(r=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getWarehouses(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getWHList("&querytag=GetWarehouse&value1=&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.warehouses=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}loadOrderHeader(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getOrderHeader("&querytag=OrderUpload&value1=&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.OrderHeaders=yield c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}getInventory(t){var r=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield r.apiservice.getInventory("&querytag=getItemAvailable&value1="+t+"&value2=Picking Bin&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){r.InventoryDetails=l,i()});return function(l){return c.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())})()}onUpdateAllocation(t,r,n){var i=this;return new Promise(function(){var o=(0,a.Z)(function*(c,l){i.apiservice.modDataOnly("&querytag=UpdateAllocation&value1="+n+"&value2="+t+"&value3="+r+"&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var u=(0,a.Z)(function*(p){c()});return function(p){return u.apply(this,arguments)}}())});return function(c,l){return o.apply(this,arguments)}}())}AllocateItemBin(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){var c=t;r.InventoryDetails.forEach(l=>{if(r.PickList=[],c===l.Quantity&&0!==c)console.log(1),c-=l.Quantity,r.onUpdateAllocation(l.BinLoc,l.ItemNumber,l.Quantity).then((0,a.Z)(function*(){return yield r.InsertPickList(l.ItemNumber,l.Quantity,l.BinLoc)})).then((0,a.Z)(function*(){return yield r.InsertTransaction(l.ItemNumber,l.Quantity,0,r.seriesNumber,l.BinLoc,"Pick List","-")})).catch(p=>console.log("error","Fetching Data","Error while loading the data!"));else if(c>l.Quantity&&0!==c)console.log(2),c-=l.Quantity,r.onUpdateAllocation(l.BinLoc,l.ItemNumber,l.Quantity).then((0,a.Z)(function*(){return yield r.InsertPickList(l.ItemNumber,l.Quantity,l.BinLoc)})).then((0,a.Z)(function*(){return yield r.InsertTransaction(l.ItemNumber,l.Quantity,0,r.seriesNumber,l.BinLoc,"Pick List","-")})).catch(p=>console.log("error","Fetching Data","Error while loading the data!"));else if(c<l.Quantity&&0!==c){console.log(3);var u=c;c=0,r.onUpdateAllocation(l.BinLoc,l.ItemNumber,u).then((0,a.Z)(function*(){return yield r.InsertPickList(l.ItemNumber,u,l.BinLoc)})).then((0,a.Z)(function*(){return yield r.InsertTransaction(l.ItemNumber,u,0,r.seriesNumber,l.BinLoc,"Pick List","-")})).catch(p=>console.log("error","Fetching Data","Error while loading the data!"))}else if(0===c)return}),yield r.closeBusyLoadingPick(),i()});return function(i,o){return n.apply(this,arguments)}}())}InsertTransaction(t,r,n,i,o,c,l){var u=this;return new Promise(function(){var p=(0,a.Z)(function*(v,b){u.apiservice.modDataOnly("&querytag=InsertTransaction&value1="+u.transNumber+"&value2="+c+"&value3="+t+"&value4="+r+"&value5="+n+"&value6="+i+"&value7="+o+"&value8="+l+"&value9="+localStorage.getItem("User")+"&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(Z=>{v()})});return function(v,b){return p.apply(this,arguments)}}())}InsertPickList(t,r,n){var i=this;return new Promise(function(){var o=(0,a.Z)(function*(c,l){i.apiservice.modDataOnly("&querytag=InsertPickList&value1="+i.seriesNumber+"&value2="+t+"&value3="+n+"&value4="+r+"&value5=&value6="+localStorage.getItem("User")+"&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var u=(0,a.Z)(function*(p){});return function(p){return u.apply(this,arguments)}}()),c()});return function(c,l){return o.apply(this,arguments)}}())}CreatePickList(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){var o=0;t.rowData.forEach(c=>{o=c.Quantity,t.busyLoadingPick().then((0,a.Z)(function*(){return yield t.getInventory(c.ItemNumber)})).then((0,a.Z)(function*(){return yield t.AllocateItemBin(o)})).then((0,a.Z)(function*(){return n()})).catch(l=>console.log("error","Fetching Data","Error while loading the data!"))})});return function(n,i){return r.apply(this,arguments)}}())}toggle(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){r.type=t,r.currentBin="",r.totalScaned=0,i()});return function(i,o){return n.apply(this,arguments)}}())}onreceiveL(t){var r=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield r.toggle("Detailslist")})).then((0,a.Z)(function*(){return yield r.onGetDetails(t.OrderNumber)})).catch(n=>console.log("rejected!"))}getSelection(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){r.apiservice.getDataMethod("&querytag=getSelectionExist&value1="+t.RefNumber+"&value2=&value3=&value4=").subscribe(c=>{0!==c.length?r.apiservice.modDataOnly("&querytag=UpdateSelection&value1="+t.RefNumber+"&value2="+localStorage.getItem("User")+"&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13&value14&value15").subscribe(l=>{}):r.apiservice.modDataOnly("&querytag=InsertSelection&value1="+t.RefNumber+"&value2="+localStorage.getItem("User")+"&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13&value14&value15").subscribe(l=>{}),i()})});return function(i,o){return n.apply(this,arguments)}}())}onreceiveG(t){var r=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield r.toggle("DetailsGrid")})).then((0,a.Z)(function*(){return yield r.onGetDetails(t.OrderNumber)})).catch(n=>console.log("rejected!"))}onBacktoHeaderL(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.toggle("headerlist")})).then((0,a.Z)(function*(){return yield t.loadOrderHeader()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(r=>console.log("rejected!"))}onUpdateBackTo(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.apiservice.modDataOnly("&querytag=UpdateBackToHeader&value1="+t.SubjectRef+"&value2=&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13&value14&value15").subscribe(o=>{n()})});return function(n,i){return r.apply(this,arguments)}}())}onBacktoHeaderG(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.toggle("headerGrid")})).then((0,a.Z)(function*(){return yield t.loadOrderHeader()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(r=>console.log("rejected!"))}openModal(t){0!==this.PicklistDetails.filter(n=>0!==n.ScannedQty).length?(this.scannedLoc="",this.isPutawayLoc=!0,this.modalRef=this.modalService.open(t,{container:".app"})):this.apiservice.AlertTwo("warning","WARNING","No Scanned item found,Please scan item first!")}closeModal(){this.isPutawayLoc=!1,this.isReady=!1,this.modalRef.close()}editQtyFunc(t){var n,r=this;this.editableQty=t.ScannedQty,this.editableRow=this.PicklistDetails.indexOf(t),g().fire({title:"UPDATE QUANTITY",input:"number",inputValue:this.editableQty,focusConfirm:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Update",showLoaderOnConfirm:!0,allowOutsideClick:!1,preConfirm:(n=(0,a.Z)(function*(i){""==i||parseInt(i)<=0?g().showValidationMessage("Please enter valid quantity!"):i!=r.editableQty?parseInt(i)>parseInt(t.OpenQty)&&g().showValidationMessage("Pick quantity exceeds open quantity!"):g().showValidationMessage("Please change the quantity!")}),function(o){return n.apply(this,arguments)})}).then(n=>{n.isConfirmed&&(this.PicklistDetails[this.editableRow].ScannedQty=parseInt(n.value),this.totalScaned=this.ScannedSum())})}onGetDetails(t){var r=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield r.apiservice.getDetails("&querytag=getPickListDetails&value1="+t+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){r.PicklistDetails=l,r.apiservice.closeBusyLoading(),r.SubjectRef=t,r.openQtydis=r.OpenSum(),r.totalScaned=r.ScannedSum(),i()});return function(l){return c.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())})()}OpenSum(){return this.PicklistDetails.reduce((t,r)=>t+r.OpenQty,0)}ScannedSum(){return this.PicklistDetails.reduce((t,r)=>t+r.ScannedQty,0)}onLoadPODetails(t){var r=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield r.onGetDetails(t)})).then((0,a.Z)(function*(){return yield r.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getBin(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getBins("&querytag=getAllBin&value1=&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.Bins=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}Putaway(){var t=this,r=this.Bins.filter(n=>n.BinName===this.targetLocation);this.isReady=0!==r.length,!0===this.isReady?"Outbound Staging"==r[0].BinType?this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.UpdateLocation()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).then((0,a.Z)(function*(){return yield t.SuccessAlert1("success","SUCCESS","")})).catch(n=>console.log("error","Inserting Data","Error while loading the data!")):this.toastrService.error("Scanned bin is not a outbound staging location!"):this.toastrService.error("Please scan/enter bin location!")}PutawayM(){var t=this,r=this.Bins.filter(n=>n.BinName===this.targetLocation);this.isReady=0!==r.length,!0===this.isReady?"Outbound Staging"==r[0].BinType?this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.UpdateLocation()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).then((0,a.Z)(function*(){return yield t.SuccessAlert1("success","SUCCESS","")})).catch(n=>console.log("error","Inserting Data","Error while loading the data!")):this.toastrService.error("Scanned bin is not a outbound staging location!"):this.toastrService.error("Please scan/enter bin location!")}UpdateLocation(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.PicklistDetails.filter(c=>0!==c.ScannedQty).forEach(c=>{t.loadInventory(c.ItemNumber,c.Bin).then((0,a.Z)(function*(){return yield t.DefineQuantity(parseInt(c.ScannedQty))})).then((0,a.Z)(function*(){return yield t.onUpdatePickStatus(parseInt(c.Id),c)})).catch(l=>console.log("error","Inserting Data","Error while loading the data!"))}),t.closeModal(),n()});return function(n,i){return r.apply(this,arguments)}}())}loadInventory(t,r){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var i=(0,a.Z)(function*(o,c){yield n.apiservice.getDataMethod("&querytag=getInventoryLine&value1="+t+"&value2="+r+"&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(u){n.currentInventory=u,o()});return function(u){return l.apply(this,arguments)}}())});return function(o,c){return i.apply(this,arguments)}}())})()}DefineQuantity(t){var r=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){var c=t;r.currentInventory.forEach(l=>{if(c===l.Allocated&&0!==c){var u=c;c-=l.Allocated,r.InsertTransaction(l.ItemNumber,u,l.Id,r.SubjectRef,l.BinLoc,"Outbound Putaway",r.targetLocation).catch(v=>console.log("error","Inserting Data","Error while loading the data!"))}else if(c>l.Allocated&&0!==c)c-=l.Allocated,r.InsertTransaction(l.ItemNumber,l.Allocated,l.Id,r.SubjectRef,l.BinLoc,"Outbound Putaway",r.targetLocation).catch(v=>console.log("error","Inserting Data","Error while loading the data!"));else if(c<l.Allocated&&0!==c){var p=c;c=0,r.InsertTransaction(l.ItemNumber,p,l.Id,r.SubjectRef,l.BinLoc,"Outbound Putaway",r.targetLocation).catch(v=>console.log("error","Inserting Data","Error while loading the data!"))}else if(0===c)return}),i()});return function(i,o){return n.apply(this,arguments)}}())})()}onUpdatePickStatus(t,r){var n=this;return new Promise(function(){var i=(0,a.Z)(function*(o,c){r.OpenQty===r.ScannedQty?n.apiservice.modDataOnly("&querytag=UpdatePicklistStatus&value1="+t+"&value2="+localStorage.getItem("User")+"&value3="+r.ScannedQty+"&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var l=(0,a.Z)(function*(u){o()});return function(u){return l.apply(this,arguments)}}()):n.apiservice.modDataOnly("&querytag=UpdatePicklistQty&value1="+r.ScannedQty+"&value2="+localStorage.getItem("User")+"&value3="+t+"&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var l=(0,a.Z)(function*(u){o()});return function(u){return l.apply(this,arguments)}}())});return function(o,c){return i.apply(this,arguments)}}())}SuccessAlert(t,r,n){var i=this;g().fire({position:"center",icon:t,title:r,text:n,allowOutsideClick:!0,showConfirmButton:!1,timer:1800,willClose:()=>{this.loadOrderHeader().then((0,a.Z)(function*(){return yield i.GetTransactNumber()})).then((0,a.Z)(function*(){return yield i.CreatePickList()})).catch(o=>console.log("error","Fetching Data","Error while loading the data!"))}})}SuccessAlert1(t,r,n){var i=this;g().fire({position:"center",icon:t,title:r,text:n,allowOutsideClick:!0,showConfirmButton:!1,timer:2500,willClose:()=>{this.PicklistDetails.filter(c=>0!==c.ScannedQty).forEach(c=>{this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield i.checkExistInventory(c.ItemNumber)})).then((0,a.Z)(function*(){return yield i.UpdateLine(c.ItemNumber,c.ScannedQty,c.Bin)})).then((0,a.Z)(function*(){return yield i.AddLine(c.ItemNumber,c.ScannedQty)})).then((0,a.Z)(function*(){return yield i.doneTransaction()})).then((0,a.Z)(function*(){return yield i.apiservice.closeBusyLoading()})).catch(l=>console.log("error","Inserting Data","Error while loading the data!"))})}})}checkExistInventory(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield r.apiservice.getDataMethod("&querytag=InventoryItem&value1="+r.targetLocation+"&value2="+t+"&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){console.log(1),console.log(l),r.isNewItem=0===l.length,i()});return function(l){return c.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())}UpdateLine(t,r,n){var i=this;return new Promise(function(){var o=(0,a.Z)(function*(c,l){console.log(2),i.apiservice.modDataOnly("&querytag=UpdateInventoryTransfer&value1="+r+"&value2="+n+"&value3="+t+"&value4=0&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var u=(0,a.Z)(function*(p){c()});return function(p){return u.apply(this,arguments)}}())});return function(c,l){return o.apply(this,arguments)}}())}AddLine(t,r){var n=this;return new Promise(function(){var i=(0,a.Z)(function*(o,c){console.log(3),console.log(n.isNewItem),!0===n.isNewItem?n.apiservice.modDataOnly("&querytag=InsertInventory&value1="+n.targetLocation+"&value2="+t+"&value3="+r+"&value4=0&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var l=(0,a.Z)(function*(u){o()});return function(u){return l.apply(this,arguments)}}()):n.apiservice.modDataOnly("&querytag=UpdateInventory&value1="+r+"&value2="+n.targetLocation+"&value3="+t+"&value4=0&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var l=(0,a.Z)(function*(u){o()});return function(u){return l.apply(this,arguments)}}())});return function(o,c){return i.apply(this,arguments)}}())}doneTransaction(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.targetLocation="",t.ScanBarcode="",t.isMobile?t.onBacktoHeaderG():t.onBacktoHeaderL(),n()});return function(n,i){return r.apply(this,arguments)}}())}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(f.NM),e.Y36(S._W),e.Y36(O),e.Y36(O),e.Y36(y.Yg),e.Y36(T.h),e.Y36(q.sK))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-createpicklist"]],hostBindings:function(r,n){1&r&&e.NdJ("keydown",function(o){return n.handleKeyDown(o)},!1,e.Jf7)("keyup.enter",function(o){return n.handleEnterKey(o)},!1,e.Jf7)},features:[e._Bn([O,T.h])],decls:27,vars:15,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],["class","input-group-prepend",4,"ngIf"],["type","text","placeholder","Search...","class","form-control border-0",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","placeholder","Scan barcode...","class","form-control border-0",3,"ngModel","keyup.enter","ngModelChange",4,"ngIf"],[1,"input-group-append"],["class","input-group-text border-top-0 border-right-0 border-bottom-0 mr-1 btn-danger",3,"click",4,"ngIf"],["class","input-group-text border-top-0 border-right-0 btn-success border-bottom-0",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","col-lg-3 col-md-5",4,"ngIf"],["class","col-lg-3 mt-0 col-md-5",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["Upload",""],["PutawayStocks",""],["MPutawayStocks",""],["class","settings2",3,"ngClass",4,"ngIf"],["class","settings4",3,"ngClass",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"fa","fa-qrcode"],["type","text","placeholder","Scan barcode...",1,"form-control","border-0",3,"ngModel","keyup.enter","ngModelChange"],[1,"input-group-text","border-top-0","border-right-0","border-bottom-0","mr-1","btn-danger",3,"click"],[1,"fa","fa-mail-reply"],[1,"input-group-text","border-top-0","border-right-0","btn-success","border-bottom-0",3,"click"],[1,"fa","fa-shopping-cart"],[1,"fa","fa-upload"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"align-middle","text-truncate"],["role","group",1,"btn-group","mr-2"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-folder-open"],["class","btn-group","role","group",4,"ngIf"],["role","group",1,"btn-group"],[1,"btn","btn-danger","btn-sm"],[1,"fa","fa-exclamation-circle"],["class","btn btn-warning btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[1,"col-lg-3","col-md-5"],[1,"card","border-0","box-shadow","mb-4"],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"widget-controls","mb-2"],["href","javascript:void(0);",1,"btn","btn-info","btn-sm",3,"click"],[1,"card-body","pt-3"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],[1,"media-body","ml-4"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-2","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"badge","badge-success","mr-1"],[1,"col-lg-3","mt-0","col-md-5"],[1,"input-group","box-shadow"],[1,"mt-3","ml-2"],["type","text","placeholder","Scan item barcode...",1,"form-control","border-0",3,"ngModel","keyup.enter","ngModelChange"],[1,"d-flex","justify-content-between","mb-4"],[1,"p-6","ml-2",2,"font-weight","bold"],[1,"p-6","mr-4",2,"font-weight","bold"],["href","javascript:void(0);","class","btn btn-warning btn-sm",3,"click",4,"ngIf"],[1,"col-6","pl-2","text-left","text-truncate",3,"ngbTooltip"],["href","javascript:void(0);",1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-pencil"],[1,"card-header","transparent","border-0","text-muted"],[1,"widget-controls","mr-2","mt-1"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],[1,"col-lg-12","mb-2"],["widget","",1,"card","border-0","box-shadow"],[1,"form-group"],[1,"input-group","file-upload"],["type","file",1,"file-upload-btn",3,"change"],["type","text","placeholder","Choose a file...",1,"form-control",3,"value"],["class","fa fa-times delete-file",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary"],[1,"fa","fa-file-excel-o"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Remarks",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"custom-control","custom-checkbox","col-sm-12","mb-2","ml-4"],["type","submit",1,"btn","btn-success","pull-right",3,"click"],[1,"fa","fa-times","delete-file",3,"click"],[3,"value"],[1,"modal-header-own"],["id","modal-basic-title",1,"modal-title",2,"color","black","margin-top","18px","margin-left","16px"],[1,"modal-body"],[1,"container","mb-3","mt-3"],["type","text","placeholder","Scan bin barcode...",1,"form-control","border-0",3,"ngModel","keyup.enter","ngModelChange"],[1,"input-group-text","border-top-0","border-right-0","border-bottom-0"],[1,"fa","fa-reorder"],[1,"button-container"],["type","button",1,"btn","btn-success","mr-1",3,"click"],["type","button",1,"btn","btn-danger","mr-1",3,"click"],["readonly","","type","text","placeholder","Scan destination bin...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"settings2",3,"ngClass"],[1,"btn","btn-danger","btn-rounded",3,"click"],[1,"fa","fa-mail-reply-all"],[1,"settings4",3,"ngClass"],[1,"btn","btn-success","btn-rounded",3,"click"],[1,"fa","fa-cart-arrow-down"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Q,3,0,"div",3)(4,H,1,1,"input",4)(5,E,3,0,"div",3)(6,R,1,1,"input",5),e.TgZ(7,"div",6),e.YNc(8,G,3,0,"span",7)(9,J,3,0,"span",8)(10,F,3,0,"span",8),e.qZA()()()(),e.YNc(11,Y,28,9,"div",9)(12,X,22,1,"div",9)(13,ne,6,9,"div",10)(14,oe,14,6,"div",11),e.TgZ(15,"div",12)(16,"div",13)(17,"div",14)(18,"pagination-controls",15),e.NdJ("pageChange",function(o){return n.p=o}),e.qZA()()()(),e.YNc(19,se,29,5,"ng-template",null,16,e.W1O)(21,le,15,1,"ng-template",null,17,e.W1O)(23,ue,12,1,"ng-template",null,18,e.W1O)(25,de,4,3,"div",19)(26,ge,4,3,"div",20)),2&r&&(e.xp6(3),e.Q6J("ngIf","headerGrid"==n.type||"headerlist"==n.type),e.xp6(1),e.Q6J("ngIf","headerGrid"==n.type||"headerlist"==n.type),e.xp6(1),e.Q6J("ngIf","Detailslist"==n.type&&!n.isMobile),e.xp6(1),e.Q6J("ngIf","Detailslist"==n.type&&!n.isMobile),e.xp6(2),e.Q6J("ngIf","Detailslist"==n.type),e.xp6(1),e.Q6J("ngIf","Detailslist"==n.type),e.xp6(1),e.Q6J("ngIf","headerlist"==n.type&&!n.isMobile),e.xp6(1),e.Q6J("ngIf","headerlist"==n.type&&!n.isMobile),e.xp6(1),e.Q6J("ngIf","Detailslist"==n.type&&!n.isMobile),e.xp6(1),e.Q6J("ngIf","headerGrid"==n.type&&n.isMobile),e.xp6(1),e.Q6J("ngIf","DetailsGrid"==n.type&&n.isMobile),e.xp6(4),e.Q6J("autoHide",!0)("maxSize",3),e.xp6(7),e.Q6J("ngIf","DetailsGrid"==n.type||"DetailsGridView"==n.type||"RequestGrid"==n.type),e.xp6(1),e.Q6J("ngIf","DetailsGrid"==n.type))},dependencies:[h.mk,h.sg,h.O5,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.On,f._L,C.LS,B.g,L.B,C._s],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.app.dark[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:#fff!important}.app.combined[_ngcontent-%COMP%]   .bg-gray[_ngcontent-%COMP%]{background-color:#bcbfc5!important}.modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:.5rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:.5;color:#fff}.all-caps-input[_ngcontent-%COMP%]{text-transform:uppercase}.container[_ngcontent-%COMP%]{position:relative}.button-container[_ngcontent-%COMP%]{top:10px;margin:10px}.app.light[_ngcontent-%COMP%]   .widget-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a6a6a6}.file-upload[_ngcontent-%COMP%]   .file-upload-btn[_ngcontent-%COMP%]{position:absolute;width:100%;height:35px;z-index:9;opacity:0}.file-upload[_ngcontent-%COMP%]   .delete-file[_ngcontent-%COMP%]{position:absolute;right:50px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:99;visibility:hidden}.file-upload[_ngcontent-%COMP%]:hover   .delete-file[_ngcontent-%COMP%]{visibility:visible}.widget-controls[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;right:0;padding:.3rem .5rem;font-size:14px}.mb-4[_ngcontent-%COMP%], .my-4[_ngcontent-%COMP%]{margin-bottom:.2rem!important;margin-left:.5rem!important;margin-right:.5rem!important}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:9px;padding-left:8px}.settings2[_ngcontent-%COMP%]{position:fixed;top:80px;right:-300px;z-index:1018;width:340px;transition:all .2s}.settings2.show[_ngcontent-%COMP%]{right:-1px}.settings2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;left:-310px;padding:7px 12px 7px 10px;z-index:99;color:#efe5e5;bottom:-37rem!important;cursor:pointer}.settings2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:none}.settings4[_ngcontent-%COMP%]{position:fixed;top:80px;right:-275px;z-index:1018;width:340px;transition:all .2s}.settings4.show[_ngcontent-%COMP%]{right:-1px}.settings4[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;left:-196px;padding:7px 12px 7px 10px;z-index:99;color:#efe5e5;bottom:-37rem!important;cursor:pointer}.settings4[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:none}"]})}return s})(),_e=(()=>{class s{constructor(t){this.http=t}getPickList(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getOrderHeader(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getDetails(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getInventory(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getInStocks(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getItemImg(t){return this.http.get(localStorage.getItem("Server2")+"/getdata?sku="+t)}getSKU(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}getBins(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}modDataOnly(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}getDataMethod(t){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+t)}addUploadItem(t){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+t)}UpdateSeries(){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB&querytag=UpdateSeriesNum&value1=0&value2=&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=")}AlertOne(t,r,n){g().fire({icon:t,title:r,text:n,allowOutsideClick:!1})}busyLoading(){return new Promise(function(){var t=(0,a.Z)(function*(r,n){yield g().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{g().showLoading(),r()}})});return function(r,n){return t.apply(this,arguments)}}())}AlertTwo(t,r,n){g().fire({position:"center",icon:t,title:r,text:n,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){g().close()}onNumberSeries(t,r){var n=r-t.toString().length+1;return Array(+(n>0&&n)).join("0")+t}QuerySender(t){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+t)}postDataGTI(t,r){const n=new x.WM({"Content-Type":"application/json"});return this.http.post(localStorage.getItem("Server")+"/"+r,t,{headers:n})}static#e=this.\u0275fac=function(r){return new(r||s)(e.LFG(x.eN))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var I=_(3362);let he=(()=>{class s{transform(t,r){if(!r||!t)return t;const n=new RegExp(r,"ig");return t.filter(i=>(i.OrderNumber.trim(),-1!==i.OrderNumber.trim().search(n)||-1!==i.Remark.trim().search(n)||-1!==i.WarehouseName.trim().search(n)||-1!==i.ToWarehouse.trim().search(n)))}static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275pipe=e.Yjl({name:"ETPDOSearchPipe",type:s,pure:!1})}return s})();function me(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2),i=e.MAs(16);return e.KtG(n.onpressPrint(i,n.LineHeader))}),e._UZ(1,"i",30),e._uU(2,"\xa0\xa0Print"),e.qZA()}}function ve(s,d){if(1&s&&(e.TgZ(0,"tr"),e._UZ(1,"td",31),e.TgZ(2,"td",32),e._uU(3),e.qZA(),e.TgZ(4,"td",32),e._uU(5),e.qZA(),e.TgZ(6,"td",32),e._uU(7),e.qZA(),e.TgZ(8,"td",32),e._uU(9),e.qZA(),e.TgZ(10,"td",32),e._uU(11),e.qZA(),e._UZ(12,"td",31),e.qZA()),2&s){const t=d.$implicit;e.xp6(3),e.Oqu(t.ItemNumber),e.xp6(2),e.Oqu(t.Name),e.xp6(2),e.Oqu(t.ItemGroup),e.xp6(2),e.Oqu(t.DispatchedQuantity),e.xp6(2),e.Oqu(t.UOM)}}function fe(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",13),e.YNc(2,me,3,0,"button",14),e.TgZ(3,"div",15)(4,"div",16)(5,"div",17)(6,"div",18)(7,"div",19)(8,"label"),e._uU(9,"Order Number"),e.qZA(),e.TgZ(10,"div",20)(11,"input",21),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LineHeader.OrderNumber=n)}),e.qZA(),e.TgZ(12,"span",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),i=e.MAs(12);return e.KtG(n.onShowFind(i))}),e._uU(13,"..."),e.qZA()()()(),e.TgZ(14,"div",18)(15,"label"),e._uU(16,"Order Status"),e.qZA(),e.TgZ(17,"div",19)(18,"input",21),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LineHeader.OrderStatus=n)}),e.qZA()()(),e._UZ(19,"div",18),e.qZA(),e.TgZ(20,"div",17)(21,"div",18)(22,"label"),e._uU(23,"From Store"),e.qZA(),e.TgZ(24,"div",19)(25,"input",23),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LineHeader.Warehouse=n)}),e.qZA()()(),e.TgZ(26,"div",18)(27,"label"),e._uU(28,"To Store"),e.qZA(),e.TgZ(29,"div",19)(30,"input",21),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LineHeader.ToWarehouse=n)}),e.qZA()()(),e._UZ(31,"div",18),e.qZA(),e.TgZ(32,"div",17)(33,"div",18)(34,"label"),e._uU(35,"Location"),e.qZA(),e.TgZ(36,"div",19)(37,"input",21),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LineHeader.Location=n)}),e.qZA()()(),e.TgZ(38,"div",18)(39,"label"),e._uU(40,"Remarks"),e.qZA(),e.TgZ(41,"div",19)(42,"input",21),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LineHeader.Remark=n)}),e.qZA()()(),e.TgZ(43,"div",18)(44,"label",24),e._uU(45,"Total: "),e.qZA(),e.TgZ(46,"label",25),e._uU(47),e.qZA()()()()()(),e.TgZ(48,"div",5)(49,"div",26)(50,"table",27)(51,"thead")(52,"tr"),e._UZ(53,"th"),e.TgZ(54,"th"),e._uU(55,"Item Number"),e.qZA(),e.TgZ(56,"th"),e._uU(57,"Item Name"),e.qZA(),e.TgZ(58,"th"),e._uU(59,"Item Group"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"Dispatch Quantity"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"Unit of Measurement"),e.qZA(),e._UZ(64,"th"),e.qZA()(),e.TgZ(65,"tbody"),e.YNc(66,ve,13,5,"tr",28),e.qZA()()()()()}if(2&s){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",0!==t.PicklistDetails.length),e.xp6(9),e.Q6J("ngModel",t.LineHeader.OrderNumber),e.xp6(7),e.Q6J("ngModel",t.LineHeader.OrderStatus),e.xp6(7),e.Q6J("ngModel",t.LineHeader.Warehouse),e.xp6(5),e.Q6J("ngModel",t.LineHeader.ToWarehouse),e.xp6(7),e.Q6J("ngModel",t.LineHeader.Location),e.xp6(5),e.Q6J("ngModel",t.LineHeader.Remark),e.xp6(5),e.Oqu(t.totalQuantity),e.xp6(19),e.Q6J("ngForOf",t.PicklistDetails)}}function ye(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",45)(1,"div",46),e.NdJ("click",function(){const i=e.CHM(t).$implicit,o=e.oxw(2);return e.KtG(o.editQtyFunc(i))}),e.TgZ(2,"div",47)(3,"div",48)(4,"div",49)(5,"div",50)(6,"h6",51),e._uU(7),e.qZA(),e.TgZ(8,"div",52)(9,"span",53),e._uU(10),e.qZA()()(),e.TgZ(11,"div",54)(12,"div",55)(13,"div",56)(14,"div",4),e._UZ(15,"div",57)(16,"div",57),e.TgZ(17,"div",58)(18,"h5",51),e._uU(19),e.qZA()(),e._UZ(20,"div",57)(21,"div",57),e.TgZ(22,"div",58),e._uU(23),e.qZA(),e.TgZ(24,"div",59),e._uU(25,"Scanned"),e.qZA(),e.TgZ(26,"div",57),e._uU(27,":"),e.qZA(),e.TgZ(28,"div",60),e._uU(29),e.qZA()()(),e.TgZ(30,"div",61)(31,"img",62),e.NdJ("error",function(){const i=e.CHM(t).$implicit,o=e.oxw(2);return e.KtG(o.onImgError(i))}),e.qZA()()()()()()()()()}if(2&s){const t=d.$implicit;e.xp6(7),e.hij(" ",t.ItemName," "),e.xp6(3),e.Oqu(t.BinLoc),e.xp6(9),e.Oqu(t.ItemNumber),e.xp6(4),e.Oqu(t.UPC),e.xp6(6),e.AsE("",t.ScannedQty,"/",t.InvQty,""),e.xp6(2),e.Q6J("src",t.ItemImage,e.LSH)}}const be=s=>({itemsPerPage:5,currentPage:s});function Ce(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"div",35)(3,"span",36),e._UZ(4,"i",37),e.qZA()(),e.TgZ(5,"input",38),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onpressentersku())})("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.ScanBarcode=n)}),e.qZA(),e.TgZ(6,"button",39),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onpressentersku())}),e._uU(7,"\xa0\xa0Enter"),e.qZA()(),e.TgZ(8,"div",40)(9,"div",41)(10,"div",42),e._uU(11),e.qZA(),e._UZ(12,"div",43),e.qZA()(),e.YNc(13,ye,32,7,"div",44),e.ALo(14,"paginate"),e.qZA()}if(2&s){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.ScanBarcode),e.xp6(6),e.hij("Total Quantity: ",t.totalScaned,""),e.xp6(2),e.Q6J("ngForOf",e.xi3(14,3,t.PullOut,e.VKq(6,be,t.p)))}}function xe(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",63)(1,"h3",64),e._uU(2,"Scan Bin Location"),e.qZA()(),e.TgZ(3,"div",65)(4,"div",66)(5,"div",34)(6,"input",67),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onDialogPressEnter())})("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.targetLocation=n)}),e.qZA()(),e.TgZ(7,"div",68)(8,"button",69),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onExecuteReturn())}),e._uU(9,"Transfer"),e.qZA(),e.TgZ(10,"button",70),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeModal())}),e._uU(11,"Cancel"),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.targetLocation)}}const Oe=s=>({show:s});function Ze(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",71)(1,"button",72),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),i=e.MAs(10);return e.KtG(n.onTransfer(i))}),e._UZ(2,"img",73),e.qZA()()}if(2&s){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,Oe,t.showSetting))}}function Pe(s,d){if(1&s&&(e.TgZ(0,"option",83),e._uU(1),e.qZA()),2&s){const t=d.$implicit;e.Q6J("value",t.Warehouse),e.xp6(1),e.AsE(" ",t.Warehouse," - ",t.WarehouseDescription," ")}}function Me(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",74)(1,"h5",51),e._uU(2,"STORE DESTINATION"),e.qZA(),e.TgZ(3,"div",75)(4,"a",76),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeModal())}),e._UZ(5,"i",77),e.qZA()()(),e.TgZ(6,"div",13)(7,"div",15),e._UZ(8,"div",19),e.TgZ(9,"div",19)(10,"select",78),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedWh=n)}),e.TgZ(11,"option",79),e._uU(12,"--Select Store---"),e.qZA(),e.YNc(13,Pe,2,3,"option",80),e.qZA()(),e.TgZ(14,"div",19)(15,"input",81),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.ETPRemarks=n)}),e.qZA()(),e._UZ(16,"div",19),e.TgZ(17,"button",82),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSaveReceived())}),e._uU(18,"Save"),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.selectedWh),e.xp6(3),e.Q6J("ngForOf",t.warehouses),e.xp6(2),e.Q6J("ngModel",t.ETPRemarks)}}function Te(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"button",89),e.NdJ("click",function(){const i=e.CHM(t).$implicit,o=e.oxw(2);return e.KtG(o.onSelectDO(i))}),e._uU(3,"Select"),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()}if(2&s){const t=d.$implicit;e.xp6(5),e.Oqu(t.OrderNumber),e.xp6(2),e.AsE("",t.ToWarehouse," - ",t.WarehouseName,""),e.xp6(2),e.Oqu(t.Remark)}}function Se(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",63)(1,"h5",64),e._uU(2,"List of created delivery"),e.qZA(),e.TgZ(3,"div",74)(4,"div",52)(5,"a",76),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.modalRef.close())}),e._UZ(6,"i",77),e.qZA()(),e.TgZ(7,"div",84)(8,"div",4)(9,"div",85)(10,"div",34)(11,"div",35)(12,"span",36),e._UZ(13,"i",86),e.qZA()(),e.TgZ(14,"input",87),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.searchTextDO=n)}),e.qZA()()()(),e.TgZ(15,"ng-scrollbar",88)(16,"table",27)(17,"tbody"),e.YNc(18,Te,10,4,"tr",28),e.ALo(19,"ETPDOSearchPipe"),e.qZA()()()()()()}if(2&s){const t=e.oxw();e.xp6(14),e.Q6J("ngModel",t.searchTextDO),e.xp6(4),e.Q6J("ngForOf",e.xi3(19,2,t.DOList,t.searchTextDO))}}function we(s,d){if(1&s&&(e.TgZ(0,"div",90)(1,"table",91)(2,"thead")(3,"tr")(4,"th",92),e._uU(5,"STOCK TRANSFER"),e.qZA()()(),e.TgZ(6,"tbody")(7,"tr")(8,"td"),e._uU(9,"TO"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA()(),e.TgZ(12,"tr")(13,"td"),e._uU(14,"FROM"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"td"),e._uU(19,"DO NUMBER"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()(),e.TgZ(22,"tr")(23,"td"),e._uU(24,"NO OF BOXES"),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()(),e.TgZ(27,"tr")(28,"td"),e._uU(29,"QUANTITY"),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA()(),e.TgZ(32,"tr")(33,"td"),e._uU(34,"PREPARED BY"),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.qZA()()()()()),2&s){const t=d.$implicit,r=e.oxw();e.xp6(11),e.Oqu(r.LblTransferTo),e.xp6(5),e.AsE("",r.LblTransferFrom," - ",r.LblTransferFromName,""),e.xp6(5),e.Oqu(r.LblDONumber),e.xp6(5),e.AsE("",t," of ",r.lblNoOfbox,""),e.xp6(5),e.Oqu(r.totalQuantity),e.xp6(5),e.Oqu(r.LblPreparedBy)}}function Ie(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",74)(1,"h5",51),e._uU(2,"Enter number of boxes"),e.qZA(),e.TgZ(3,"div",75)(4,"button",93),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.printDiv("printableTableDiv"))}),e._UZ(5,"i",30),e._uU(6,"\xa0\xa0Print"),e.qZA(),e.TgZ(7,"button",94),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeModal())}),e._UZ(8,"i",77),e._uU(9,"\xa0\xa0Cancel"),e.qZA()()(),e.TgZ(10,"div",65)(11,"div",34)(12,"div",35)(13,"span",36),e._UZ(14,"i",95),e.qZA()(),e.TgZ(15,"input",96),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.lblNoOfbox=n)}),e.qZA()(),e.TgZ(16,"div",34)(17,"div",35)(18,"span",36),e._UZ(19,"i",95),e.qZA()(),e.TgZ(20,"input",97),e.NdJ("ngModelChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.LblPreparedBy=n)}),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(15),e.Q6J("ngModel",t.lblNoOfbox),e.xp6(5),e.Q6J("ngModel",t.LblPreparedBy)}}const D=[{path:"createpick",component:pe,data:{breadcrumb:"Create Picklist"}},{path:"DispatchOrder",component:(()=>{class s{constructor(t,r,n,i){this.toastrService=r,this.apiservice=n,this.breakpointObserver=i,this.PicklistDetails=[],this.ImgStocks=[],this.OrderDetails=[],this.DOList=[],this.isMobile=!1,this.searchTextDO="",this.isNewItem=!1,this.ETPRemarks="",this.warehouseDest="",this.type="Detailslist",this.modalService=(0,e.f3M)(f.FF),this.rowData=[],this.PickList=[],this.scannedData="",this.totalScaned=0,this.barcodeData="",this.targetLocation="",this.MTLocation="",this.reqQuantity=0,this.PullOut=[],this.PullOutHeader=[],this.PullOutDetails=[],this.currentInventory=[],this.isEdit=!1,this.totalQuantity=0,this.LblDONumber="",this.LblTransferTo="",this.LblTransferFrom="",this.LblTransferFromName="",this.LblPreparedBy="",this.showSetting=!1,this.LineHeader={Warehouse:"",OrderStatus:"",OrderNumber:"",ToWarehouse:"",Remark:"",Location:"",InvoiceYear:""},t.backdrop="static",t.keyboard=!1,this.detectDeviceType(),this.imgUrl="assets/img/GTI.PNG"}handleKeyDown(t){("F12"===t.key||"Enter"===t.key)&&setTimeout(function(){$("#myInput").focus(),this.ScanBarcode=""},1e3)}trimIfTooLong(t){const r=t.toString();return r.length>12?r.slice(0,-1):r}handleKeyUp(t){if(("F12"===t.key||"Enter"===t.key)&&""!==this.ScanBarcode&&(t.preventDefault(),this.ScanBarcode=this.ScanBarcode.length>12?this.ScanBarcode.slice(0,12):this.ScanBarcode,"Detailslist"===this.type||"DetailsGrid"===this.type)){var r=this.MyInventoryDetails.filter(o=>o.BinLoc===this.ScanBarcode&&0!==o.InvQty);if(""!==this.currentBin&&0!==r.length)this.InventoryTransfer=r,this.onPlayScanned(),this.toastrService.success("Scan item now!"),this.currentBin=this.ScanBarcode,this.ScanBarcode="",this.barcodeData="",setTimeout(function(){$("#itemInput").focus(),this.ScanBarcode=""},1e3);else if(""==this.currentBin&&0!==r.length)this.InventoryTransfer=r,this.onPlayScanned(),this.toastrService.success("Scan item now!"),this.currentBin=this.ScanBarcode,this.ScanBarcode="",this.barcodeData="",setTimeout(function(){$("#itemInput").focus(),this.ScanBarcode=""},1e3);else if(""!==this.currentBin&&0==r.length){var n=this.InventoryTransfer.filter(o=>(o.UPC===this.ScanBarcode||o.ItemNumber===this.ScanBarcode)&&o.BinLoc===this.currentBin);if(0!==n.length){if(n[0].ScannedQty===n[0].InvQty)return this.onPlayError(),this.toastrService.error("Scanned quantity exceeds available quantity!"),this.ScanBarcode="",void(this.barcodeData="");n[0].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US")),this.InventoryTransfer=this.InventoryTransfer.slice().sort((o,c)=>c.timestamper-o.timestamper);var i=this.PullOut.filter(o=>(o.UPC===this.ScanBarcode||o.ItemNumber===this.ScanBarcode)&&o.BinLoc===this.currentBin);0!==i.length?(i[0].ScannedQty+=1,i[0].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US")),this.PullOut=this.PullOut.slice().sort((o,c)=>c.timestamper-o.timestamper)):this.PullOut.push({BinLoc:n[0].BinLoc,ItemImage:n[0].ItemImage,ItemName:n[0].ItemName,ItemNumber:n[0].ItemNumber,UoM:n[0].UoM,ScannedQty:1,InvQty:n[0].InvQty,UPC:n[0].UPC,timestamper:n[0].timestamper}),this.totalScaned=this.ScannedSum(),this.onPlayScanned(),this.toastrService.success(this.ScanBarcode),this.ScanBarcode="",this.barcodeData=""}else this.onPlayError(),this.toastrService.error("Item not found in location!!"),this.ScanBarcode="",this.barcodeData="",setTimeout(function(){$("#itemInput").focus(),this.ScanBarcode=""},1e3)}else this.currentBin="",this.onPlayError(),this.toastrService.error("invalid location!"),this.ScanBarcode="",this.barcodeData=""}}onPlayScanned(){let t=new Audio;t.src="../assets/ringtone/barcode_beep_sound.mp3",t.load(),t.play()}onPlayError(){let t=new Audio;t.src="../assets/ringtone/cursor_error.mp3",t.load(),t.play()}onpressentersku(){var t=this;return(0,a.Z)(function*(){if(t.ScanBarcode=t.ScanBarcode.length>12?t.ScanBarcode.slice(0,12):t.ScanBarcode,"Detailslist"===t.type||"DetailsGrid"===t.type){var r=t.MyInventoryDetails.filter(o=>o.BinLoc===t.ScanBarcode&&0!==o.InvQty);if(""!==t.currentBin&&0!==r.length)t.InventoryTransfer=r,t.toastrService.success("Scan item now!"),t.currentBin=t.ScanBarcode;else if(""==t.currentBin&&0!==r.length)t.InventoryTransfer=r,t.toastrService.success("Scan item now!"),t.currentBin=t.ScanBarcode;else if(""!==t.currentBin&&0==r.length){var n=t.InventoryTransfer.filter(o=>(o.UPC===t.ScanBarcode||o.ItemNumber===t.ScanBarcode)&&o.BinLoc===t.currentBin);if(0!==n.length)if(n[0].ScannedQty===n[0].InvQty)t.apiservice.AlertTwo("error","ERROR","Scanned quantity exceeds available quantity!");else{n[0].ScannedQty+=1,n[0].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US")),t.InventoryTransfer=t.InventoryTransfer.slice().sort((o,c)=>c.timestamper-o.timestamper);var i=t.PullOut.filter(o=>(o.UPC===t.ScanBarcode||o.ItemNumber===t.ScanBarcode)&&o.BinLoc===t.currentBin);0!==i.length?(i[0].ScannedQty+=1,i[0].timestamper=parseInt((0,h.p6)(new Date,"HHmmss","en-US")),t.PullOut=t.PullOut.slice().sort((o,c)=>c.timestamper-o.timestamper)):t.PullOut.push({BinLoc:n[0].BinLoc,ItemImage:n[0].ItemImage,ItemName:n[0].ItemName,ItemNumber:n[0].ItemNumber,ScannedQty:1,UoM:n[0].UoM,InvQty:n[0].InvQty,UPC:n[0].UPC,timestamper:n[0].timestamper}),t.totalScaned=t.ScannedSum(),console.log(t.PullOut)}else t.apiservice.AlertTwo("error","ERROR","Item not found in location!")}else t.currentBin="",t.apiservice.AlertTwo("error","Error","invalid location!");t.ScanBarcode=""}})()}getInventory(t){var r=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){yield r.apiservice.getDataMethod("&querytag=getInventoryItem&value1="+t+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){var u=0,p=r.PicklistDetails.filter(v=>v.ItemNumber===t||v.UPC===t);0!==p.length&&(u=p[0].Quantity),r.InventoryDetails=l,0!==l.length?(r.ItemCode=l[0].ItemNumber,r.reqItemName=l[0].ItemName,r.reqItemBarcode=l[0].UPC,r.reqItemBrand=l[0].Brand,r.reqItemBal=parseInt(l[0].InvQty)-u,i()):(r.ScanBarcode="",r.barcodeData="",console.log("reject"),o())});return function(l){return c.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())})()}getSKU(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getDataMethod("&querytag=getInventoryItemLike&value1="+t.reqItemName+"&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.SKUs=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}getIMG(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){let o=t.ItemCode.split("-"),c="";1==o.length||2==o.length?c=o[0]:3==o.length?c=o[0]+"-"+o[1]:4==o.length&&(c=o[0]+"-"+o[1]+"-"+o[2]),yield t.apiservice.getItemImg(c).subscribe(function(){var l=(0,a.Z)(function*(u){t.ImgStocks=u,n()});return function(u){return l.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}detectDeviceType(){this.breakpointObserver.observe([y.u3.Handset,y.u3.Tablet]).subscribe(t=>{this.isMobile=t.matches,this.type=this.isMobile?"DetailsGrid":"Detailslist"})}onDialogPressEnter(){"Detailslist"===this.type&&!0===this.isPutawayLoc&&(0!==this.Bins.filter(r=>r.BinName===this.targetLocation).length?(this.isReady=!0,this.toastrService.success("Please proceed on putaway!")):(this.isReady=!1,this.toastrService.error("Please scan/enter bin location!"),this.ScanBarcode=""))}spinnermsg(t,r,n){g().fire({position:"center",icon:t,title:r,text:n,allowOutsideClick:!0,showConfirmButton:!1,timer:2500,willClose:()=>{this.apiservice.closeBusyLoading()}})}ngOnInit(){this.detectDeviceType(),this.isEdit=!1,this.totalQuantity=0,this.PullOut=[],this.isPutawayLoc=!1,this.currentBin="",this.isReady=!1,this.rowData=[],this.selectedWh="",this.InventoryTransfer=[],this.selectedWh="0",this.seriesNumber="",this.ETPRemarks="",this.SubjectRef="",this.ScanBarcode="",this.totalScaned=0,this.LineHeader={Warehouse:"",OrderStatus:"",OrderNumber:"",ToWarehouse:"",Remark:"",Location:"",InvoiceYear:""},this.LblTransferFrom=localStorage.getItem("whseNo"),this.LblTransferFromName=localStorage.getItem("whseName"),this.onLoadData(),setTimeout(function(){$("#itemInput").focus()},1e3)}getWarehouses(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getDataMethod("&querytag=GetWarehouse&value1=&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.warehouses=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}GetTransactNumber(){var t=this;return new Promise(r=>setTimeout((0,a.Z)(function*(){t.apiservice.getDataMethod("&querytag=getSeries&value1=0&value2=&value3=&value4=").subscribe(function(){var n=(0,a.Z)(function*(i){t.transNumber="OUT"+t.apiservice.onNumberSeries(i[0].NumberUsed+=1,9)});return function(i){return n.apply(this,arguments)}}()),t.apiservice.UpdateSeries().subscribe(function(){var n=(0,a.Z)(function*(i){});return function(i){return n.apply(this,arguments)}}()),r()}),200))}editQtyFunc(t){var n,r=this;"Admin"==localStorage.getItem("UserType")?(t.ScannedQty<t.InvQty?t.ScannedQty=parseInt(t.ScannedQty)+1:t.ScannedQty==t.InvQty&&(t.ScannedQty=0),this.totalScaned=this.ScannedSum()):(this.editableQty=t.ScannedQty,this.editableRow=this.PullOut.indexOf(t),g().fire({title:"UPDATE QUANTITY",input:"number",inputValue:this.editableQty,focusConfirm:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Update",showLoaderOnConfirm:!0,allowOutsideClick:!1,preConfirm:(n=(0,a.Z)(function*(i){""==i||parseInt(i)<0?g().showValidationMessage("Please enter valid quantity!"):i!=r.editableQty?parseInt(i)>parseInt(t.InvQty)&&g().showValidationMessage("Putaway quantity exceeds open quantity!"):g().showValidationMessage("Please change the quantity!")}),function(o){return n.apply(this,arguments)})}).then(n=>{n.isConfirmed&&(this.PullOut[this.editableRow].ScannedQty=parseInt(n.value),this.totalScaned=this.ScannedSum(),setTimeout(function(){$("#itemInput").focus()},1e3)),setTimeout(function(){$("#itemInput").focus()},1e3)}))}busyLoadingPick(){return new Promise((t,r)=>{g().fire({title:"Please wait",html:"Creating Picklist..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{g().showLoading(),t()}})})}closeBusyLoadingPick(){g().close()}onLoadData(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.getAllInventory()})).then((0,a.Z)(function*(){return yield t.getWarehouses()})).then((0,a.Z)(function*(){return yield t.getPullOutHead()})).then((0,a.Z)(function*(){return yield t.getBin()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(r=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onLoadData2(){var t=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.getAllInventory()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).catch(r=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}openModal(t){0!==this.InventoryTransfer.length?(this.apiservice.closeBusyLoading(),this.barcodeData="",this.ScanBarcode="",this.modalRef=this.modalService.open(t,{container:".app"})):this.apiservice.AlertTwo("error","ERROR","Please scan item first!")}onShowFind(t){var r=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield r.getPullOutHead()})).then((0,a.Z)(function*(){return yield r.onOpenModalPO(t)})).then((0,a.Z)(function*(){return yield r.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onOpenModalPO(t){var r=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(i,o){r.modalRef=r.modalService.open(t,{size:"xl"}),i()});return function(i,o){return n.apply(this,arguments)}}())})()}onSelectDO(t){var r=this;this.modalRef.close(),this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield r.onPutHeaderData(t)})).then((0,a.Z)(function*(){return yield r.DispatchOrderLineGet()})).then((0,a.Z)(function*(){return yield r.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onPutHeaderData(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){r.LineHeader={Warehouse:t.Warehouse+" - "+t.SourceHouse,OrderStatus:t.OrderStatus,OrderNumber:t.OrderNumber,ToWarehouse:t.ToWarehouse+" - "+t.WarehouseName,Remark:t.Remark,Location:t.Location,InvoiceYear:t.InvoiceYear},i()});return function(i,o){return n.apply(this,arguments)}}())}DispatchOrderLineGet(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getInventory("&querytag=DOLineApproved&value1="+t.LineHeader.OrderNumber+"&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.PicklistDetails=c,t.totalQuantity=t.ScannedView(),n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}showEditModal(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){0!==r.InventoryDetails.length&&(r.apiservice.closeBusyLoading(),r.modalRef=r.modalService.open(t,{size:"sm"})),i()});return function(i,o){return n.apply(this,arguments)}}())}onEditModal(t,r){var n=this;return new Promise(function(){var i=(0,a.Z)(function*(o,c){n.SKUs=[],n.isEdit=!0,n.editableRow=n.PicklistDetails.indexOf(r),n.reqQuantity=n.PicklistDetails[n.editableRow].ReqQty,n.ItemCode=n.PicklistDetails[n.editableRow].ItemNumber,n.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.apiservice.busyLoading()})).then((0,a.Z)(function*(){return yield n.getInventory(n.ItemCode)})).then((0,a.Z)(function*(){return yield n.getIMG()})).catch(l=>n.spinnermsg("error","ERROR","Invalid item!"))});return function(o,c){return i.apply(this,arguments)}}())}onRemoveReqLine(t){this.editableRow=this.InventoryTransfer.indexOf(t),g().fire({title:"Are you sure?",text:"You want to remove this item?",icon:"question",showCancelButton:!0,allowOutsideClick:!1,cancelButtonText:"No",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(r=>{r.isConfirmed&&this.InventoryTransfer.splice(this.editableRow,1)})}closeModal(){this.modalRef.close(),this.editableRow=0,this.isPutawayLoc=!1,this.isReady=!1,this.InventoryDetails=[],this.SKUs=[],this.ItemCode="",this.reqItemName="",this.reqItemBarcode="",this.reqQuantity=0,this.ImgStocks=[],this.isEdit=!1}getAllInventory(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getInventory("&querytag=getPerBinLoc&value1=&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.MyInventoryDetails=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}getPullOutHead(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getInventory("&querytag=DOHeadApproved&value1="+localStorage.getItem("whseNo")+"&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.DOList=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}getBin(){var t=this;return(0,a.Z)(function*(){return new Promise(function(){var r=(0,a.Z)(function*(n,i){yield t.apiservice.getBins("&querytag=getAllBin&value1=&value2=&value3=&value4=").subscribe(function(){var o=(0,a.Z)(function*(c){t.Bins=c,n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())})()}Putaway(){var t=this,r=this.Bins.filter(n=>n.BinName===this.targetLocation.trim());this.isReady=0!==r.length,!0===this.isReady?this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield t.UpdateLocation()})).then((0,a.Z)(function*(){return yield t.apiservice.closeBusyLoading()})).then((0,a.Z)(function*(){return yield t.SuccessAlert1("success","SUCCESS","")})).catch(n=>console.log("error","Inserting Data","Error while loading the data!")):this.toastrService.error("Please scan/enter bin location!")}UpdateLocation(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.InventoryTransfer.forEach(o=>{t.loadInventory(o.ItemNumber,o.BinLocation).catch(c=>console.log("error","Inserting Data","Error while loading the data!"))}),t.closeModal(),n()});return function(n,i){return r.apply(this,arguments)}}())}SuccessAlert1(t,r,n){g().fire({position:"center",icon:t,title:r,text:n,allowOutsideClick:!0,showConfirmButton:!1,timer:2500,willClose:()=>{this.InventoryTransfer=[]}})}loadInventory(t,r){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var i=(0,a.Z)(function*(o,c){yield n.apiservice.getDataMethod("&querytag=getInventoryTrans&value1="+t+"&value2="+r+"&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(u){n.currentInventory=u,o()});return function(u){return l.apply(this,arguments)}}())});return function(o,c){return i.apply(this,arguments)}}())})()}InsertTransaction(t,r,n,i,o,c,l){var u=this;return new Promise(function(){var p=(0,a.Z)(function*(v,b){u.isNewItem=!1,u.apiservice.modDataOnly("&querytag=InsertTransaction6&value1="+u.transNumber+"&value2="+c+"&value3="+t+"&value4="+r+"&value5="+n+"&value6="+i+"&value7="+o+"&value8="+l+"&value9="+localStorage.getItem("User")+"&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(Z=>{v()})});return function(v,b){return p.apply(this,arguments)}}())}onTransfer(t){0!==this.PullOut.length?g().fire({title:"Are you sure?",text:"You want to pullout this item?",icon:"question",showCancelButton:!0,allowOutsideClick:!1,cancelButtonText:"No",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(r=>{r.isConfirmed&&(this.modalRef=this.modalService.open(t,{container:".app"}))}):this.apiservice.AlertTwo("error","ERROR","Please scan item first!")}onSaveReceived(){var t=this;return(0,a.Z)(function*(){t.modalRef.close(),yield t.CreateTransferList(),t.onDoneReturn()})()}onExecuteReturn(){0!==this.Bins.filter(r=>r.BinName===this.targetLocation).length||(this.isReady=!1,this.toastrService.error("Please scan/enter valid bin location!"),this.targetLocation="")}formatDatePost(){const t=new Date,r=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getFullYear().toString(),o=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),l=t.getSeconds().toString().padStart(2,"0");return`${n}${r}${i.slice(-2)}${o}${c}${l}`}CreateTransferList(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.apiservice.postDataGTI(t.PullOut,"DispatchOrder?transno="+t.formatDatePost()+"&createdby="+localStorage.getItem("User")+"&Whouse="+localStorage.getItem("whseNo")+"&DestinationWH="+t.selectedWh+"&doremarks="+t.ETPRemarks).subscribe(o=>{}),n()});return function(n,i){return r.apply(this,arguments)}}())}onImgError(t){t.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",t.ImageStatus="None"}InsertPullOutHead(){var t=this;return new Promise(function(){var r=(0,a.Z)(function*(n,i){t.apiservice.modDataOnly("&querytag=InsertPutoutHead&value1="+t.transNumber+"&value2="+localStorage.getItem("User")+"&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var o=(0,a.Z)(function*(c){n()});return function(c){return o.apply(this,arguments)}}())});return function(n,i){return r.apply(this,arguments)}}())}InsertPullOutDetails(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){r.apiservice.modDataOnly("&querytag=InsertPutoutDetails&value1="+r.transNumber+"&value2="+t.BinLoc+"&value3="+t.ItemNumber+"&value4="+t.ScannedQty+"&value5="+localStorage.getItem("User")+"&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var c=(0,a.Z)(function*(l){i()});return function(l){return c.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())}UpdateCurrentLine(t,r,n){var i=this;return new Promise(function(){var o=(0,a.Z)(function*(c,l){i.apiservice.modDataOnly("&querytag=UpdateInventoryTransfer&value1="+r+"&value2="+n+"&value3="+t+"&value4=0&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var u=(0,a.Z)(function*(p){c()});return function(p){return u.apply(this,arguments)}}())});return function(c,l){return o.apply(this,arguments)}}())}busyLoadingTransfer(){return new Promise((t,r)=>{g().fire({title:"Please wait",html:"",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{g().showLoading(),t()}})})}closeBusyLoadingTransfer(){return new Promise(t=>setTimeout(()=>{g().close(),t()},200))}onDoneReturn(){return new Promise((t,r)=>{g().fire({position:"center",icon:"success",title:"",text:"Created Successfully!",allowOutsideClick:!1,showConfirmButton:!0,confirmButtonText:"OK",willClose:()=>{this.isPutawayLoc=!1,this.InventoryTransfer=[],this.PullOut=[],this.totalScaned=0,this.onLoadData2(),setTimeout(function(){$("#itemInput").focus()},500),t()}})})}GetSeriesNumber(){var t=this;return new Promise(r=>setTimeout((0,a.Z)(function*(){t.apiservice.getDataMethod("&querytag=getSeries&value1=0&value2=&value3=&value4=").subscribe(function(){var n=(0,a.Z)(function*(i){t.seriesNumber="OUT"+t.apiservice.onNumberSeries(i[0].NumberUsed+=1,9),r()});return function(i){return n.apply(this,arguments)}}())}),200))}ScannedSum(){return this.PullOut.reduce((t,r)=>t+r.ScannedQty,0)}ScannedView(){return this.PicklistDetails.reduce((t,r)=>t+r.DispatchedQuantity,0)}onExport(t){var r=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield r.UpdatePullOut(t)})).then((0,a.Z)(function*(){return yield r.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}downloadTable(t){let r=this.PullOutDetails.map(c=>`${c.User}\t${c.ItemNumber}\t${c.TotalQty}`).join("\n");const n=new Blob([r],{type:"text/plain"}),i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=t.OrderNumber+".txt",o.click(),window.URL.revokeObjectURL(i)}downloadTableAsText(t){const n=this.PullOutDetails.map(c=>Object.values(c).join("\t")).join("\n"),i=new Blob([n],{type:"text/plain"}),o=document.createElement("a");o.href=window.URL.createObjectURL(i),document.body.appendChild(o),o.click(),document.body.removeChild(o)}UpdatePullOut(t){var r=this;return new Promise(function(){var n=(0,a.Z)(function*(i,o){r.apiservice.modDataOnly("&querytag=UpdatePulloutHeader&value1="+t.OrderNumber+"&value2="+localStorage.getItem("User")+"&value3=&value4=&value5=&value6=&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(function(){var c=(0,a.Z)(function*(l){i()});return function(l){return c.apply(this,arguments)}}())});return function(i,o){return n.apply(this,arguments)}}())}DOLineInsert(t,r,n,i,o){var c=this;return new Promise(l=>setTimeout((0,a.Z)(function*(){const u=new Date;var p="exec ETPStoreV55..DOLineInsert 100,N'"+localStorage.getItem("whseNo")+c.NumberSeriesRSFMiscellaneous+"',"+n+",0,N'"+localStorage.getItem("whseNo")+"',N'"+c.selectedWh+"',N'"+t+"',N'"+r+"',"+c.formatDate(new Date)+","+c.formatDate(new Date)+","+c.formatDate(new Date)+","+c.formatDate(new Date)+",N'L1 ',N'',0,N'2',N'L1 ',"+i+",0,"+i+",0,0,0,0,N'"+o+"',N'',N'',N'',0,0,N'SUPERADMIN',"+u.getFullYear()+",0,N'',N'',0,"+c.StockTransferNumber;p.replace(/%20/g," ").replace(/%27/g,"'"),yield c.apiservice.QuerySender("&value1="+p).subscribe(function(){var v=(0,a.Z)(function*(b){l()});return function(b){return v.apply(this,arguments)}}())}),200))}formatDate(t){return`${t.getFullYear()}${this.padZero(t.getMonth()+1)}${this.padZero(t.getDate())}`}padZero(t){return t<10?`0${t}`:`${t}`}getCurrentTime(){const t=new Date;return`${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}`}DOHeadInsert(){var t=this;return new Promise(r=>setTimeout((0,a.Z)(function*(){var n=t.PicklistDetails.filter(c=>c.ScannedQty>0);const i=new Date;var o="exec ETPStoreV55..DOHeadInsert 100,N'"+localStorage.getItem("whseNo")+t.NumberSeriesRSFMiscellaneous+"',N'TO',N'101',0,N'',0,N'SUPERADMIN',N'SUPERADMIN',1,1,"+t.formatDate(new Date)+","+t.getCurrentTime()+",0,0,N'L1',N'',N'"+t.selectedWh+"',N'"+t.ETPRemarks+"',N'"+localStorage.getItem("whseNo")+"',"+n.length+",N'',N'',N'',0,N'SUPERADMIN',"+i.getFullYear()+",N'',N'',N'',N'',1,N'',"+t.StockTransferNumber;o.replace(/%20/g," ").replace(/%27/g,"'"),yield t.apiservice.QuerySender("&value1="+o).subscribe(function(){var c=(0,a.Z)(function*(l){r()});return function(l){return c.apply(this,arguments)}}())}),200))}getLastIdInLedger(){var t=this;return new Promise(r=>setTimeout((0,a.Z)(function*(){t.apiservice.getDataMethod("&querytag=ETPDOHeadId&value1=0&value2=&value3=&value4=").subscribe(function(){var n=(0,a.Z)(function*(i){0!==i.length&&(t.StockTransferNumber=i[0].maxid),r()});return function(i){return n.apply(this,arguments)}}())}),200))}getNumberSeriesRSFMiscellaneous(){var t=this;return new Promise(r=>setTimeout((0,a.Z)(function*(){var n="exec ETPStoreV55..NumberSeriesRSFMiscellaneous 100,N'"+localStorage.getItem("whseNo")+"',N'8',N'O',"+t.formatDate(new Date);n.replace(/%20/g," ").replace(/%27/g,"'"),yield t.apiservice.QuerySender("&value1="+n).subscribe(function(){var i=(0,a.Z)(function*(o){0!==o.length&&(t.NumberSeriesRSFMiscellaneous=yield o[0].LastNumberUsed),r()});return function(o){return i.apply(this,arguments)}}())}),200))}getDisctint(){var t=this;return new Promise(r=>setTimeout((0,a.Z)(function*(){const n=t.PullOut.reduce((i,o)=>{const c=i.find(l=>l.ItemNumber===o.ItemNumber);return c?c.ScannedQty+=o.ScannedQty:i.push({ItemNumber:o.ItemNumber,ItemName:o.ItemName,UoM:o.UoM,ScannedQty:o.ScannedQty}),i},[]);console.log(n);for(let i=0;i<n.length;i++)yield Promise.all([yield t.DOLineInsert(n[i].ItemNumber,n[i].ItemName,i+1,n[i].ScannedQty,n[i].UoM)]);yield Promise.all([yield t.closeBusyLoadingTransfer(),yield t.onDoneReturn(),r()])}),200))}onpressPrint(t,r){this.lblNoOfbox=0,this.LblDONumber=r.OrderNumber,this.LblTransferTo=r.ToWarehouse,this.LblPreparedBy="",this.modalRef=this.modalService.open(t,{windowClass:"dark-modal"})}createArray(t){return Array(t+1).fill(0).map((r,n)=>n)}printDiv(t){if(0===this.lblNoOfbox||""===this.lblNoOfbox)return void this.toastrService.error("Please enter valid box number!");if(""===this.LblPreparedBy)return void this.toastrService.error("Please enter user!");var r=[];r=this.createArray(this.lblNoOfbox),this.LblBox=r.filter(i=>0!==i);const n=document.getElementById(t);setTimeout(()=>{if(n){const i=window.open("","","height=600,width=800");i?(i.document.write("<html><head><title>Print Label</title>"),i.document.write("<style>"),i.document.write(".bordered-table { width: 100%; border-collapse: collapse; }"),i.document.write(".bordered-table th, .bordered-table td { border: 1px solid #000; padding: 8px; }"),i.document.write(".bordered-table th { background-color: #f2f2f2; }"),i.document.write("</style>"),i.document.write(n.innerHTML),i.document.write("</body></html>"),i.document.close(),i.print(),i.close()):console.error("Failed to open print window")}else console.error(`Element with ID ${t} not found`)},500)}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(f.NM),e.Y36(S._W),e.Y36(_e),e.Y36(y.Yg))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-delivery"]],hostBindings:function(r,n){1&r&&e.NdJ("keydown",function(o){return n.handleKeyDown(o)},!1,e.Jf7)("keyup",function(o){return n.handleKeyUp(o)},!1,e.Jf7)},decls:17,vars:6,consts:[["class","row",4,"ngIf"],["class","col-lg-3 mt-0 col-md-5",4,"ngIf"],["PutawayStocks",""],["class","settings1",3,"ngClass",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["DestinationStore",""],["DOListView",""],["id","printableTableDiv",1,"printable-div"],["style","float:left;width: 50%;","class","col-lg-6 mb-2",4,"ngFor","ngForOf"],["NumberOfBoxTemp",""],[1,"col-lg-12","mb-2"],["class","btn btn-gray",3,"click",4,"ngIf"],["widget","",1,"card","border-0","box-shadow"],[1,"card-body","ml-4","widget-body"],[1,"row","justify-content-between"],[1,"col-sm-3"],[1,"form-group"],[1,"input-group-append"],["readonly","","type","text","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text",3,"click"],["type","text","readonly","","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-weight","bold"],[1,"ml-2",2,"font-weight","bold"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-gray",3,"click"],[1,"fa","fa-print"],[1,"align-middle"],[1,"align-middle","text-truncate"],[1,"col-lg-3","mt-0","col-md-5"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-qrcode"],["id","itemInput","type","text","placeholder","Enter barcode here...",1,"form-control","border-0",3,"ngModel","keyup.enter","ngModelChange"],[1,"input-group-text","border-top-0","border-right-0","border-bottom-0",3,"click"],[1,"card","border-0","box-shadow","ml-2","mb-4"],[1,"d-flex","justify-content-between","mb-4"],[1,"p-6","ml-2","mt-2",2,"font-weight","bold"],[1,"p-6","mr-4",2,"font-weight","bold"],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip",3,"click"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"widget-controls"],[1,"badge","badge-warning","mr-1"],[1,"card-body"],[1,"media"],[1,"media-body","ml-4"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-10","pl-2","text-left","text-truncate"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"d-flex","flex-column","justify-content-center"],["width","70",1,"rounded",3,"src","error"],[1,"modal-header-own"],["id","modal-basic-title",1,"modal-title",2,"color","black","margin-top","18px","margin-left","16px"],[1,"modal-body"],[1,"container","mb-3","mt-3"],["id","myInput","type","text","placeholder","Scan bin barcode...",1,"form-control","border-0",3,"ngModel","keyup.enter","ngModelChange"],[1,"button-container"],["type","button",1,"btn","btn-success","mr-1",3,"click"],["type","button",1,"btn","btn-danger","mr-1",3,"click"],[1,"settings1",3,"ngClass"],[1,"btn","btn-success","btn-rounded",3,"click"],["src","assets/img/forklipter.png"],[1,"card-header","transparent","border-0","text-muted"],[1,"widget-controls","mr-2","mt-1"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],["name","selectedWh",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Remarks",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-success","pull-right",3,"click"],[3,"value"],[1,"bg-white","box-shadow","mt-4","mr-1","ml-1"],[1,"col"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],["pointerEventsMethod","scrollbar",2,"height","450px"],[1,"btn","btn-outline-info","w-100p","mb-1","mr-1",3,"click"],[1,"col-lg-6","mb-2",2,"float","left","width","50%"],[1,"bordered-table"],["colspan","2"],[1,"btn","btn-success","mr-2","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-hashtag"],["type","number","name","lblNoOfbox",1,"form-control","border-1",3,"ngModel","ngModelChange"],["type","text","name","LblPreparedBy",1,"form-control","border-1",3,"ngModel","ngModelChange"]],template:function(r,n){1&r&&(e.YNc(0,fe,67,9,"div",0)(1,Ce,15,8,"div",1)(2,xe,12,1,"ng-template",null,2,e.W1O)(4,Ze,3,3,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"pagination-controls",7),e.NdJ("pageChange",function(o){return n.p=o}),e.qZA()()()(),e.YNc(9,Me,19,3,"ng-template",null,8,e.W1O)(11,Se,20,5,"ng-template",null,9,e.W1O),e.TgZ(13,"div",10),e.YNc(14,we,37,8,"div",11),e.qZA(),e.YNc(15,Ie,21,2,"ng-template",null,12,e.W1O)),2&r&&(e.Q6J("ngIf","Detailslist"==n.type&&!n.isMobile),e.xp6(1),e.Q6J("ngIf","DetailsGrid"==n.type&&n.isMobile),e.xp6(3),e.Q6J("ngIf","DetailsGrid"==n.type),e.xp6(4),e.Q6J("autoHide",!0)("maxSize",3),e.xp6(6),e.Q6J("ngForOf",n.LblBox))},dependencies:[h.mk,h.sg,h.O5,I.KC,m.YN,m.Kr,m.Fj,m.wV,m.EJ,m.JJ,m.On,C.LS,he,C._s],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.app.dark[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:#fff!important}.app.combined[_ngcontent-%COMP%]   .bg-gray[_ngcontent-%COMP%]{background-color:#bcbfc5!important}.modal-body[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;padding:.5rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:.5;color:#fff}.all-caps-input[_ngcontent-%COMP%]{text-transform:uppercase}.container[_ngcontent-%COMP%]{position:relative}.button-container[_ngcontent-%COMP%]{top:10px;margin:10px}.mb-4[_ngcontent-%COMP%], .my-4[_ngcontent-%COMP%]{margin-bottom:.5rem!important}.app.light[_ngcontent-%COMP%]   .widget-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a6a6a6}.file-upload[_ngcontent-%COMP%]   .file-upload-btn[_ngcontent-%COMP%]{position:absolute;width:100%;height:35px;z-index:9;opacity:0}.file-upload[_ngcontent-%COMP%]   .delete-file[_ngcontent-%COMP%]{position:absolute;right:50px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:99;visibility:hidden}.file-upload[_ngcontent-%COMP%]:hover   .delete-file[_ngcontent-%COMP%]{visibility:visible}.widget-controls[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;right:0;padding:.3rem .5rem;font-size:14px}.image-container[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;margin:0 auto}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{display:inline-block;width:20px;height:33px;background:50%/100% 100% no-repeat}.carousel-indicators[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#363333;background-clip:padding-box;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;z-index:1;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#080808;text-align:center;background:rgba(8,8,8,.2588235294);border:0;opacity:.5;transition:opacity .15s ease}.list-group-item[_ngcontent-%COMP%]{position:relative;display:block;padding:.55rem .25rem;background-color:#fff;border:1px solid rgba(0,0,0,.125)}.card-body-dialog[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:.5rem}.form-control-dig-Inp[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#e6f39c;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control-dialog[_ngcontent-%COMP%]{width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ffffff;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.large-Checkbox[_ngcontent-%COMP%]{transform:scale(1.5)}.settings1[_ngcontent-%COMP%]{position:fixed;top:80px;right:-337px;z-index:1018;width:340px;transition:all .2s}.settings1.show[_ngcontent-%COMP%]{right:-1px}.settings1[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;left:-58px;padding:7px 12px 7px 10px;z-index:99;bottom:-27rem!important;cursor:pointer}.settings1[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:none}.pull-right[_ngcontent-%COMP%]{float:right;font-size:x-small}.settings[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .settings[_ngcontent-ng-c2474966957][_ngcontent-%COMP%]   .btn[_ngcontent-ng-c2474966957][_ngcontent-%COMP%]{position:absolute;left:-53px;padding:7px 12px 7px 10px;z-index:99;background:#9fc6a1;border-color:#00000020;border-style:solid;border-width:1px 0px 1px 1px;border-radius:4px 0 0 4px;cursor:pointer;bottom:3rem!important}.settings1[_ngcontent-ng-c1036323809][_ngcontent-%COMP%]   .btn[_ngcontent-ng-c1036323809][_ngcontent-%COMP%]{position:absolute;left:-53px;padding:7px 12px 7px 10px;z-index:99;bottom:-4.5rem!important;cursor:pointer}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:3px;padding-left:2px}.printable-div[_ngcontent-%COMP%]{display:none}@media print{.printable-div[_ngcontent-%COMP%]{display:block}.bordered-table[_ngcontent-%COMP%]{width:50%;height:50%;overflow:hidden;page-break-inside:avoid;border-collapse:collapse}.bordered-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bordered-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000;padding:8px}.bordered-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}}"]})}return s})(),data:{breadcrumb:"Dispatched Order"}}];let De=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275mod=e.oAB({type:s});static#n=this.\u0275inj=e.cJS({imports:[h.ez,k.Bz.forChild(D),N.D,I.kb,x.JF,m.u5,m.UX,f.IJ,A.Hv,C.JX]})}return s})()}}]);