"use strict";(self.webpackChunkstartng=self.webpackChunkstartng||[]).push([[907],{2907:(Je,U,f)=>{f.r(U),f.d(U,{InventoryReportsModule:()=>Be,routes:()=>B});var m=f(6814),Z=f(9862),J=f(2787),g=f(6223),p=f(5979),I=f(3154),M=f(6472),E=f(8101),a=f(5861),h=f(1088),H=f(3519),u=f.n(H),v=f(1486),t=f(9212),x=f(2425);let R=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var y=f(3362),P=f(2107);const G=["ParamForms"];function j(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel())}),t._UZ(1,"i",24),t._uU(2,"\xa0\xa0export"),t.qZA()}}function Y(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onExecuteAlloc())}),t._UZ(1,"i",26),t._uU(2,"\xa0\xa0"),t.qZA()}}function K(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onExecuteEmptyBin())}),t._UZ(1,"i",27),t._uU(2,"\xa0\xa0"),t.qZA()}}function W(r,s){if(1&r&&(t.TgZ(0,"span",39),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function z(r,s){if(1&r&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function V(r,s){if(1&r&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function X(r,s){if(1&r&&(t.TgZ(0,"span",48),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function tt(r,s){if(1&r&&(t.TgZ(0,"span",49),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function et(r,s){if(1&r&&(t.TgZ(0,"span",50),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function nt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td",35),t.TgZ(2,"td",35)(3,"img",36),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(4,"td",37),t._uU(5),t.qZA(),t.TgZ(6,"td",37),t._uU(7),t.qZA(),t.TgZ(8,"td",37),t._uU(9),t.qZA(),t.TgZ(10,"td",37),t._uU(11),t.qZA(),t.TgZ(12,"td",37),t._uU(13),t.qZA(),t._UZ(14,"td",35),t.TgZ(15,"td",37),t._uU(16),t.qZA(),t.TgZ(17,"td",38),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2),l=t.MAs(28);return t.KtG(c.onViewIncludedRequest(i,l))}),t._uU(18),t.qZA(),t.TgZ(19,"td",37),t._uU(20),t.qZA(),t.TgZ(21,"td",37)(22,"span",39),t._uU(23),t.qZA()(),t.TgZ(24,"td",37),t.YNc(25,W,2,1,"span",40)(26,z,2,1,"span",41)(27,V,2,1,"span",42)(28,X,2,1,"span",43)(29,tt,2,1,"span",44)(30,et,2,1,"span",45),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(3),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(2),t.Oqu(e.BinLoc),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.UPC),t.xp6(2),t.Oqu(e.Brand),t.xp6(3),t.Oqu(e.InvQty),t.xp6(2),t.Oqu(e.AllocQty),t.xp6(2),t.Oqu(e.TotalQty),t.xp6(3),t.Oqu(e.FloorAssignment),t.xp6(2),t.Q6J("ngIf",10==e.FreeField1),t.xp6(1),t.Q6J("ngIf",20==e.FreeField1),t.xp6(1),t.Q6J("ngIf",30==e.FreeField1),t.xp6(1),t.Q6J("ngIf",40==e.FreeField1),t.xp6(1),t.Q6J("ngIf",50==e.FreeField1),t.xp6(1),t.Q6J("ngIf",70==e.FreeField1)}}const N=r=>({itemsPerPage:100,currentPage:r});function ot(r,s){if(1&r&&(t.TgZ(0,"div",16)(1,"div",17)(2,"div",28)(3,"div",29)(4,"div",30)(5,"div",31),t._uU(6),t.qZA()()(),t.TgZ(7,"ng-scrollbar",32)(8,"table",33)(9,"thead")(10,"tr"),t._UZ(11,"th")(12,"th"),t.TgZ(13,"th"),t._uU(14,"Location"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Item Number"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Item Description"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"UPC"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Brand"),t.qZA(),t._UZ(23,"th"),t.TgZ(24,"th"),t._uU(25,"Available Quantity"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Allocated Quantity"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Total Quantity"),t.qZA(),t._UZ(30,"th")(31,"th")(32,"th"),t.qZA()(),t.TgZ(33,"tbody"),t.YNc(34,nt,31,16,"tr",34),t.ALo(35,"paginate"),t.ALo(36,"InvSearchPipe"),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(6),t.hij("Total Quantity: ",e.totalQty,""),t.xp6(28),t.Q6J("ngForOf",t.xi3(35,2,t.xi3(36,5,e.InventoryDetails,e.searchText),t.VKq(8,N,e.p)))}}function rt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"div",58)(4,"div",59)(5,"div",60)(6,"h6",61),t._uU(7),t.qZA()(),t.TgZ(8,"div",62)(9,"div",63)(10,"div",64)(11,"img",65),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(12,"div",66)(13,"div",16),t._UZ(14,"div",67)(15,"div",67),t.TgZ(16,"div",68)(17,"h5",61),t._uU(18),t.qZA()(),t.TgZ(19,"div",69),t._uU(20,"Location"),t.qZA(),t.TgZ(21,"div",67),t._uU(22,":"),t.qZA(),t.TgZ(23,"div",70),t._uU(24),t.qZA(),t.TgZ(25,"div",69),t._uU(26,"Available"),t.qZA(),t.TgZ(27,"div",67),t._uU(28,":"),t.qZA(),t.TgZ(29,"div",70),t._uU(30),t.qZA(),t.TgZ(31,"div",69),t._uU(32,"Allocated"),t.qZA(),t.TgZ(33,"div",67),t._uU(34,":"),t.qZA(),t.TgZ(35,"div",70)(36,"h5",61),t._uU(37),t.qZA()()()()()()()()()()()}if(2&r){const e=s.$implicit;t.xp6(7),t.hij(" ",e.ItemName," "),t.xp6(4),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(7),t.Oqu(e.ItemNumber),t.xp6(6),t.Oqu(e.BinLoc),t.xp6(6),t.Oqu(e.InvQty),t.xp6(7),t.Oqu(e.AllocQty)}}function it(r,s){if(1&r&&(t.TgZ(0,"div",51)(1,"div",29)(2,"div",52)(3,"div",31),t._uU(4),t.qZA()()(),t.TgZ(5,"ng-scrollbar",53),t.YNc(6,rt,38,6,"div",54),t.ALo(7,"paginate"),t.ALo(8,"InvSearchPipe"),t.qZA()()),2&r){const e=t.oxw();t.xp6(4),t.hij("Total Quantity: ",e.totalQty,""),t.xp6(2),t.Q6J("ngForOf",t.xi3(7,2,t.xi3(8,5,e.InventoryDetails,e.searchText),t.VKq(8,N,e.p)))}}function ct(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"i",87),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.removeFile())}),t.qZA()}}function at(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",71)(1,"h5",61),t._uU(2,"Upload Order"),t.qZA(),t.TgZ(3,"div",72)(4,"a",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeModal())}),t._UZ(5,"i",74),t.qZA()()(),t.TgZ(6,"div",75)(7,"div",76),t._UZ(8,"div",77),t.TgZ(9,"div",77)(10,"div",78)(11,"input",79),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.fileChange(o))}),t.qZA(),t._UZ(12,"input",80),t.YNc(13,ct,1,0,"i",81),t.TgZ(14,"span",7)(15,"button",82),t._UZ(16,"i",83),t.qZA()()()(),t._UZ(17,"div",77),t.qZA(),t.TgZ(18,"div",84)(19,"div",85)(20,"button",86),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.pressUpload())}),t._uU(21,"Upload"),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(12),t.s9C("value",e.filename),t.xp6(1),t.Q6J("ngIf",e.filename)}}function lt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",88)(1,"h5",89),t._uU(2,"STOCK ON HAND"),t.qZA(),t.TgZ(3,"div",71)(4,"div",90)(5,"a",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalRef.close())}),t._UZ(6,"i",74),t.qZA()()()(),t.TgZ(7,"div",91)(8,"div",84)(9,"div",76)(10,"div",92)(11,"div",16)(12,"div",84)(13,"div",77)(14,"div",93)(15,"div",3)(16,"span",94),t._UZ(17,"i",95),t.qZA()(),t.TgZ(18,"input",96),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.ItemNumberFrom=o)}),t.qZA()()()(),t.TgZ(19,"div",84)(20,"div",77)(21,"div",93)(22,"div",3)(23,"span",94),t._UZ(24,"i",97),t.qZA()(),t.TgZ(25,"ngx-bootstrap-multiselect",98),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.BinControlModel=o)}),t.qZA(),t._UZ(26,"input",99),t.qZA()()()(),t.TgZ(27,"div",100)(28,"button",101),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onclear())}),t._uU(29,"Clear \xa0"),t._UZ(30,"i",102),t.qZA(),t.TgZ(31,"button",103),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onExecute())}),t._uU(32,"Execute \xa0"),t._UZ(33,"i",11),t.qZA()()()()()()}if(2&r){const e=t.oxw();t.xp6(18),t.Q6J("ngModel",e.parameters.ItemNumberFrom),t.xp6(7),t.Q6J("options",e.BinControlOptions)("texts",e.ControlTexts)("settings",e.ControlSettings)("ngModel",e.BinControlModel)}}function st(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",35)(2,"img",36),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",37),t._uU(10),t.qZA(),t.TgZ(11,"td",37),t._uU(12),t.qZA(),t.TgZ(13,"td",37)(14,"a",73),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onCancel(i))}),t._UZ(15,"i",105),t.qZA()()()}if(2&r){const e=s.$implicit;t.xp6(2),t.Q6J("src",e.imgUrl,t.LSH),t.xp6(2),t.Oqu(e.CreateDate),t.xp6(2),t.Oqu(e.ReqNumber),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.Quantity),t.xp6(2),t.Oqu(e.Requestor)}}function dt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",88)(1,"h5",89),t._uU(2,"Requested from Athlete"),t.qZA(),t.TgZ(3,"div",71)(4,"div",90)(5,"a",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalRef.close())}),t._UZ(6,"i",74),t.qZA()()()(),t.TgZ(7,"div",91)(8,"div",76)(9,"ng-scrollbar",104)(10,"table",33)(11,"thead")(12,"tr"),t._UZ(13,"th"),t.TgZ(14,"th"),t._uU(15,"Request Date"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Request No"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Item Number"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Quantity"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Requested by"),t.qZA(),t._UZ(24,"th"),t.qZA()(),t.TgZ(25,"tbody"),t.YNc(26,st,16,6,"tr",34),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(26),t.Q6J("ngForOf",e.reqItemList)}}let k=(()=>{class r{constructor(e,n,o,i,c,l){this.fb=e,this.toastrService=o,this.apiservice=i,this.modalService=c,this.breakpointObserver=l,this.searchText="",this.type="list",this.totalQty=0,this.InventoryTransfer=[],this.ViewType="",this.reqItemList=[],this.InventoryFilter=[],this.InvoicedHeader=[],this.RequestDetails=[],this.currentInventory=[],this.SubjectRef=[],this.rowData=[],this.isMobile=!1,this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""},this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},this.detectDeviceType(),n.backdrop="static",n.keyboard=!1}detectDeviceType(){this.breakpointObserver.observe([h.u3.Handset,h.u3.Tablet]).subscribe(e=>{this.isMobile=e.matches,this.type=this.isMobile?"headerGrid":"headerlist"})}handleEnterKey(e){var n=this;return(0,a.Z)(function*(){""!==n.searchText&&(n.searchText=n.searchText.length>12?n.searchText.slice(0,12):n.searchText,n.ongetItemNumber())})()}ngOnInit(){this.onLoadInventory()}onLoadInventory(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getBin()})).then((0,a.Z)(function*(){return yield e.openModal()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}openModal(){this.modalRef=this.modalService.open(this.ParamForms,{container:".app"})}getBin(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getBins("&querytag=getSelectionBin&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.BinControlOptions=yield l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}getInventory(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=getSOH&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.SumInventory(),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}removeFile(){this.filename="",this.rowData=[]}onChangeSearch(){this.searchText=this.searchText.length>12?this.searchText.slice(0,12):this.searchText,this.searchText=this.searchText.toUpperCase(),""!==this.searchText?(this.InventoryFilter=this.InventoryDetails.filter(e=>e.BinLoc==this.searchText||e.ItemNumber==this.searchText||e.UPC==this.searchText),this.totalQty=this.SumFilterInventory()):this.totalQty=this.SumInventory()}ongetItemNumber(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.searchText=e.searchText.length>12?e.searchText.slice(0,12):e.searchText,yield e.apiservice.getInventory("&querytag=getItemNumberUPC&value1="+e.searchText+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){0!==l.length&&(e.searchText=l[0].ItemNumber,e.searchText=e.searchText.toUpperCase()),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}SumFilterInventory(){return this.InventoryFilter.reduce((e,n)=>e+n.InvQty,0)}SumInventory(){return this.InventoryDetails.reduce((e,n)=>e+n.InvQty,0)}fileChange(e){var n=this;return(0,a.Z)(function*(){const o=e.target.files;if(o.length){if(n.filename=o[0].name,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==o[0].type)return n.toastrService.error("Invalid file format. Only excel file(.xlsx) are allowed!","Uploading Error"),void n.removeFile();const i=new FileReader;i.onload=c=>{const l=(0,v.ij)(c.target.result),d=l.SheetNames;if(d.length){let O=function(C,w){return C.every(q=>w.every(S=>q.hasOwnProperty(S)))};const _=v.P6.sheet_to_json(l.Sheets[d[0]]);if(0===_.length)return n.removeFile(),void n.toastrService.error("File is empty","Invalid content");if(!1===O(_,["ItemNumber","Quantity"]))return n.toastrService.error("Invalid column header on the file!","Invalid Header"),void n.removeFile();n.rowData=_}else n.removeFile(),n.toastrService.error("Error has been occured, please contact your admin.","File Upload")},i.readAsArrayBuffer(o[0])}})()}UploadModal(e){this.modalRef=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}pressUpload(){0!==this.rowData.length||this.toastrService.error("Please select file!","Upload File!")}closeModal(){this.modalRef.close()}onclear(){this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""}}onExecute(){var e=this;this.ViewType="AllItems",this.busyLoading().then((0,a.Z)(function*(){return yield e.oncompose()})).catch(n=>console.log("rejected!"))}onExecuteAlloc(){var e=this;this.ViewType="AllItems",this.busyLoading().then((0,a.Z)(function*(){return yield e.oncomposeAlloc()})).catch(n=>console.log("rejected!"))}onExecuteEmptyBin(){var e=this;this.ViewType="EmptyBin",this.busyLoading().then((0,a.Z)(function*(){return yield e.oncomposeEmpty()})).catch(n=>console.log("rejected!"))}onExport(){console.log(this.InventoryDetails)}busyLoading(){return new Promise((e,n)=>{this.closeModal(),u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}oncompose(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){let c="";if(""!==e.parameters.ItemNumberFrom?c=""!==e.parameters.ItemNumberTo?" and A.ItemNumber Between '"+e.parameters.ItemNumberFrom.trim()+"' and '"+e.parameters.ItemNumberTo.trim()+"'":" and A.ItemNumber = '"+e.parameters.ItemNumberFrom.trim()+"'":""!==e.parameters.ItemNumberTo&&(c=" and A.ItemNumber Like '%"+e.parameters.ItemNumberTo.trim()+"%'"),0!==e.BinControlModel.length){var l="";for(let _=0;_<e.BinControlModel.length;_++)l=""===l?l+"'"+e.BinControlModel[_]+"'":l+",'"+e.BinControlModel[_]+"'";c=c+" and A.BinLoc IN ("+l+") or A.BinLoc IN ("+l+")"}e.executeQueryToSend("Select * from InventoryViewBalance A where TotalQty != 0 or AllocQty > 0"+c+" Order by A.BinLoc,A.ItemNumber ASC;").then((0,a.Z)(function*(){return yield e.closeModal()})).then((0,a.Z)(function*(){return yield o()})).catch(_=>console.log("rejected!"))});return function(o,i){return n.apply(this,arguments)}}())}oncomposeAlloc(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.executeQueryToSend("Select * from InventoryViewBalance A where A.AllocQty != 0 Order by A.BinLoc,A.ItemNumber,A.AllocQty ASC;").then((0,a.Z)(function*(){return yield e.closeModal()})).then((0,a.Z)(function*(){return yield o()})).catch(d=>console.log("rejected!"))});return function(o,i){return n.apply(this,arguments)}}())}oncomposeEmpty(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.executeQueryToSend("Select '-' 'ItemNumber','-' 'ItemName','-' 'Brand','-' 'conres','-' 'ItemImage',BinName 'BinLoc',Quantity 'InvQty',0 Allocated from EmptyBinView where Quantity < 10 order by BinSequence DESC").then((0,a.Z)(function*(){return yield e.closeModal()})).then((0,a.Z)(function*(){return yield o()})).catch(d=>console.log("rejected!"))});return function(o,i){return n.apply(this,arguments)}}())}executeQueryToSend(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.QuerySender("&value1="+e).subscribe(function(){var l=(0,a.Z)(function*(d){n.InventoryDetails=yield d,n.apiservice.closeBusyLoading(),n.totalQty=n.SumInventory(),i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}onBack(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.openModal()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>console.log("rejected!"))}exportToExcel(){const e=this.InventoryDetails.map(({BinLoc:i,ItemNumber:c,ItemName:l,InvQty:d})=>({BinLoc:i,ItemNumber:c,ItemName:l,InvQty:d})),n=v.P6.json_to_sheet(e),o=v.P6.book_new();v.P6.book_append_sheet(o,n,"Sheet1"),v.NC(o,"StockOnHand.xlsx")}ReqViewopenModal(e){this.modalRef=this.modalService.open(e,{size:"xl"})}onViewIncludedRequest(e,n){var o=this;0!==parseInt(e.AllocQty)&&this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield o.onviewReq(e)})).then((0,a.Z)(function*(){return yield o.ReqViewopenModal(n)})).then((0,a.Z)(function*(){return yield o.apiservice.closeBusyLoading()})).catch(i=>console.log("rejected!"))}onviewReq(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=getRequestItemList&value1="+e.ItemNumber+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.reqItemList=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}onCancel(e){var n=this;this.busyLoading().then((0,a.Z)(function*(){return yield n.onCancelReqItem(e.ItemNumber,e.Quantity,e.ReqNumber,e.Bin)})).then((0,a.Z)(function*(){return yield n.onReload()})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(o=>console.log("error","Cancellation Data","Error while loading the data!"))}onReload(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){"AllItems"===e.ViewType?e.onExecute():e.onExecuteAlloc(),o()});return function(o,i){return n.apply(this,arguments)}}())}onCancelReqItem(e,n,o,i){return new Promise(c=>setTimeout(()=>{this.apiservice.modDataOnly("&querytag=DeleteReqline&value1="+e+"&value2="+n+"&value3="+o+"&value4="+i+"&value5="+localStorage.getItem("User")+"&value6=NaNNaNNaNNaN").subscribe(l=>{c()})},200))}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(g.QS),t.Y36(p.NM),t.Y36(x._W),t.Y36(R),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-inventory-report"]],viewQuery:function(n,o){if(1&n&&t.Gf(G,5),2&n){let i;t.iGM(i=t.CRH())&&(o.ParamForms=i.first)}},hostBindings:function(n,o){1&n&&t.NdJ("keyup.enter",function(c){return o.handleEnterKey(c)},!1,t.Jf7)},decls:29,vars:8,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-1","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","input","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-primary","mr-1",3,"click"],[1,"fa","fa-filter"],[1,"btn","btn-gray","mr-1",3,"click"],[1,"fa","fa-refresh"],["class","btn btn-success mr-1",3,"click",4,"ngIf"],["class","btn btn-info mr-1",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","col-lg-0 col-sm-12 mt-0 col-md-0",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["Upload",""],["ParamForms",""],["RequestedForm",""],[1,"btn","btn-success","mr-1",3,"click"],[1,"fa","fa-download"],[1,"btn","btn-info","mr-1",3,"click"],[1,"fa","fa-sort-amount-desc"],[1,"fa","fa-minus-square-o"],[1,"table-responsive","bg-white","box-shadow"],[1,"card","border-0","box-shadow","mb-2"],[1,"d-flex","justify-content-between","mb-4"],[1,"p-6","ml-2","mt-2",2,"font-weight","bold"],["pointerEventsMethod","scrollbar",2,"height","600px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle"],["width","70",1,"rounded",3,"src","error"],[1,"align-middle","text-truncate"],[1,"align-middle","text-truncate",3,"click"],[1,"badge","badge-grey","mr-1"],["class","badge badge-grey mr-1",4,"ngIf"],["class","badge badge-warning mr-1",4,"ngIf"],["class","badge badge-primary mr-1",4,"ngIf"],["class","badge badge-danger mr-1",4,"ngIf"],["class","badge badge-success mr-1",4,"ngIf"],["class","badge mr-1",4,"ngIf"],[1,"badge","badge-warning","mr-1"],[1,"badge","badge-primary","mr-1"],[1,"badge","badge-danger","mr-1"],[1,"badge","badge-success","mr-1"],[1,"badge","mr-1"],[1,"col-lg-0","col-sm-12","mt-0","col-md-0"],[1,"d-flex","justify-content-between","mb-1"],["pointerEventsMethod","scrollbar",2,"height","450px"],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["alt","Image","width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-10","pl-2","text-left","text-truncate"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"card-header","transparent","border-0","text-muted"],[1,"widget-controls","mr-2","mt-1"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],[1,"col-lg-12","mb-2"],["widget","",1,"card","border-0","box-shadow"],[1,"form-group"],[1,"input-group","file-upload"],["type","file",1,"file-upload-btn",3,"change"],["type","text","placeholder","Choose a file...",1,"form-control",3,"value"],["class","fa fa-times delete-file",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary"],[1,"fa","fa-file-excel-o"],[1,"col-sm-12"],[1,"custom-control","custom-checkbox","col-sm-12","mb-2","ml-4"],["type","submit",1,"btn","btn-success","pull-right",3,"click"],[1,"fa","fa-times","delete-file",3,"click"],[1,"modal-header-own"],["id","modal-basic-title",1,"modal-title","mb-2",2,"color","black","margin-top","18px","margin-left","16px"],[1,"widget-controls"],[1,"modal-body"],[1,"card-body","widget-body"],[1,"input-group"],[1,"input-group-text"],[1,"fa","fa-cube"],["placeholder","Enter Item Number","name","ItemNumberFrom",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-th-large"],[1,"custom-multiselect",3,"options","texts","settings","ngModel","ngModelChange"],[1,"form-control"],[1,"row","pull-right","mr-2"],[1,"btn","btn-warning","mr-2",3,"click"],[1,"fa","fa-file-o"],[1,"btn","btn-success",3,"click"],["pointerEventsMethod","scrollbar",2,"height","300px"],[1,"fa","fa-trash"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"input",6),t.NdJ("input",function(){return o.onChangeSearch()})("ngModelChange",function(c){return o.searchText=c}),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){return o.onBack()}),t._UZ(9,"i",9),t._uU(10,"\xa0\xa0Filter"),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){return o.onExecute()}),t._UZ(12,"i",11),t._uU(13,"\xa0\xa0Refresh"),t.qZA(),t.YNc(14,j,3,0,"button",12)(15,Y,3,0,"button",13)(16,K,3,0,"button",13),t.qZA()()()(),t.YNc(17,ot,37,10,"div",14)(18,it,9,10,"div",15),t.TgZ(19,"div",16)(20,"div",17)(21,"div",18)(22,"pagination-controls",19),t.NdJ("pageChange",function(c){return o.p=c}),t.qZA()()()(),t.YNc(23,at,22,2,"ng-template",null,20,t.W1O)(25,lt,34,5,"ng-template",null,21,t.W1O)(27,dt,27,1,"ng-template",null,22,t.W1O)),2&n&&(t.xp6(6),t.Q6J("ngModel",o.searchText),t.xp6(8),t.Q6J("ngIf",!o.isMobile),t.xp6(1),t.Q6J("ngIf",!o.isMobile),t.xp6(1),t.Q6J("ngIf",!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerlist"==o.type&&!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerGrid"==o.type&&o.isMobile),t.xp6(4),t.Q6J("autoHide",!0)("maxSize",3))},dependencies:[m.sg,m.O5,y.KC,g.Fj,g.JJ,g.On,I.RW,M.LS,M._s,P.t],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:6px;padding-left:1px}"]})}return r})(),ut=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}getItems(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getUsers(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const gt=["ParamForms"];function _t(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",3)(1,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onBack())}),t._UZ(2,"i",5),t._uU(3,"\xa0\xa0Filter"),t.qZA(),t.TgZ(4,"button",6),t._UZ(5,"i",7),t._uU(6,"\xa0\xa0Export"),t.qZA()()}}function pt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td")(7,"img",13),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.CreateDate),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.TransactionType),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.ItemNumber),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.ItemName),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.SourceBin),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.DestinationBin),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.Quantity),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.OpeningBal),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.EndingBalance),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.RefDocNum),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.CreatedBy)}}const mt=r=>({itemsPerPage:11,currentPage:r});function ht(r,s){if(1&r&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"table",11)(4,"thead")(5,"tr"),t._UZ(6,"th"),t.TgZ(7,"th"),t._uU(8,"Date"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Movement Type"),t.qZA(),t._UZ(11,"th"),t.TgZ(12,"th"),t._uU(13,"Item Number"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Item Description"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Source"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Destination"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Quantity"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Cur Balance"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"New Balance"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Reference"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"User"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,pt,26,38,"tr",12),t.ALo(32,"paginate"),t.ALo(33,"InvSearchPipe"),t.qZA()()()()()),2&r){const e=t.oxw();t.xp6(31),t.Q6J("ngForOf",t.xi3(32,1,t.xi3(33,4,e.ledgerDetails,e.searchText),t.VKq(7,mt,e.p)))}}function vt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",14)(3,"pagination-controls",15),t.NdJ("pageChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.p=o)}),t.qZA()()()()}2&r&&(t.xp6(3),t.Q6J("autoHide",!0)("maxSize",3))}function ft(r,s){if(1&r&&t._UZ(0,"ngb-progressbar",53),2&r){const e=t.oxw(2);t.Q6J("value",e.ProgressBar)("striped",!0)}}function Ct(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",16)(1,"h5",17),t._uU(2,"Stock Ledger Details"),t.qZA(),t.TgZ(3,"div",18)(4,"div",19)(5,"a",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalRef.close())}),t._UZ(6,"i",21),t.qZA()()(),t.YNc(7,ft,1,2,"ngb-progressbar",22),t.qZA(),t.TgZ(8,"div",23)(9,"div",24)(10,"div",25)(11,"div",26)(12,"div",8)(13,"div",27)(14,"div",28)(15,"div",29)(16,"input",30,31),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.dateCreateFrom=o)}),t.qZA(),t.TgZ(18,"div",32),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(17);return t.KtG(o.toggle())}),t.TgZ(19,"span",33),t._UZ(20,"i",34),t.qZA()()()()(),t.TgZ(21,"div",27)(22,"div",28)(23,"div",29)(24,"input",30,35),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.dateCreateTo=o)}),t.qZA(),t.TgZ(26,"div",32),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(25);return t.KtG(o.toggle())}),t.TgZ(27,"span",33),t._UZ(28,"i",34),t.qZA()()()()()(),t.TgZ(29,"div",8)(30,"div",27)(31,"div",28)(32,"div",29)(33,"div",36)(34,"span",33),t._UZ(35,"i",37),t.qZA()(),t.TgZ(36,"input",38),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.ReferenceFrom=o)}),t.qZA()()()(),t.TgZ(37,"div",27)(38,"div",28)(39,"div",29)(40,"div",36)(41,"span",33),t._UZ(42,"i",37),t.qZA()(),t.TgZ(43,"input",39),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.ReferenceTo=o)}),t.qZA()()()(),t.TgZ(44,"div",27)(45,"div",28)(46,"div",29)(47,"div",36)(48,"span",33),t._UZ(49,"i",40),t.qZA()(),t.TgZ(50,"input",41),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.ItemNumberFrom=o)}),t.qZA()()()(),t.TgZ(51,"div",27)(52,"div",28)(53,"div",29)(54,"div",36)(55,"span",33),t._UZ(56,"i",40),t.qZA()(),t.TgZ(57,"input",42),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.ItemNumberTo=o)}),t.qZA()()()(),t.TgZ(58,"div",24)(59,"div",28)(60,"div",29)(61,"div",36)(62,"span",33),t._UZ(63,"i",43),t.qZA()(),t.TgZ(64,"ngx-bootstrap-multiselect",44),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.BinControlModel=o)}),t.qZA(),t._UZ(65,"input",45),t.qZA()()(),t.TgZ(66,"div",24)(67,"div",28)(68,"div",29)(69,"div",36)(70,"span",33),t._UZ(71,"i",46),t.qZA()(),t.TgZ(72,"ngx-bootstrap-multiselect",44),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.TypeControlModel=o)}),t.qZA(),t._UZ(73,"input",45),t.qZA()()(),t.TgZ(74,"div",24)(75,"div",28)(76,"div",29)(77,"div",36)(78,"span",33),t._UZ(79,"i",47),t.qZA()(),t.TgZ(80,"ngx-bootstrap-multiselect",44),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.UserControlModel=o)}),t.qZA(),t._UZ(81,"input",45),t.qZA()()()(),t.TgZ(82,"div",48)(83,"button",49),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onclear())}),t._uU(84,"Clear \xa0"),t._UZ(85,"i",50),t.qZA(),t.TgZ(86,"button",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onExecute())}),t._uU(87,"Execute \xa0"),t._UZ(88,"i",52),t.qZA()()()()()()}if(2&r){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.isProgress),t.xp6(9),t.Q6J("ngModel",e.parameters.dateCreateFrom),t.xp6(8),t.Q6J("ngModel",e.parameters.dateCreateTo),t.xp6(12),t.Q6J("ngModel",e.parameters.ReferenceFrom),t.xp6(7),t.Q6J("ngModel",e.parameters.ReferenceTo),t.xp6(7),t.Q6J("ngModel",e.parameters.ItemNumberFrom),t.xp6(7),t.Q6J("ngModel",e.parameters.ItemNumberTo),t.xp6(7),t.Q6J("options",e.BinControlOptions)("texts",e.ControlTexts)("settings",e.ControlSettings)("ngModel",e.BinControlModel),t.xp6(8),t.Q6J("options",e.TypeControlOptions)("texts",e.ControlTexts)("settings",e.ControlSettings)("ngModel",e.TypeControlModel),t.xp6(8),t.Q6J("options",e.UserControlOptions)("texts",e.ControlTexts)("settings",e.ControlSettings)("ngModel",e.UserControlModel)}}let Mt=(()=>{class r{constructor(e,n,o,i){this.toastrService=n,this.apiservice=o,this.modalService=i,this.showContent=!0,this.isProgress=!1,this.totalQty=0,this.type="list",this.modelPopup={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},this.UserControlModel=[],this.TypeControlModel=[],this.BinControlModel=[],this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},this.TypeControlOptions=[{id:"Request Stock",name:"Request Stock"},{id:"Serve Stock",name:"Serve Stock"},{id:"Cancelled Request",name:"Cancelled Request"},{id:"Bin To Bin",name:"Bin To Bin"},{id:"Back To Bin",name:"Back To Bin"},{id:"Invoice",name:"Invoice"},{id:"Sales Return",name:"Sales Return"},{id:"Bill Cancelation",name:"Bill Cancelation"}],this.parameters={dateCreateFrom:this.modelPopup,dateCreateTo:this.modelPopup,ItemNumberFrom:"",ItemNumberTo:"",ReferenceFrom:"",ReferenceTo:""},e.backdrop="static",e.keyboard=!1}ngOnInit(){this.type="list",this.loadData(),this.ProgressBar=0}openModal(){this.modalRef=this.modalService.open(this.ParamForms,{container:".app"})}closeModal(){this.modalRef.close()}handleEnterKey(e){var n=this;return(0,a.Z)(function*(){""!==n.searchText&&n.ongetItemNumber()})()}ongetItemNumber(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=getItemNumberUPC&value1="+e.searchText+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){0!==l.length&&(e.searchText=l[0].ItemNumber,e.searchText=e.searchText.toUpperCase()),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}oncompose(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){let c=e.formatDate(new Date(e.parameters.dateCreateFrom.year+"/"+e.parameters.dateCreateFrom.month+"/"+e.parameters.dateCreateFrom.day)),l=e.formatDate(new Date(e.parameters.dateCreateTo.year+"/"+e.parameters.dateCreateTo.month+"/"+e.parameters.dateCreateTo.day)),d="";if(""!==e.parameters.ItemNumberFrom?d=""!==e.parameters.ItemNumberTo?" and A.ItemNumber Between '"+e.parameters.ItemNumberFrom.toLocaleUpperCase().trim()+"' and '"+e.parameters.ItemNumberTo.trim()+"'":" and A.ItemNumber LIKE '%"+e.parameters.ItemNumberFrom.toLocaleUpperCase().trim()+"%'":""!==e.parameters.ItemNumberTo&&(d=" and A.ItemNumber = '"+e.parameters.ItemNumberTo+"'"),""!==e.parameters.ReferenceFrom?d=""!==e.parameters.ReferenceTo?d+" and A.RefDocNum Between '"+e.parameters.ReferenceFrom.trim()+"' and '"+e.parameters.ReferenceTo.trim()+"'":d+" and A.RefDocNum = '"+e.parameters.ReferenceFrom.trim()+"'":""!==e.parameters.ReferenceTo&&(d=" and A.RefDocNum = '"+e.parameters.ReferenceTo.trim()+"'"),0!==e.BinControlModel.length){var _="";for(let C=0;C<e.BinControlModel.length;C++)_=""===_?_+"'"+e.BinControlModel[C]+"'":_+",'"+e.BinControlModel[C]+"'";d=d+" and A.SourceBin IN ("+_+") or DestinationBin IN ("+_+")"}if(0!==e.TypeControlModel.length){var O="";for(let C=0;C<e.TypeControlModel.length;C++)O=""===O?O+"'"+e.TypeControlModel[C]+"'":O+",'"+e.TypeControlModel[C]+"'";d=d+" and A.TransactionType IN ("+O+")"}if(0!==e.UserControlModel.length){var b="";for(let C=0;C<e.UserControlModel.length;C++)b=""===b?b+"'"+e.UserControlModel[C]+"'":b+",'"+e.UserControlModel[C]+"'";d=d+" and A.CreatedBy IN ("+b+")"}var A="DECLARE @DateStringFrom VARCHAR(20) ='"+c+"';DECLARE @DateStringTo VARCHAR(20) ='"+l+"';DECLARE @ConvertedDateFrom DATE;DECLARE @ConvertedDateTo DATE;SET @ConvertedDateFrom = CONVERT(DATE, @DateStringFrom, 23);SET @ConvertedDateTo = CONVERT(DATE, @DateStringTo, 23);Select A.TransactionId,A.TransactionType, A.ItemNumber,B.Name ItemName,A.Quantity,A.RefDocNum,A.SourceBin,A.DestinationBin,CONCAT('"+localStorage.getItem("Server")+"/img?filename=',A.ItemNumber) as ItemImage,ISNULL(A.OpeningBal,0) OpeningBal,ISNULL(A.EndingBalance,0) EndingBalance,CASE WHEN A.TransactionType ='Invoice' THEN A.CreatedBy WHEN A.TransactionType ='Bill Cancelation' THEN A.CreatedBy WHEN A.TransactionType ='Sales Return' THEN A.CreatedBy ELSE C.UserFullName END 'CreatedBy', FORMAT(A.CreatedDate, 'MM/dd/yyyy HH:mm:ss') CreateDate, Case WHEN A.TransactionType ='Cancelled Request' THEN 'align-middle text-truncate list-group-item-danger' WHEN A.TransactionType ='Return Request' THEN 'align-middle text-truncate list-group-item-warning' WHEN A.TransactionType ='Accepted Quantity' THEN 'align-middle text-truncate list-group-item-success' WHEN A.TransactionType ='Recon' THEN 'align-middle text-truncate list-group-item-primary' ELSE 'align-middle text-truncate' END 'ClassMode' FROM Transaction_Tbl A LEFT JOIN [ETPStoreV55]..[ProductRSF](NOLOCK) B ON A.ItemNumber = B.ItemNumber LEFT JOIN User_Tbl C ON A.CreatedBy = C.UserName WHERE CONVERT(DATE,A.CreatedDate, 23) Between @ConvertedDateFrom and @ConvertedDateTo "+d+" ORDER BY A.CreatedDate DESC;";e.executeQueryToSend(A).then((0,a.Z)(function*(){return yield e.closeModal()})).then((0,a.Z)(function*(){return yield o()})).catch(C=>console.log("rejected!"))});return function(o,i){return n.apply(this,arguments)}}())}formatDate(e){return`${e.getFullYear()}/${this.padZero(e.getMonth()+1)}/${this.padZero(e.getDate())}`}padZero(e){return e<10?`0${e}`:`${e}`}onExecute(){var e=this;this.busyLoading().then((0,a.Z)(function*(){return yield e.oncompose()})).catch(n=>console.log("rejected!"))}onProgressTrue(){}busyLoading(){return new Promise((e,n)=>{this.closeModal(),u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}onclear(){this.UserControlModel=[],this.TypeControlModel=[],this.BinControlModel=[],this.parameters={dateCreateFrom:this.modelPopup,dateCreateTo:this.modelPopup,ItemNumberFrom:"",ItemNumberTo:"",ReferenceFrom:"",ReferenceTo:""}}shiftTo(e){var n=this;return new Promise(function(){var o=(0,a.Z)(function*(i,c){n.type=e,i()});return function(i,c){return o.apply(this,arguments)}}())}onBack(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.openModal()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>console.log("rejected!"))}onLoadInventory(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getInventory()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getInventory(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=getStockLedger&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.ledgerDetails=l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}loadData(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getUsers()})).then((0,a.Z)(function*(){return yield e.getBin()})).then((0,a.Z)(function*(){return yield e.openModal()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getUsers(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getUsers("&querytag=getSelectionUser&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.UserControlOptions=yield l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}getBin(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getBins("&querytag=getSelectionBin&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.BinControlOptions=yield l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}getProduct(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getItems("&querytag=getSelectionProducts&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.ItemControlOptions=l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}executeQueryToSend(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.QuerySender("&value1="+e).subscribe(function(){var l=(0,a.Z)(function*(d){n.ledgerDetails=yield d,n.apiservice.closeBusyLoading(),n.totalQty=n.SumInventory(),i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}SumInventory(){return this.ledgerDetails.reduce((e,n)=>e+n.Quantity,0)}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(p.NM),t.Y36(x._W),t.Y36(ut),t.Y36(p.FF))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-stockledger"]],viewQuery:function(n,o){if(1&n&&t.Gf(gt,5),2&n){let i;t.iGM(i=t.CRH())&&(o.ParamForms=i.first)}},hostBindings:function(n,o){1&n&&t.NdJ("keyup.enter",function(c){return o.handleEnterKey(c)},!1,t.Jf7)},decls:5,vars:3,consts:[["class","row ml-1 mb-1",4,"ngIf"],["class","row",4,"ngIf"],["ParamForms",""],[1,"row","ml-1","mb-1"],[1,"btn","btn-primary","mr-1",3,"click"],[1,"fa","fa-filter"],[1,"btn","btn-success","ml-1"],[1,"fa","fa-file-excel-o"],[1,"row"],[1,"col-12"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["width","70",1,"rounded",3,"src","error"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],[1,"modal-header-own"],["id","modal-basic-title",1,"modal-title","mb-2",2,"color","black","margin-top","18px","margin-left","16px"],[1,"card-header","transparent","border-0","text-muted"],[1,"widget-controls"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],["type","success",3,"value","striped",4,"ngIf"],[1,"modal-body"],[1,"col-sm-12"],["widget","",1,"card","border-0","box-shadow"],[1,"card-body","widget-body"],[1,"col-sm-6"],[1,"form-group"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],["p","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["p1","ngbDatepicker"],[1,"input-group-prepend"],[1,"fa","fa-hashtag"],["placeholder","Enter reference","name","ReferenceFrom",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Enter reference","name","ReferenceTo",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-cube"],["placeholder","Enter Item Number","name","ItemNumberFrom",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],["placeholder","Enter Item Number","name","ItemNumberTo",1,"form-control",2,"text-transform","uppercase",3,"ngModel","ngModelChange"],[1,"fa","fa-th-large"],[1,"custom-multiselect",3,"options","texts","settings","ngModel","ngModelChange"],[1,"form-control"],[1,"fa","fa-file"],[1,"fa","fa-user"],[1,"row","pull-right","mr-2"],[1,"btn","btn-warning","mr-2",3,"click"],[1,"fa","fa-file-o"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-refresh"],["type","success",3,"value","striped"]],template:function(n,o){1&n&&t.YNc(0,_t,7,0,"div",0)(1,ht,34,9,"div",1)(2,vt,4,2,"div",1)(3,Ct,89,19,"ng-template",null,2,t.W1O),2&n&&(t.Q6J("ngIf","list"==o.type),t.xp6(1),t.Q6J("ngIf","list"==o.type),t.xp6(1),t.Q6J("ngIf","list"==o.type))},dependencies:[m.sg,m.O5,g.Fj,g.JJ,g.On,p.J4,p.Ly,I.RW,M.LS,M._s,P.t],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.pt-2[_ngcontent-%COMP%], .py-2[_ngcontent-%COMP%]{padding-top:1.5rem!important;padding-left:5rem!important}.dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}.app.light[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#5c6268;background-color:#fff;border-color:#ced4da}"]})}return r})(),T=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}addInventory(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),F=(()=>{class r{transform(e,n){if(!n||!e)return e;const o=new RegExp(n.trim(),"ig");return e.filter(i=>(i.ItemNumber.trim(),-1!==i.ItemNumber.trim().search(o)||-1!==i.ItemName.trim().search(o)||-1!==i.BinLoc.trim().search(o)))}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275pipe=t.Yjl({name:"stosPipe",type:r,pure:!1})}return r})();function xt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td",22),t.TgZ(2,"td",22)(3,"img",23),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(4,"td",22),t._uU(5),t.qZA(),t.TgZ(6,"td",24),t._uU(7),t.qZA(),t.TgZ(8,"td",24),t._uU(9),t.qZA(),t.TgZ(10,"td",24),t._uU(11),t.qZA(),t.TgZ(12,"td",24),t._uU(13),t.qZA(),t.TgZ(14,"td",24),t._uU(15),t.qZA(),t.TgZ(16,"td",24),t._uU(17),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(3),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(2),t.Oqu(e.RowNumber),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.ETP),t.xp6(2),t.Oqu(e.WMS),t.xp6(2),t.Oqu(e.Variance),t.xp6(2),t.Oqu(e.BinLoc)}}const D=r=>({itemsPerPage:100,currentPage:r});function Zt(r,s){if(1&r&&(t.TgZ(0,"div",14)(1,"div",15)(2,"div",18)(3,"ng-scrollbar",19)(4,"table",20)(5,"thead")(6,"tr"),t._UZ(7,"th")(8,"th")(9,"th"),t.TgZ(10,"th"),t._uU(11,"Item Number"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Item Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"ETP"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"WMS"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Variance"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Location"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,xt,18,8,"tr",21),t.ALo(24,"paginate"),t.ALo(25,"stosPipe"),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",t.xi3(24,1,t.xi3(25,4,e.InventoryDetails,e.searchText),t.VKq(7,D,e.p)))}}function Ot(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32)(5,"div",33)(6,"h6",34),t._uU(7),t.qZA()(),t.TgZ(8,"div",35)(9,"div",36)(10,"div",37)(11,"img",38),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(12,"div",39)(13,"div",14),t._UZ(14,"div",40)(15,"div",40),t.TgZ(16,"div",41)(17,"h5",34),t._uU(18),t.qZA()(),t.TgZ(19,"div",42),t._uU(20,"WMS"),t.qZA(),t.TgZ(21,"div",40),t._uU(22,":"),t.qZA(),t.TgZ(23,"div",43),t._uU(24),t.qZA(),t.TgZ(25,"div",42),t._uU(26,"ETP"),t.qZA(),t.TgZ(27,"div",40),t._uU(28,":"),t.qZA(),t.TgZ(29,"div",43),t._uU(30),t.qZA(),t.TgZ(31,"div",42),t._uU(32,"Variance"),t.qZA(),t.TgZ(33,"div",40),t._uU(34,":"),t.qZA(),t.TgZ(35,"div",43),t._uU(36),t.qZA()()()()()()()()()()}if(2&r){const e=s.$implicit;t.xp6(7),t.hij(" ",e.ItemName," "),t.xp6(4),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(7),t.Oqu(e.ItemNumber),t.xp6(6),t.Oqu(e.WMS),t.xp6(6),t.Oqu(e.ETP),t.xp6(6),t.Oqu(e.Variance)}}function bt(r,s){if(1&r&&(t.TgZ(0,"div",25)(1,"ng-scrollbar",26),t.YNc(2,Ot,37,6,"div",27),t.ALo(3,"paginate"),t.ALo(4,"stosPipe"),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,t.xi3(4,4,e.InventoryDetails,e.searchText),t.VKq(7,D,e.p)))}}let yt=(()=>{class r{constructor(e,n,o,i,c,l){this.fb=e,this.toastrService=o,this.apiservice=i,this.modalService=c,this.breakpointObserver=l,this.type="list",this.totalQty=0,this.InventoryTransfer=[],this.InventoryFilter=[],this.InvoicedHeader=[],this.RequestDetails=[],this.currentInventory=[],this.SubjectRef=[],this.rowData=[],this.isMobile=!1,this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""},this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},this.detectDeviceType(),n.backdrop="static",n.keyboard=!1}detectDeviceType(){this.breakpointObserver.observe([h.u3.Handset,h.u3.Tablet]).subscribe(e=>{this.isMobile=e.matches,this.type=this.isMobile?"grid":"list"})}ngOnInit(){this.onLoadInventory()}onLoadInventory(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getInventory()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getInventory(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=getVariance&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.SumInventory(),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onChangeSearch(){""!==this.searchText?(this.InventoryFilter=this.InventoryDetails.filter(e=>e.BinLoc==this.searchText||e.ItemNumber==this.searchText||e.UPC==this.searchText),this.totalQty=this.SumFilterInventory()):this.totalQty=this.SumInventory()}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}SumFilterInventory(){return this.InventoryFilter.reduce((e,n)=>e+n.InvQty,0)}SumInventory(){return this.InventoryDetails.reduce((e,n)=>e+n.InvQty,0)}onclear(){this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""}}exportToExcel(){const e=v.P6.json_to_sheet(this.InventoryDetails),n=v.P6.book_new();v.P6.book_append_sheet(n,e,"Sheet1"),v.NC(n,"System to System.xlsx")}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(g.QS),t.Y36(p.NM),t.Y36(x._W),t.Y36(T),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-system-to-system"]],decls:20,vars:5,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","input","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-gray","mr-1",3,"click"],[1,"fa","fa-refresh"],[1,"btn","btn-success","mr-1",3,"click"],[1,"fa","fa-download"],["class","row",4,"ngIf"],["class","col-lg-3 mt-0 col-md-5",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],[1,"table-responsive","bg-white","box-shadow"],["pointerEventsMethod","scrollbar",2,"height","600px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle"],["width","70",1,"rounded",3,"src","error"],[1,"align-middle","text-truncate"],[1,"col-lg-3","mt-0","col-md-5"],["pointerEventsMethod","scrollbar",2,"height","450px"],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["alt","Image","width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-10","pl-2","text-left","text-truncate"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"input",6),t.NdJ("input",function(){return o.onChangeSearch()})("ngModelChange",function(c){return o.searchText=c}),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){return o.onLoadInventory()}),t._UZ(9,"i",9),t._uU(10,"\xa0\xa0Refresh"),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){return o.exportToExcel()}),t._UZ(12,"i",11),t._uU(13,"\xa0\xa0export"),t.qZA()()()()(),t.YNc(14,Zt,26,9,"div",12)(15,bt,5,9,"div",13),t.TgZ(16,"div",14)(17,"div",15)(18,"div",16)(19,"pagination-controls",17),t.NdJ("pageChange",function(c){return o.p=c}),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("ngModel",o.searchText),t.xp6(8),t.Q6J("ngIf","list"==o.type),t.xp6(1),t.Q6J("ngIf","grid"==o.type&&o.isMobile),t.xp6(4),t.Q6J("autoHide",!0)("maxSize",3))},dependencies:[m.sg,m.O5,y.KC,g.Fj,g.JJ,g.On,M.LS,M._s,F],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:6px;padding-left:1px}"]})}return r})();function Pt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",26)(2,"button",2),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onViewItem(i))}),t._UZ(3,"i",27),t.qZA()(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28),t._uU(7),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.qZA(),t.TgZ(10,"td",28),t._uU(11),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(5),t.Oqu(e.RowNumber),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.WMS),t.xp6(2),t.Oqu(e.ETP)}}function Tt(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",26),t.TgZ(2,"td",28),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28),t._uU(7),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.qZA()()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.Location),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.BalanceApproved),t.xp6(2),t.Oqu(e.AllocatedQuantityBUOM)}}function It(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onUpdateZero())}),t._UZ(1,"i",30),t.qZA()}}function At(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onUpdate())}),t._UZ(1,"i",32),t.qZA()}}function wt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td",26),t.TgZ(2,"td",28),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28)(7,"input",33),t.NdJ("ngModelChange",function(o){const c=t.CHM(e).$implicit;return t.KtG(c.Quantity=o)}),t.qZA()(),t.TgZ(8,"td",28)(9,"input",33),t.NdJ("ngModelChange",function(o){const c=t.CHM(e).$implicit;return t.KtG(c.Allocated=o)}),t.qZA()(),t.TgZ(10,"td",28)(11,"button",34),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onDelete(i))}),t._UZ(12,"i",35),t.qZA()()()}if(2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.BinLoc),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Q6J("ngModel",e.Quantity),t.xp6(2),t.Q6J("ngModel",e.Allocated)}}function qt(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",26),t.TgZ(2,"td",28),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28),t._uU(7),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.qZA(),t.TgZ(10,"td",28),t._uU(11),t.qZA(),t.TgZ(12,"td",28),t._uU(13),t.qZA()()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.TransactionType),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.Quantity),t.xp6(2),t.Oqu(e.SourceBin),t.xp6(2),t.Oqu(e.DestinationBin)}}const St=r=>({itemsPerPage:10,currentPage:r});function Ut(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15)(6,"table",16)(7,"thead")(8,"tr"),t._UZ(9,"th"),t.TgZ(10,"th"),t._uU(11,"#"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Item Number"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"WMS"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"ETP"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Pt,12,4,"tr",17),t.ALo(20,"paginate"),t.ALo(21,"stosPipe"),t.qZA()()()()(),t.TgZ(22,"div",11)(23,"div",18)(24,"div",19)(25,"pagination-controls",20),t.NdJ("pageChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.p=o)}),t.qZA()()()()(),t.TgZ(26,"div",21)(27,"div",22)(28,"div",23)(29,"table",16)(30,"thead")(31,"tr"),t._UZ(32,"th")(33,"th"),t.TgZ(34,"th"),t._uU(35,"Item Number"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Balance Approved"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"AllocatedBUOM"),t.qZA()()(),t.TgZ(40,"tbody"),t.YNc(41,Tt,10,4,"tr",17),t.qZA()()(),t.TgZ(42,"div",23)(43,"table",16)(44,"thead")(45,"tr"),t._UZ(46,"th"),t.TgZ(47,"th"),t._uU(48,"Location"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Item Number"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Quantity "),t.YNc(53,It,2,0,"button",24),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Allocated"),t.qZA(),t.TgZ(56,"th"),t.YNc(57,At,2,0,"button",25),t.qZA()()(),t.TgZ(58,"tbody"),t.YNc(59,wt,13,4,"tr",17),t.qZA()()(),t.TgZ(60,"div",15)(61,"table",16)(62,"thead")(63,"tr"),t._UZ(64,"th"),t.TgZ(65,"th"),t._uU(66,"Date"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"Movement Type"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Item Number"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Quantity"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Source"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"Destination"),t.qZA()()(),t.TgZ(77,"tbody"),t.YNc(78,qt,14,6,"tr",17),t.qZA()()()()()()()}if(2&r){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.xi3(20,8,t.xi3(21,11,e.InventoryDetails,e.searchText),t.VKq(14,St,e.p))),t.xp6(6),t.Q6J("autoHide",!0)("maxSize",3),t.xp6(16),t.Q6J("ngForOf",e.EtpBalnce),t.xp6(12),t.Q6J("ngIf",e.wmsSOH.length),t.xp6(4),t.Q6J("ngIf",e.wmsSOH.length),t.xp6(2),t.Q6J("ngForOf",e.wmsSOH),t.xp6(19),t.Q6J("ngForOf",e.stockLedger)}}let Nt=(()=>{class r{constructor(e,n,o,i,c,l,d){this.toastr=e,this.fb=n,this.toastrService=i,this.apiservice=c,this.modalService=l,this.breakpointObserver=d,this.type="list",this.totalQty=0,this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.InventoryTransfer=[],this.InventoryFilter=[],this.InvoicedHeader=[],this.RequestDetails=[],this.currentInventory=[],this.SubjectRef=[],this.rowData=[],this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""},this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},o.backdrop="static",o.keyboard=!1}ngOnInit(){this.type="list",this.onLoadInventory()}onLoadInventory(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getInventory()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onLoadNegative(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getNegative()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getNegative(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getNegative&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onLoadAllocated(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getAllocated()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getAllocated(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getAllocated&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onLoadAllocNeg(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getAllocNeg()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getAllocNeg(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getAllocatedNegative&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}getInventory(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getVariance&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onChangeSearch(){""!==this.searchText?(this.InventoryFilter=this.InventoryDetails.filter(e=>e.BinLoc==this.searchText||e.ItemNumber==this.searchText||e.UPC==this.searchText),this.totalQty=this.SumFilterInventory()):this.totalQty=this.SumInventory()}SumFilterInventory(){return this.InventoryFilter.reduce((e,n)=>e+n.InvQty,0)}SumInventory(){return this.InventoryDetails.reduce((e,n)=>e+n.InvQty,0)}onViewItem(e){var n=this;this.currentItem=e.ItemNumber,this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.getETPItem(e)})).then((0,a.Z)(function*(){return yield n.getWMSBalance(e)})).then((0,a.Z)(function*(){return yield n.getStockLedger(e)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(o=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getETPItem(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=EtpLocationBalance&value1="+n.currentItem+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.EtpBalnce=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}getStockLedger(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=wmledger&value1="+n.currentItem+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.stockLedger=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}getWMSBalance(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=wmsLocationBalance&value1="+n.currentItem+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.wmsSOH=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}onUpdate(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.UpdateLineInventory()})).then((0,a.Z)(function*(){return yield e.onDoneTransaction()})).catch(n=>console.log("error","Inserting Data","Error while loading the data!"))}onUpdateZero(){for(let e=0;e<this.wmsSOH.length;e++)this.wmsSOH[e].Quantity=0,this.wmsSOH[e].Allocated=0}onDelete(e){var n=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.DelLineInventory(e)})).then((0,a.Z)(function*(){return yield n.onDoneTransaction()})).catch(o=>console.log("error","Inserting Data","Error while loading the data!"))}UpdateLineInventory(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.wmsSOH.forEach(c=>{e.apiservice.addInventory("&querytag=UpdateInventory1&value1="+c.BinLoc+"&value2="+c.ItemNumber+"&value3="+c.Quantity+"&value4="+c.Allocated+"&value5=&value6=&value7=&value8&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),o()});return function(o,i){return n.apply(this,arguments)}}())}UpdateLineInventoryZero(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.wmsSOH.forEach(c=>{e.apiservice.addInventory("&querytag=UpdateInventory1&value1="+c.BinLoc+"&value2="+c.ItemNumber+"&value3=0&value4=0&value5=&value6=&value7=&value8&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),o()});return function(o,i){return n.apply(this,arguments)}}())}DelLineInventory(e){var n=this;return new Promise(function(){var o=(0,a.Z)(function*(i,c){n.apiservice.addInventory("&querytag=DeleteFromSHO&value1="+e.Id+"&value2=NaNNaNNaN").subscribe(l=>{i()})});return function(i,c){return o.apply(this,arguments)}}())}SuccessAlert(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500,willClose:()=>{this.onViewReload()}})}onViewReload(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getWMSBalance("")})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onDoneTransaction(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.apiservice.closeBusyLoading(),e.toastr.success("successfuly done!"),o()});return function(o,i){return n.apply(this,arguments)}}())}onclear(){this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""}}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(x._W),t.Y36(g.QS),t.Y36(p.NM),t.Y36(x._W),t.Y36(T),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-variances"]],decls:19,vars:3,consts:[[1,"row","mb-1"],[1,"col"],[1,"btn","btn-gray","mr-1",3,"click"],[1,"fa","fa-refresh"],[1,"p-6","ml-2","mt-2",2,"font-weight","bold"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"row"],[1,"col-lg-4","mb-2"],["widget","",1,"card","border-0","box-shadow"],[1,"card-body","pt-0","widget-body"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],[1,"col-lg-8"],["widget","",1,"card","border-0"],[1,"table-responsive","bg-white","box-shadow","mb-2"],["class","btn btn-warning btn-sm mr-2",3,"click",4,"ngIf"],["class","btn btn-success btn-sm mr-2",3,"click",4,"ngIf"],[1,"align-middle"],[1,"fa","fa-eye"],[1,"align-middle","text-truncate"],[1,"btn","btn-warning","btn-sm","mr-2",3,"click"],[1,"fa","fa-minus-circle"],[1,"btn","btn-success","btn-sm","mr-2",3,"click"],[1,"fa","fa-check-circle"],["type","Number","placeholder","Enter reference","name","Quantity",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.onLoadInventory()}),t._UZ(3,"i",3),t._uU(4,"\xa0\xa0Load S2S"),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.onLoadNegative()}),t._UZ(6,"i",3),t._uU(7,"\xa0\xa0Load Negative"),t.qZA(),t.TgZ(8,"button",2),t.NdJ("click",function(){return o.onLoadAllocNeg()}),t._UZ(9,"i",3),t._uU(10,"\xa0\xa0Load Neg Alloc"),t.qZA(),t.TgZ(11,"div",4),t._uU(12),t.qZA()(),t.TgZ(13,"div",5)(14,"div",6)(15,"span",7),t._UZ(16,"i",8),t.qZA()(),t.TgZ(17,"input",9),t.NdJ("ngModelChange",function(c){return o.searchText=c}),t.qZA()()(),t.YNc(18,Ut,79,16,"div",10)),2&n&&(t.xp6(12),t.hij("Total: ",o.totalQty,""),t.xp6(5),t.Q6J("ngModel",o.searchText),t.xp6(1),t.Q6J("ngIf","list"==o.type))},dependencies:[m.sg,m.O5,g.Fj,g.wV,g.JJ,g.On,M.LS,M._s,F],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]})}return r})(),kt=(()=>{class r{transform(e,n){if(!n||!e)return e;const o=new RegExp(n.trim(),"ig");return e.filter(i=>(i.ItemNumber.trim(),-1!==i.ItemNumber.trim().search(o)))}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275pipe=t.Yjl({name:"invAdjPipe",type:r,pure:!1})}return r})();function Ft(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",25)(2,"button",26),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onViewItem(i))}),t._UZ(3,"i",27),t.qZA()(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28),t._uU(7),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(5),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.ItemName)}}function Dt(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",25),t.TgZ(2,"td",28),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28),t._uU(7),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.qZA()()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.Location),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.BalanceApproved),t.xp6(2),t.Oqu(e.AllocatedQuantityBUOM)}}function Lt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td",25),t.TgZ(2,"td",28),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td",28)(7,"input",29),t.NdJ("ngModelChange",function(o){const c=t.CHM(e).$implicit;return t.KtG(c.Quantity=o)}),t.qZA()(),t.TgZ(8,"td",28)(9,"button",30),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onReverse(i))}),t._UZ(10,"i",31),t.qZA()(),t.TgZ(11,"td",28)(12,"input",29),t.NdJ("ngModelChange",function(o){const c=t.CHM(e).$implicit;return t.KtG(c.Allocated=o)}),t.qZA()(),t.TgZ(13,"td",28)(14,"button",32),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onDelete(i))}),t._UZ(15,"i",33),t.qZA()()()}if(2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.BinLoc),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Q6J("ngModel",e.Quantity),t.xp6(5),t.Q6J("ngModel",e.Allocated)}}const Qt=r=>({itemsPerPage:10,currentPage:r});function Bt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"table",13)(7,"thead")(8,"tr")(9,"th")(10,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),i=t.MAs(8);return t.KtG(o.onAddNewLine(i))}),t._UZ(11,"i",15),t.qZA()(),t.TgZ(12,"th"),t._uU(13,"Item Number"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,Ft,8,2,"tr",16),t.ALo(16,"paginate"),t.ALo(17,"invAdjPipe"),t.qZA()()()()(),t.TgZ(18,"div",8)(19,"div",17)(20,"div",18)(21,"pagination-controls",19),t.NdJ("pageChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.p=o)}),t.qZA()()()()(),t.TgZ(22,"div",20)(23,"div",21)(24,"div",22)(25,"table",13)(26,"thead")(27,"tr"),t._UZ(28,"th")(29,"th"),t.TgZ(30,"th"),t._uU(31,"Item Number"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Balance Approved"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"AllocatedBUOM"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,Dt,10,4,"tr",16),t.qZA()()(),t.TgZ(38,"div",22)(39,"table",13)(40,"thead")(41,"tr"),t._UZ(42,"th"),t.TgZ(43,"th"),t._uU(44,"Location"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Item Number"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Quantity"),t.qZA(),t._UZ(49,"th"),t.TgZ(50,"th"),t._uU(51,"Allocated"),t.qZA(),t.TgZ(52,"th")(53,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onUpdate())}),t._UZ(54,"i",24),t.qZA()()()(),t.TgZ(55,"tbody"),t.YNc(56,Lt,16,4,"tr",16),t.qZA()()()()()()()}if(2&r){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",t.xi3(16,5,t.xi3(17,8,e.InventoryDetails,e.searchText),t.VKq(11,Qt,e.p))),t.xp6(6),t.Q6J("autoHide",!0)("maxSize",3),t.xp6(16),t.Q6J("ngForOf",e.EtpBalnce),t.xp6(19),t.Q6J("ngForOf",e.wmsSOH)}}function Jt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",34)(1,"div",10)(2,"div",35)(3,"h5",36),t._uU(4,"Adjustment"),t.qZA(),t.TgZ(5,"div",37)(6,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalRef.close())}),t._UZ(7,"i",39),t.qZA()()(),t.TgZ(8,"div",40)(9,"label"),t._uU(10,"Bin Location"),t.qZA(),t.TgZ(11,"input",41),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.BinLoc=o)}),t.qZA()(),t.TgZ(12,"div",40)(13,"label"),t._uU(14,"Item Number"),t.qZA(),t.TgZ(15,"input",42),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ItemCode=o)}),t.qZA()(),t.TgZ(16,"div",40)(17,"label"),t._uU(18,"Quantity"),t.qZA(),t.TgZ(19,"input",43),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.Quantity=o)}),t.qZA()(),t.TgZ(20,"div",40)(21,"label"),t._uU(22,"Allocated"),t.qZA(),t.TgZ(23,"input",43),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.Allocated=o)}),t.qZA()()(),t.TgZ(24,"div",44)(25,"div",45)(26,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onAdd())}),t._uU(27,"Add"),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(11),t.Q6J("ngModel",e.BinLoc),t.xp6(4),t.Q6J("ngModel",e.ItemCode),t.xp6(4),t.Q6J("ngModel",e.Quantity),t.xp6(4),t.Q6J("ngModel",e.Allocated)}}let Et=(()=>{class r{constructor(e,n,o,i,c,l,d){this.toastr=e,this.fb=n,this.toastrService=i,this.apiservice=c,this.modalService=l,this.breakpointObserver=d,this.type="list",this.totalQty=0,this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.InventoryTransfer=[],this.InventoryFilter=[],this.InvoicedHeader=[],this.RequestDetails=[],this.currentInventory=[],this.SubjectRef=[],this.rowData=[],this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""},this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},o.backdrop="static",o.keyboard=!1}ngOnInit(){this.type="list",this.onLoadInventory()}onLoadInventory(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getInventory()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onLoadNegative(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getNegative()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getNegative(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getNegative&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onLoadAllocated(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getAllocated()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getAllocated(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getAllocated&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onLoadAllocNeg(){var e=this;this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getAllocNeg()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getAllocNeg(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getAllocatedNegative&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}getInventory(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getDistinctInventory&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.totalQty=e.InventoryDetails.length,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onChangeSearch(){""!==this.searchText?(this.InventoryFilter=this.InventoryDetails.filter(e=>e.BinLoc==this.searchText||e.ItemNumber==this.searchText||e.UPC==this.searchText),this.totalQty=this.SumFilterInventory()):this.totalQty=this.SumInventory()}SumFilterInventory(){return this.InventoryFilter.reduce((e,n)=>e+n.InvQty,0)}SumInventory(){return this.InventoryDetails.reduce((e,n)=>e+n.InvQty,0)}onViewItem(e){var n=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.getETPItem(e)})).then((0,a.Z)(function*(){return yield n.getWMSBalance(e)})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(o=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getETPItem(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){n.currentItem=e.ItemNumber,yield n.apiservice.getInventory("&querytag=EtpLocationBalance&value1="+e.ItemNumber+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.EtpBalnce=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}getStockLedger(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=wmledger&value1="+n.currentItem+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.stockLedger=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}getWMSBalance(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=wmsLocationBalance&value1="+e.ItemNumber+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.wmsSOH=d,i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}onUpdate(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.UpdateLineInventory()})).then((0,a.Z)(function*(){return yield e.onDoneTransaction()})).catch(n=>console.log("error","Inserting Data","Error while loading the data!"))}onDelete(e){var n=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield n.DelLineInventory(e)})).then((0,a.Z)(function*(){return yield n.onDoneTransaction()})).catch(o=>console.log("error","Inserting Data","Error while loading the data!"))}onReverse(e){e.Quantity=parseInt(e.Quantity)+parseInt(e.Allocated),e.Allocated=0}UpdateLineInventory(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.wmsSOH.forEach(c=>{e.apiservice.addInventory("&querytag=UpdateInventory1&value1="+c.BinLoc+"&value2="+c.ItemNumber+"&value3="+c.Quantity+"&value4="+c.Allocated+"&value5=&value6=&value7=&value8&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(l=>{})}),o()});return function(o,i){return n.apply(this,arguments)}}())}DelLineInventory(e){var n=this;return new Promise(function(){var o=(0,a.Z)(function*(i,c){n.apiservice.addInventory("&querytag=DeleteFromSHO&value1="+e.Id+"&value2=NaNNaNNaN").subscribe(l=>{i()})});return function(i,c){return o.apply(this,arguments)}}())}SuccessAlert(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500,willClose:()=>{this.onViewReload()}})}onViewReload(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getWMSBalance("")})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}onDoneTransaction(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.apiservice.closeBusyLoading(),e.toastr.success("successfuly done!"),yield e.getWMSBalance(e.currentItem),e.modalRef.close(),o()});return function(o,i){return n.apply(this,arguments)}}())}onAddNewLine(e){this.modalRef=this.modalService.open(e,{container:".app"})}onclear(){this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""}}onAdd(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.AddLineInventory()})).then((0,a.Z)(function*(){return yield e.onDoneTransaction()})).catch(n=>console.log("error","Inserting Data","Error while loading the data!"))}AddLineInventory(){var e=this;return new Promise(function(){var n=(0,a.Z)(function*(o,i){e.apiservice.addInventory("&querytag=InsertInventory&value1="+e.BinLoc+"&value2="+e.ItemCode+"&value3="+e.Quantity+"&value4="+e.Allocated+"&value5=&value6&value7=&value8=&value9=&value10=&value11=&value12=&value13=&value14=&value15=").subscribe(c=>{o()})});return function(o,i){return n.apply(this,arguments)}}())}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(x._W),t.Y36(g.QS),t.Y36(p.NM),t.Y36(x._W),t.Y36(T),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-adjusment"]],decls:9,vars:2,consts:[[1,"row","mb-1"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[4,"ngIf"],["PositiveAdj",""],[1,"row"],[1,"col-lg-4","mb-2"],["widget","",1,"card","border-0","box-shadow"],[1,"card-body","pt-0","widget-body"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[1,"btn","btn-success","mr-1",3,"click"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],[1,"col-lg-8"],["widget","",1,"card","border-0"],[1,"table-responsive","bg-white","box-shadow","mb-2"],[1,"btn","btn-success","btn-sm","mr-2",3,"click"],[1,"fa","fa-check-circle"],[1,"align-middle"],[1,"btn","btn-gray","mr-1",3,"click"],[1,"fa","fa-eye"],[1,"align-middle","text-truncate"],["type","Number","placeholder","Enter reference","name","Quantity",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-arrows-h"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"col-lg-12"],[1,"card-header","transparent","border-0","text-muted"],[1,"mb-0"],[1,"widget-controls"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],[1,"form-group"],["type","text","placeholder","Enter Bin Location",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter Item Number",1,"form-control",3,"ngModel","ngModelChange"],["type","Number","placeholder","Enter Item Quantity",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"custom-control","custom-checkbox","col-sm-12","mb-4","ml-4"],[1,"btn","btn-success","mr-1","pull-right",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"i",4),t.qZA()(),t.TgZ(5,"input",5),t.NdJ("ngModelChange",function(c){return o.searchText=c}),t.qZA()()(),t.YNc(6,Bt,57,13,"div",6)(7,Jt,28,4,"ng-template",null,7,t.W1O)),2&n&&(t.xp6(5),t.Q6J("ngModel",o.searchText),t.xp6(1),t.Q6J("ngIf","list"==o.type))},dependencies:[m.sg,m.O5,g.Fj,g.wV,g.JJ,g.On,M.LS,M._s,kt],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]})}return r})(),Ht=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}uploadFile(e,n){const o=new FormData;return o.append("file",e),this.http.post(localStorage.getItem("Server")+"/api/uploadFile?fname="+n,o)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Rt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),i=t.MAs(19);return t.KtG(o.UploadModal(i))}),t._UZ(1,"i",19),t._uU(2,"\xa0\xa0Import"),t.qZA()}}function Gt(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",24),t.TgZ(2,"td",25),t._uU(3),t.qZA(),t.TgZ(4,"td",25),t._uU(5),t.qZA(),t.TgZ(6,"td",25),t._uU(7),t.qZA(),t.TgZ(8,"td",25),t._uU(9),t.qZA(),t.TgZ(10,"td",25),t._uU(11),t.qZA(),t.TgZ(12,"td",25),t._uU(13),t.qZA(),t.TgZ(14,"td",25),t._uU(15),t.qZA(),t._UZ(16,"td",24)(17,"td",24),t.qZA()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.BinLoc),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.UPC),t.xp6(2),t.Oqu(e.Brand),t.xp6(2),t.Oqu(e.InvQty),t.xp6(2),t.Oqu(e.TotalQty)}}const L=r=>({itemsPerPage:100,currentPage:r});function jt(r,s){if(1&r&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",20)(3,"ng-scrollbar",21)(4,"table",22)(5,"thead")(6,"tr"),t._UZ(7,"th"),t.TgZ(8,"th"),t._uU(9,"Item Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Item Description"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Luanch Date"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Receiving Date"),t.qZA(),t._UZ(16,"th")(17,"th"),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,Gt,18,7,"tr",23),t.ALo(20,"paginate"),t.ALo(21,"InvSearchPipe"),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.xi3(20,1,t.xi3(21,4,e.InventoryDetails,e.searchText),t.VKq(7,L,e.p)))}}function Yt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"div",33)(5,"div",34)(6,"h6",35),t._uU(7),t.qZA()(),t.TgZ(8,"div",36)(9,"div",37)(10,"div",38)(11,"img",39),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(12,"div",40)(13,"div",13),t._UZ(14,"div",41)(15,"div",41),t.TgZ(16,"div",42)(17,"h5",35),t._uU(18),t.qZA()(),t.TgZ(19,"div",43),t._uU(20,"Location"),t.qZA(),t.TgZ(21,"div",41),t._uU(22,":"),t.qZA(),t.TgZ(23,"div",44),t._uU(24),t.qZA(),t.TgZ(25,"div",43),t._uU(26,"Available"),t.qZA(),t.TgZ(27,"div",41),t._uU(28,":"),t.qZA(),t.TgZ(29,"div",44),t._uU(30),t.qZA(),t.TgZ(31,"div",43),t._uU(32,"Allocated"),t.qZA(),t.TgZ(33,"div",41),t._uU(34,":"),t.qZA(),t.TgZ(35,"div",44)(36,"h5",35),t._uU(37),t.qZA()()()()()()()()()()()}if(2&r){const e=s.$implicit;t.xp6(7),t.hij(" ",e.ItemName," "),t.xp6(4),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(7),t.Oqu(e.ItemNumber),t.xp6(6),t.Oqu(e.BinLoc),t.xp6(6),t.Oqu(e.InvQty),t.xp6(7),t.Oqu(e.AllocQty)}}function Kt(r,s){if(1&r&&(t.TgZ(0,"div",26)(1,"ng-scrollbar",27),t.YNc(2,Yt,38,6,"div",28),t.ALo(3,"paginate"),t.ALo(4,"InvSearchPipe"),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,t.xi3(4,4,e.InventoryDetails,e.searchText),t.VKq(7,L,e.p)))}}function Wt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"i",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.removeFile())}),t.qZA()}}function $t(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",45)(1,"div",46)(2,"div",47)(3,"h5",35),t._uU(4,"Upload Luach List"),t.qZA(),t.TgZ(5,"div",48)(6,"a",49),t._UZ(7,"i",50),t.qZA()()(),t._UZ(8,"div",51),t.TgZ(9,"div",51)(10,"div",52)(11,"input",53),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onFileSelected(o))}),t.qZA(),t._UZ(12,"input",54),t.YNc(13,Wt,1,0,"i",55),t.TgZ(14,"span",7)(15,"button",56),t._UZ(16,"i",57),t._uU(17,"\xa0\xa0Browse"),t.qZA()()()(),t._UZ(18,"div",51),t.qZA(),t.TgZ(19,"div",58)(20,"div",59)(21,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onUploadFile())}),t._uU(22,"Upload"),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(12),t.s9C("value",e.filename),t.xp6(1),t.Q6J("ngIf",e.filename)}}let zt=(()=>{class r{constructor(e,n,o,i,c,l,d){this.fb=e,this.http=o,this.toastrService=i,this.apiservice=c,this.modalService=l,this.breakpointObserver=d,this.selectedFile=null,this.InventoryDetails=[],this.searchText="",this.type="list",this.fileData=null,this.rowData=[],this.isMobile=!1,this.detectDeviceType(),n.backdrop="static",n.keyboard=!1}detectDeviceType(){this.breakpointObserver.observe([h.u3.Handset,h.u3.Tablet]).subscribe(e=>{this.isMobile=e.matches,this.type=this.isMobile?"headerGrid":"headerlist"})}ngOnInit(){this.onLoadInventory()}onLoadInventory(){}removeFile(){this.filename="",this.rowData=[]}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}fileChange(e){var n=this;return(0,a.Z)(function*(){const o=e.target.files;if(o.length){if(n.filename=o[0].name,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==o[0].type)return n.toastrService.error("Invalid file format. Only excel file(.xlsx) are allowed!","Uploading Error"),void n.removeFile();const i=new FileReader;i.onload=c=>{const l=(0,v.ij)(c.target.result),d=l.SheetNames;if(d.length){let O=function(C,w){return C.every(q=>w.every(S=>q.hasOwnProperty(S)))};const _=v.P6.sheet_to_json(l.Sheets[d[0]]);if(0===_.length)return n.removeFile(),void n.toastrService.error("File is empty","Invalid content");if(!1===O(_,["ItemNumber","Quantity"]))return n.toastrService.error("Invalid column header on the file!","Invalid Header"),void n.removeFile();n.rowData=_}else n.removeFile(),n.toastrService.error("Error has been occured, please contact your admin.","File Upload")},i.readAsArrayBuffer(o[0])}})()}UploadModal(e){this.modalRef=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}exportToExcel(){const e=this.InventoryDetails.map(({BinLoc:i,ItemNumber:c,ItemName:l,InvQty:d})=>({BinLoc:i,ItemNumber:c,ItemName:l,InvQty:d})),n=v.P6.json_to_sheet(e),o=v.P6.book_new();v.P6.book_append_sheet(o,n,"Sheet1"),v.NC(o,"StockOnHand.xlsx")}onFileSelected(e){const n=e.target.files[0];n&&(this.filename=n.name,this.selectedFile=n)}getFormattedDate(){const e=new Date;return`${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}${String(e.getFullYear()).slice(-2)}${String(e.getHours()%12||12).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}${String(e.getMilliseconds()).padStart(3,"0")}`}onUploadFile(){var e=this;return new Promise(n=>setTimeout((0,a.Z)(function*(){e.selectedFile&&e.apiservice.uploadFile(e.selectedFile,"LaunchList"+e.getFormattedDate()).subscribe(o=>{}),n(),e.modalRef.close()}),200))}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(g.QS),t.Y36(p.NM),t.Y36(Z.eN),t.Y36(x._W),t.Y36(Ht),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-launch-list"]],decls:20,vars:6,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-gray","mr-1"],[1,"fa","fa-refresh"],["class","btn btn-success mr-1",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","col-lg-3 mt-0 col-md-5",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],["Upload",""],[1,"btn","btn-success","mr-1",3,"click"],[1,"fa","fa-upload"],[1,"table-responsive","bg-white","box-shadow"],["pointerEventsMethod","scrollbar",2,"height","600px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"align-middle","text-truncate"],[1,"col-lg-3","mt-0","col-md-5"],["pointerEventsMethod","scrollbar",2,"height","450px"],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["alt","Image","width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-10","pl-2","text-left","text-truncate"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"col-lg-12","mb-2"],["widget","",1,"card","border-0","box-shadow"],[1,"card-header","transparent","border-0","text-muted"],[1,"widget-controls"],["data-widgster","close",1,"transition"],[1,"fa","fa-times"],[1,"form-group"],[1,"input-group","file-upload"],["type","file","accept",".xls,.xlsx",1,"file-upload-btn",3,"change"],["type","text","placeholder","Choose a file...",1,"form-control",3,"value"],["class","fa fa-times delete-file",3,"click",4,"ngIf"],["type","button",1,"btn","btn-info"],[1,"fa","fa-folder-open"],[1,"col-sm-12"],[1,"custom-control","custom-checkbox","col-sm-12","mb-2","ml-4"],["type","submit",1,"btn","btn-success","pull-right",3,"click"],[1,"fa","fa-times","delete-file",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"input",6),t.NdJ("ngModelChange",function(c){return o.searchText=c}),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t._UZ(9,"i",9),t._uU(10,"\xa0\xa0Refresh"),t.qZA(),t.YNc(11,Rt,3,0,"button",10),t.qZA()()()(),t.YNc(12,jt,22,9,"div",11)(13,Kt,5,9,"div",12),t.TgZ(14,"div",13)(15,"div",14)(16,"div",15)(17,"pagination-controls",16),t.NdJ("pageChange",function(c){return o.p=c}),t.qZA()()()(),t.YNc(18,$t,23,2,"ng-template",null,17,t.W1O)),2&n&&(t.xp6(6),t.Q6J("ngModel",o.searchText),t.xp6(5),t.Q6J("ngIf",!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerlist"==o.type&&!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerGrid"==o.type&&o.isMobile),t.xp6(4),t.Q6J("autoHide",!0)("maxSize",3))},dependencies:[m.sg,m.O5,y.KC,g.Fj,g.JJ,g.On,M.LS,M._s,P.t],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.file-upload[_ngcontent-%COMP%]   .file-upload-btn[_ngcontent-%COMP%]{position:absolute;width:100%;height:35px;z-index:9;opacity:0}.file-upload[_ngcontent-%COMP%]   .delete-file[_ngcontent-%COMP%]{position:absolute;right:50px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:99;visibility:hidden}.file-upload[_ngcontent-%COMP%]:hover   .delete-file[_ngcontent-%COMP%]{visibility:visible}"]})}return r})();function Vt(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",15),t.TgZ(2,"td",16),t._uU(3),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",16),t._uU(7),t.qZA(),t._UZ(8,"td",16),t.TgZ(9,"td",16),t._uU(10),t.qZA(),t._UZ(11,"td",16),t.qZA()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.BinLoc),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.hij(" ",e.InvQty," "),t.xp6(3),t.hij(" ",e.AllocQty," ")}}function Xt(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",15),t.TgZ(2,"td",16),t._uU(3),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",16),t._uU(7),t.qZA(),t.TgZ(8,"td",16),t._uU(9),t.qZA()()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.Location),t.xp6(2),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.BalanceApproved),t.xp6(2),t.Oqu(e.AllocatedQuantityBUOM)}}function te(r,s){if(1&r&&(t.TgZ(0,"div")(1,"div",7)(2,"div",8)(3,"span",9),t._uU(4,"WMS"),t.qZA(),t.TgZ(5,"span",9),t._uU(6),t.qZA(),t.TgZ(7,"div",10)(8,"table",11)(9,"thead")(10,"tr"),t._UZ(11,"th"),t.TgZ(12,"th"),t._uU(13,"Location"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Item Number"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Quantity"),t.qZA(),t._UZ(18,"th"),t.TgZ(19,"th"),t._uU(20,"Allocated"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,Vt,12,4,"tr",12),t.qZA()()()(),t.TgZ(23,"div",13)(24,"span",9),t._uU(25,"ETP"),t.qZA(),t.TgZ(26,"span",9),t._uU(27),t.qZA(),t.TgZ(28,"div",14)(29,"div",10)(30,"table",11)(31,"thead")(32,"tr"),t._UZ(33,"th")(34,"th"),t.TgZ(35,"th"),t._uU(36,"Item Number"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Balance Approved"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"AllocatedBUOM"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,Xt,10,4,"tr",12),t.qZA()()()()()()()),2&r){const e=t.oxw();t.xp6(6),t.Oqu(e.WMSTotal),t.xp6(16),t.Q6J("ngForOf",e.wmsSOH),t.xp6(5),t.Oqu(e.ETPTotal),t.xp6(15),t.Q6J("ngForOf",e.EtpBalnce)}}let ee=(()=>{class r{constructor(e,n,o,i,c,l,d){this.toastr=e,this.fb=n,this.toastrService=i,this.apiservice=c,this.modalService=l,this.breakpointObserver=d,this.type="list",this.totalQty=0,this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.InventoryTransfer=[],this.WMSTotal=[],this.ETPTotal=[],this.InventoryFilter=[],this.InvoicedHeader=[],this.RequestDetails=[],this.currentInventory=[],this.SubjectRef=[],this.rowData=[],this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""},this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},o.backdrop="static",o.keyboard=!1}ngOnInit(){this.type="list"}loadSearchItem(){var e=this;""!==this.searchText&&(this.EtpBalnce=[],this.wmsSOH=[],this.stockLedger=[],this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getItemListWMS()})).then((0,a.Z)(function*(){return yield e.getItemListETP()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!")))}getItemListWMS(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getItemInqueryWMS&value1="+e.searchText.trim()+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.wmsSOH=l,e.WMSTotal=e.wmsSum(),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}getItemListETP(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getDataMethod("&querytag=getItemInqueryETP&value1="+e.searchText.trim()+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.EtpBalnce=l,e.ETPTotal=e.etpSum(),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}etpSum(){return this.EtpBalnce.reduce((e,n)=>e+n.BalanceApproved,0)}wmsSum(){return this.wmsSOH.reduce((e,n)=>e+n.InvQty,0)}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(x._W),t.Y36(g.QS),t.Y36(p.NM),t.Y36(x._W),t.Y36(T),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-item-inquiry"]],decls:7,vars:2,consts:[[1,"row","mb-1"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","keyup.enter","ngModelChange"],[4,"ngIf"],[1,"row"],[1,"col-lg-6","mb-2"],[1,"badge","badge-success","mr-1"],[1,"table-responsive","bg-white","box-shadow","mb-2"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"col-lg-6"],["widget","",1,"card","border-0"],[1,"align-middle"],[1,"align-middle","text-truncate"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"i",4),t.qZA()(),t.TgZ(5,"input",5),t.NdJ("keyup.enter",function(){return o.loadSearchItem()})("ngModelChange",function(c){return o.searchText=c}),t.qZA()()(),t.YNc(6,te,43,4,"div",6)),2&n&&(t.xp6(5),t.Q6J("ngModel",o.searchText),t.xp6(1),t.Q6J("ngIf","list"==o.type))},dependencies:[m.sg,m.O5,g.Fj,g.JJ,g.On],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]})}return r})(),ne=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}uploadFile(e,n){const o=new FormData;return o.append("file",e),this.http.post(localStorage.getItem("Server")+"/api/uploadFile?fname="+n,o)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),oe=(()=>{class r{transform(e,n){if(!n||!e)return e;const o=new RegExp(n,"ig");return e.filter(i=>-1!==i.ItemNumber.search(o))}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275pipe=t.Yjl({name:"AgingSearchPipe",type:r,pure:!1})}return r})();function re(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel())}),t._UZ(1,"i",18),t._uU(2,"\xa0\xa0Export"),t.qZA()}}function ie(r,s){if(1&r&&(t.TgZ(0,"tr"),t._UZ(1,"td",23),t.TgZ(2,"td",24),t._uU(3),t.qZA(),t.TgZ(4,"td",24),t._uU(5),t.qZA(),t.TgZ(6,"td",24),t._uU(7),t.qZA(),t.TgZ(8,"td",24),t._uU(9),t.qZA(),t.TgZ(10,"td",24),t._uU(11),t.qZA(),t._UZ(12,"td",23)(13,"td",23),t.qZA()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.ItemNumber),t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.Quantity),t.xp6(2),t.Oqu(e.ReceiveDate),t.xp6(2),t.hij("",e.AGING," Days")}}const Q=r=>({itemsPerPage:100,currentPage:r});function ce(r,s){if(1&r&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",19)(3,"ng-scrollbar",20)(4,"table",21)(5,"thead")(6,"tr"),t._UZ(7,"th"),t.TgZ(8,"th"),t._uU(9,"Item Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Item Description"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Quantity"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Last Receipt Date"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Aging"),t.qZA(),t._UZ(18,"th")(19,"th"),t.qZA()(),t.TgZ(20,"tbody"),t.YNc(21,ie,14,5,"tr",22),t.ALo(22,"paginate"),t.ALo(23,"AgingSearchPipe"),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",t.xi3(22,1,t.xi3(23,4,e.InventoryDetails,e.searchText),t.VKq(7,Q,e.p)))}}function ae(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32)(5,"div",33)(6,"h6",34),t._uU(7),t.qZA()(),t.TgZ(8,"div",35)(9,"div",36)(10,"div",37)(11,"img",38),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(12,"div",39)(13,"div",13),t._UZ(14,"div",40)(15,"div",40),t.TgZ(16,"div",41)(17,"h5",34),t._uU(18),t.qZA()(),t.TgZ(19,"div",42),t._uU(20,"Available"),t.qZA(),t.TgZ(21,"div",40),t._uU(22,":"),t.qZA(),t.TgZ(23,"div",43),t._uU(24),t.qZA(),t.TgZ(25,"div",42),t._uU(26,"Last Rcv"),t.qZA(),t.TgZ(27,"div",40),t._uU(28,":"),t.qZA(),t.TgZ(29,"div",43),t._uU(30),t.qZA(),t.TgZ(31,"div",42),t._uU(32,"Aging"),t.qZA(),t.TgZ(33,"div",40),t._uU(34,":"),t.qZA(),t.TgZ(35,"div",43),t._uU(36),t.qZA()()()()()()()()()()}if(2&r){const e=s.$implicit;t.xp6(7),t.hij(" ",e.ItemName," "),t.xp6(4),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(7),t.Oqu(e.ItemNumber),t.xp6(6),t.Oqu(e.Quantity),t.xp6(6),t.Oqu(e.ReceiveDate),t.xp6(6),t.hij("",e.AGING," Days")}}function le(r,s){if(1&r&&(t.TgZ(0,"div",25)(1,"ng-scrollbar",26),t.YNc(2,ae,37,6,"div",27),t.ALo(3,"paginate"),t.ALo(4,"AgingSearchPipe"),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,t.xi3(4,4,e.InventoryDetails,e.searchText),t.VKq(7,Q,e.p)))}}let se=(()=>{class r{constructor(e,n,o,i,c,l,d){this.fb=e,this.http=o,this.toastrService=i,this.apiservice=c,this.modalService=l,this.breakpointObserver=d,this.selectedFile=null,this.InventoryDetails=[],this.searchText="",this.type="list",this.fileData=null,this.rowData=[],this.isMobile=!1,this.detectDeviceType(),n.backdrop="static",n.keyboard=!1}detectDeviceType(){this.breakpointObserver.observe([h.u3.Handset,h.u3.Tablet]).subscribe(e=>{this.isMobile=e.matches,this.type=this.isMobile?"headerGrid":"headerlist"})}ngOnInit(){this.onLoadInventory()}onLoadInventory(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getAllInventory()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}removeFile(){this.filename="",this.rowData=[]}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}getAllInventory(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=getAgingReport&value1=&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}exportToExcel(){const e=this.InventoryDetails.map(({ItemNumber:i,ItemName:c,Quantity:l,AGING:_})=>({ItemNumber:i,ItemName:c,Quantity:l,AGING:_})),n=v.P6.json_to_sheet(e),o=v.P6.book_new();v.P6.book_append_sheet(o,n,"Sheet1"),v.NC(o,"AgingReport.xlsx")}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(g.QS),t.Y36(p.NM),t.Y36(Z.eN),t.Y36(x._W),t.Y36(ne),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-aging-report"]],decls:18,vars:6,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-3","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-gray","mr-1",3,"click"],[1,"fa","fa-refresh"],["class","btn btn-success mr-1",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","col-lg-3 mt-0 col-md-5",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],[1,"btn","btn-success","mr-1",3,"click"],[1,"fa","fa-download"],[1,"table-responsive","bg-white","box-shadow"],["pointerEventsMethod","scrollbar",2,"height","600px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"align-middle","text-truncate"],[1,"col-lg-3","mt-0","col-md-5"],["pointerEventsMethod","scrollbar",2,"height","450px"],["class","col-xl-4 col-lg-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-6","mb-4"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["alt","Image","width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-10","pl-2","text-left","text-truncate"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"input",6),t.NdJ("ngModelChange",function(c){return o.searchText=c}),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){return o.onLoadInventory()}),t._UZ(9,"i",9),t._uU(10,"\xa0\xa0Refresh"),t.qZA(),t.YNc(11,re,3,0,"button",10),t.qZA()()()(),t.YNc(12,ce,24,9,"div",11)(13,le,5,9,"div",12),t.TgZ(14,"div",13)(15,"div",14)(16,"div",15)(17,"pagination-controls",16),t.NdJ("pageChange",function(c){return o.p=c}),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("ngModel",o.searchText),t.xp6(5),t.Q6J("ngIf",!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerlist"==o.type&&!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerGrid"==o.type&&o.isMobile),t.xp6(4),t.Q6J("autoHide",!0)("maxSize",3))},dependencies:[m.sg,m.O5,y.KC,g.Fj,g.JJ,g.On,M.LS,M._s,oe],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.file-upload[_ngcontent-%COMP%]   .file-upload-btn[_ngcontent-%COMP%]{position:absolute;width:100%;height:35px;z-index:9;opacity:0}.file-upload[_ngcontent-%COMP%]   .delete-file[_ngcontent-%COMP%]{position:absolute;right:50px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:99;visibility:hidden}.file-upload[_ngcontent-%COMP%]:hover   .delete-file[_ngcontent-%COMP%]{visibility:visible}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:6px;padding-left:1px}"]})}return r})(),de=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ue(r,s){if(1&r&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function ge(r,s){if(1&r&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function _e(r,s){if(1&r&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function pe(r,s){if(1&r&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function me(r,s){if(1&r&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function he(r,s){if(1&r&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function ve(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td",17),t.TgZ(2,"td",17)(3,"img",18),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(4,"td",19),t._uU(5),t.qZA(),t.TgZ(6,"td",19),t._uU(7),t.qZA(),t.TgZ(8,"td",19),t._uU(9),t.qZA(),t.TgZ(10,"td",19),t._uU(11),t.qZA(),t.TgZ(12,"td",19),t.YNc(13,ue,2,1,"span",20)(14,ge,2,1,"span",21)(15,_e,2,1,"span",22)(16,pe,2,1,"span",23)(17,me,2,1,"span",24)(18,he,2,1,"span",25),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(3),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(2),t.Oqu(e.BinLoc),t.xp6(2),t.Oqu(e.ItemDesc),t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.TotalQty),t.xp6(2),t.Q6J("ngIf",10==e.FreeField1),t.xp6(1),t.Q6J("ngIf",20==e.FreeField1),t.xp6(1),t.Q6J("ngIf",30==e.FreeField1),t.xp6(1),t.Q6J("ngIf",40==e.FreeField1),t.xp6(1),t.Q6J("ngIf",50==e.FreeField1),t.xp6(1),t.Q6J("ngIf",70==e.FreeField1)}}function fe(r,s){if(1&r&&(t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"ng-scrollbar",14)(4,"table",15)(5,"thead")(6,"tr"),t._UZ(7,"th")(8,"th"),t.TgZ(9,"th"),t._uU(10,"Location"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Item"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Item Name"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Total Quantity"),t.qZA(),t._UZ(17,"th")(18,"th")(19,"th"),t.qZA()(),t.TgZ(20,"tbody"),t.YNc(21,ve,19,11,"tr",16),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",e.InventoryDetails)}}function Ce(r,s){if(1&r&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function Me(r,s){if(1&r&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function xe(r,s){if(1&r&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function Ze(r,s){if(1&r&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function Oe(r,s){if(1&r&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function be(r,s){if(1&r&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.FreeField1,"%")}}function ye(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",34),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(2),l=t.MAs(11);return t.KtG(c.openModal(l,i))}),t.TgZ(2,"div",35)(3,"div",36)(4,"div",37)(5,"div",38)(6,"h6",39),t._uU(7),t.qZA()(),t.TgZ(8,"div",40)(9,"div",41)(10,"div",42)(11,"img",43),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(12,"div",44)(13,"div",11)(14,"div",45),t._uU(15,"Location"),t.qZA(),t.TgZ(16,"div",46),t._uU(17,":"),t.qZA(),t.TgZ(18,"div",47),t._uU(19),t.qZA(),t.TgZ(20,"div",45),t._uU(21,"Item"),t.qZA(),t.TgZ(22,"div",46),t._uU(23,":"),t.qZA(),t.TgZ(24,"div",47),t._uU(25),t.qZA(),t.TgZ(26,"div",45),t._uU(27,"Available"),t.qZA(),t.TgZ(28,"div",46),t._uU(29,":"),t.qZA(),t.TgZ(30,"div",47),t._uU(31),t.qZA(),t.TgZ(32,"div",45),t._uU(33,"Discount"),t.qZA(),t.TgZ(34,"div",46),t._uU(35,":"),t.qZA(),t.TgZ(36,"div",47),t.YNc(37,Ce,2,1,"span",20)(38,Me,2,1,"span",21)(39,xe,2,1,"span",22)(40,Ze,2,1,"span",23)(41,Oe,2,1,"span",24)(42,be,2,1,"span",25),t.qZA()()()()()()()()()()}if(2&r){const e=s.$implicit;t.xp6(7),t.hij(" ",e.ItemName," "),t.xp6(4),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(8),t.Oqu(e.BinLoc),t.xp6(6),t.Oqu(e.ItemDesc),t.xp6(6),t.Oqu(e.TotalQty),t.xp6(6),t.Q6J("ngIf",10==e.FreeField1),t.xp6(1),t.Q6J("ngIf",20==e.FreeField1),t.xp6(1),t.Q6J("ngIf",30==e.FreeField1),t.xp6(1),t.Q6J("ngIf",40==e.FreeField1),t.xp6(1),t.Q6J("ngIf",50==e.FreeField1),t.xp6(1),t.Q6J("ngIf",70==e.FreeField1)}}function Pe(r,s){if(1&r&&(t.TgZ(0,"div",32)(1,"ng-scrollbar",33),t.YNc(2,ye,43,11,"div",16),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.InventoryDetails)}}function Te(r,s){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",58),t._uU(4),t.qZA()()),2&r){const e=s.$implicit;t.xp6(2),t.Oqu(e.ItemDesc),t.xp6(2),t.Oqu(e.TotalQty)}}function Ie(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",48)(1,"div",49)(2,"div",50)(3,"h6",51),t._uU(4),t.qZA(),t.TgZ(5,"div",52)(6,"a",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeModal())}),t._UZ(7,"i",54),t.qZA()()(),t.TgZ(8,"div",12)(9,"div",12)(10,"div",55)(11,"table",15)(12,"thead")(13,"tr")(14,"th",56),t._uU(15,"Item Number"),t.qZA(),t.TgZ(16,"th",57),t._uU(17,"Quantity"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Te,5,2,"tr",16),t.qZA()()()()()()()}if(2&r){const e=t.oxw();t.xp6(4),t.Oqu(e.modalDesc),t.xp6(15),t.Q6J("ngForOf",e.InventoryDetailSize)}}let Ae=(()=>{class r{constructor(e,n,o,i,c,l){this.fb=e,this.toastrService=o,this.apiservice=i,this.modalService=c,this.breakpointObserver=l,this.InventoryDetails=[],this.InventoryDetailSize=[],this.searchText="",this.type="list",this.totalQty=0,this.InventoryTransfer=[],this.ViewType="",this.reqItemList=[],this.InventoryFilter=[],this.InvoicedHeader=[],this.RequestDetails=[],this.currentInventory=[],this.SubjectRef=[],this.rowData=[],this.isMobile=!1,this.BinControlModel=[],this.parameters={ItemNumberFrom:"",ItemNumberTo:""},this.ControlSettings={enableSearch:!0,checkedStyle:"checkboxes",buttonClasses:"btn btn-outline-gray",dynamicTitleMaxItems:5,displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0},this.ControlTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"item selected",checkedPlural:"items selected",searchPlaceholder:"Find...",defaultTitle:"",allSelected:"All selected"},this.detectDeviceType(),n.backdrop="static",n.keyboard=!1,this.DataTypeView="Description"}detectDeviceType(){this.breakpointObserver.observe([h.u3.Handset,h.u3.Tablet]).subscribe(e=>{this.isMobile=e.matches,this.type=this.isMobile?"headerGrid":"headerlist"})}handleEnterKey(e){var n=this;return(0,a.Z)(function*(){""!==n.searchText&&n.apiservice.busyLoading().then((0,a.Z)(function*(){return n.ongetItemNumber()})).then((0,a.Z)(function*(){return yield n.apiservice.closeBusyLoading()})).catch(o=>n.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))})()}ngOnInit(){}onscan(){var e=this;""!==this.searchText&&this.apiservice.busyLoading().then((0,a.Z)(function*(){return e.ongetItemNumber()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!")),setTimeout(function(){$("#myInput").focus(),this.ScanBarcode=""},500)}openModal(e,n){this.modalTitle=n.ItemDesc,this.modalDesc=n.ItemName,this.modalRef=this.modalService.open(e,{size:"lg"}),this.getInventorySFSize(n.ItemDesc)}closeModal(){this.modalRef.close()}getInventorySFSize(e){var n=this;return(0,a.Z)(function*(){return new Promise(function(){var o=(0,a.Z)(function*(i,c){yield n.apiservice.getInventory("&querytag=SFValidationSize&value1="+e+"&value2=&value3=&value4=").subscribe(function(){var l=(0,a.Z)(function*(d){n.InventoryDetailSize=d,n.searchText="",i()});return function(d){return l.apply(this,arguments)}}())});return function(i,c){return o.apply(this,arguments)}}())})()}getInventorySF(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=SFValidationDesc&value1="+e.searchText+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InventoryDetails=l,e.searchText="",o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}ongetItemNumber(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){yield e.apiservice.getInventory("&querytag=getItemNumberUPC&value1="+e.searchText+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){0!==l.length&&(e.searchText=l[0].ItemDesc,e.apiservice.busyLoading().then((0,a.Z)(function*(){return e.getInventorySF()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(d=>e.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))),o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(g.QS),t.Y36(p.NM),t.Y36(x._W),t.Y36(de),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-sales-floor"]],hostBindings:function(n,o){1&n&&t.NdJ("keyup.enter",function(c){return o.handleEnterKey(c)},!1,t.Jf7)},decls:12,vars:3,consts:[[1,"row","mb-1"],[1,"col"],[1,"input-group","mb-1","box-shadow"],[1,"input-group-prepend"],[1,"input-group-text","border-top-0","border-left-0","border-bottom-0"],[1,"fa","fa-search"],["type","text","placeholder","Search...",1,"form-control","border-0",3,"ngModel","keyup.f12","ngModelChange"],[1,"input-group-append"],["class","row",4,"ngIf"],["class","col-lg-0 col-sm-12 mt-0 col-md-0",4,"ngIf"],["ViewDetailsGrid",""],[1,"row"],[1,"col-12"],[1,"table-responsive","bg-white","box-shadow"],["pointerEventsMethod","scrollbar",2,"height","600px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"align-middle"],["width","70",1,"rounded",3,"src","error"],[1,"align-middle","text-truncate"],["class","badge badge-grey mr-1",4,"ngIf"],["class","badge badge-warning mr-1",4,"ngIf"],["class","badge badge-primary mr-1",4,"ngIf"],["class","badge badge-danger mr-1",4,"ngIf"],["class","badge badge-success mr-1",4,"ngIf"],["class","badge mr-1",4,"ngIf"],[1,"badge","badge-grey","mr-1"],[1,"badge","badge-warning","mr-1"],[1,"badge","badge-primary","mr-1"],[1,"badge","badge-danger","mr-1"],[1,"badge","badge-success","mr-1"],[1,"badge","mr-1"],[1,"col-lg-0","col-sm-12","mt-0","col-md-0"],["pointerEventsMethod","scrollbar",2,"height","500px"],[1,"flip",3,"click"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["alt","Image","width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"col-lg-12"],["widget","",1,"card","border-0","box-shadow"],[1,"card-header","transparent","border-0","text-muted"],[1,"mb-0","ml-1"],[1,"widget-controls"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],[1,"table-responsive","bg-white","box-shadow","mr-1","ml-1"],[1,"col-sm-2"],[1,"col-sm-1"],[2,"text-align","center","vertical-align","middle"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"input",6),t.NdJ("keyup.f12",function(){return o.onscan()})("ngModelChange",function(c){return o.searchText=c}),t.qZA(),t._UZ(7,"div",7),t.qZA()()(),t.YNc(8,fe,22,1,"div",8)(9,Pe,3,1,"div",9)(10,Ie,20,2,"ng-template",null,10,t.W1O)),2&n&&(t.xp6(6),t.Q6J("ngModel",o.searchText),t.xp6(2),t.Q6J("ngIf","headerlist"==o.type&&!o.isMobile),t.xp6(1),t.Q6J("ngIf","headerGrid"==o.type&&o.isMobile))},dependencies:[m.sg,m.O5,y.KC,g.Fj,g.JJ,g.On],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:6px;padding-left:1px}"]})}return r})(),we=(()=>{class r{constructor(e){this.http=e}getInventory(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}modDataOnly(e){return this.http.get(localStorage.getItem("Server")+"/DataInQuery?dbName=GTI_WMS_DB"+e)}QuerySender(e){return this.http.get(localStorage.getItem("Server")+"/SQLCommandQuery?dbName=GTI_WMS_DB"+e)}getDataMethod(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}getBins(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}getItems(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}AlertOne(e,n,o){u().fire({icon:e,title:n,text:o,allowOutsideClick:!1})}busyLoading(){return new Promise((e,n)=>{u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}AlertTwo(e,n,o){u().fire({position:"center",icon:e,title:n,text:o,allowOutsideClick:!0,showConfirmButton:!1,timer:2500})}closeBusyLoading(){u().close()}getUsers(e){return this.http.get(localStorage.getItem("Server")+"/GetDataQuery?dbName=GTI_WMS_DB"+e)}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const qe=["ParamForms"];function Se(r,s){1&r&&(t.TgZ(0,"button",7),t._UZ(1,"i",8),t._uU(2,"\xa0\xa0Export"),t.qZA())}function Ue(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td")(3,"img",14),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Q6J("src",e.ItemImage,t.LSH),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.InvoiceDate),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.Seaoson),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.ItemNumber),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.ItemName),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.InvoiceQuantity),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.InvoiceNumber),t.xp6(1),t.Tol(e.ClassMode),t.xp6(1),t.Oqu(e.EmpName)}}const Ne=r=>({itemsPerPage:11,currentPage:r});function ke(r,s){if(1&r&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"table",12)(4,"thead")(5,"tr"),t._UZ(6,"th")(7,"th"),t.TgZ(8,"th"),t._uU(9,"Date"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Season"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Item Number"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Item Description"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Quantity"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Invoice Number"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Employee"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,Ue,18,26,"tr",13),t.ALo(24,"paginate"),t.ALo(25,"InvSearchPipe"),t.qZA()()()()()),2&r){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",t.xi3(24,1,t.xi3(25,4,e.InvoicedItem,e.searchText),t.VKq(7,Ne,e.p)))}}function Fe(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20)(5,"div",21)(6,"h6",22),t._uU(7),t.qZA()(),t.TgZ(8,"div",23)(9,"div",24)(10,"div",25)(11,"img",26),t.NdJ("error",function(){const i=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onImgError(i))}),t.qZA()(),t.TgZ(12,"div",27)(13,"div",9)(14,"div",28),t._uU(15,"Invoice"),t.qZA(),t.TgZ(16,"div",29),t._uU(17,":"),t.qZA(),t.TgZ(18,"div",30),t._uU(19),t.qZA(),t.TgZ(20,"div",28),t._uU(21,"Item"),t.qZA(),t.TgZ(22,"div",29),t._uU(23,":"),t.qZA(),t.TgZ(24,"div",30),t._uU(25),t.qZA(),t.TgZ(26,"div",28),t._uU(27,"Quantity"),t.qZA(),t.TgZ(28,"div",29),t._uU(29,":"),t.qZA(),t.TgZ(30,"div",30),t._uU(31),t.qZA()()()()()()()()()()}if(2&r){const e=s.$implicit;t.xp6(7),t.hij(" ",e.InvoiceDate," "),t.xp6(4),t.Q6J("src",e.EmpImage,t.LSH),t.xp6(8),t.AsE("",e.InvoiceNumber," ",e.Seaoson,""),t.xp6(6),t.Oqu(e.ItemNumber),t.xp6(6),t.Oqu(e.InvoiceQuantity)}}function De(r,s){if(1&r&&(t.TgZ(0,"div",15)(1,"ng-scrollbar",16),t.YNc(2,Fe,32,6,"div",13),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.InvoicedItem)}}function Le(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.p=o)}),t.qZA()()()()}2&r&&(t.xp6(3),t.Q6J("autoHide",!0)("maxSize",3))}function Qe(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",33)(1,"h5",34),t._uU(2,"Select Date"),t.qZA(),t.TgZ(3,"div",35)(4,"div",36)(5,"a",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalRef.close())}),t._UZ(6,"i",38),t.qZA()()()(),t.TgZ(7,"div",39)(8,"div",40)(9,"div",41)(10,"div",42)(11,"div",9)(12,"div",40)(13,"div",43)(14,"div",44)(15,"input",45,46),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.dateCreateFrom=o)}),t.qZA(),t.TgZ(17,"div",47),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(16);return t.KtG(o.toggle())}),t.TgZ(18,"span",48),t._UZ(19,"i",49),t.qZA()()()()(),t.TgZ(20,"div",40)(21,"div",43)(22,"div",44)(23,"input",45,50),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.parameters.dateCreateTo=o)}),t.qZA(),t.TgZ(25,"div",47),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(24);return t.KtG(o.toggle())}),t.TgZ(26,"span",48),t._UZ(27,"i",49),t.qZA()()()()(),t.TgZ(28,"div",40)(29,"div",43)(30,"div",44)(31,"input",51),t.NdJ("blur",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.ongetItemNumber())})("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ItemNum=o)}),t.qZA(),t.TgZ(32,"div",52)(33,"span",48),t._UZ(34,"i",53),t.qZA()()()()()(),t.TgZ(35,"div",54)(36,"button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadData())}),t._uU(37,"Execute \xa0"),t._UZ(38,"i",56),t.qZA()()()()()()}if(2&r){const e=t.oxw();t.xp6(15),t.Q6J("ngModel",e.parameters.dateCreateFrom),t.xp6(8),t.Q6J("ngModel",e.parameters.dateCreateTo),t.xp6(8),t.Q6J("ngModel",e.ItemNum)}}const B=[{path:"",component:k,pathMatch:"full"},{path:"inventory-report",component:k,data:{breadcrumb:"Stock on hand"}},{path:"stockledger",component:Mt,data:{breadcrumb:"Stock ledger"}},{path:"S2S",component:yt,data:{breadcrumb:"System To System"}},{path:"Variances",component:Nt,data:{breadcrumb:"Variances"}},{path:"Adjustment",component:Et,data:{breadcrumb:"Adjustment"}},{path:"LuanchList",component:zt,data:{breadcrumb:"Luanch List"}},{path:"ItemInquery",component:ee,data:{breadcrumb:"Item Inquiry"}},{path:"AgingRep",component:se,data:{breadcrumb:"Aging Report"}},{path:"SalesFloor",component:Ae,data:{breadcrumb:"Sales Floor Validation"}},{path:"InvoiceItem",component:(()=>{class r{constructor(e,n,o,i,c){this.toastrService=n,this.apiservice=o,this.modalService=i,this.breakpointObserver=c,this.showContent=!0,this.InvoicedItem=[],this.isMobile=!1,this.totalQty=0,this.type="list",this.modelPopup={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},this.parameters={dateCreateFrom:this.modelPopup,dateCreateTo:this.modelPopup},this.detectDeviceType(),e.backdrop="static",e.keyboard=!1,this.selectedDate=this.formatDate(new Date(this.parameters.dateCreateFrom.year+"/"+this.parameters.dateCreateFrom.month+"/"+this.parameters.dateCreateFrom.day)),this.selectedDateTo=this.formatDate(new Date(this.parameters.dateCreateTo.year+"/"+this.parameters.dateCreateTo.month+"/"+this.parameters.dateCreateTo.day)),this.parameters={dateCreateFrom:this.modelPopup,dateCreateTo:this.modelPopup},this.onBack()}detectDeviceType(){this.breakpointObserver.observe([h.u3.Handset,h.u3.Tablet]).subscribe(e=>{this.isMobile=e.matches,this.type=this.isMobile?"grid":"list"})}ngOnInit(){}openModal(){this.ItemNum="",this.modalRef=this.modalService.open(this.ParamForms,{container:".app"})}closeModal(){this.modalRef.close()}handleEnterKey(e){var n=this;return(0,a.Z)(function*(){""!==n.ItemNum&&n.ongetItemNumber()})()}ongetItemNumber(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){""!==e.ItemNum&&(yield e.apiservice.getInventory("&querytag=getItemNumberUPC&value1="+e.ItemNum+"&value2=&value3=&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){0!==l.length?(e.ItemNum=l[0].ItemDesc,e.ItemNum=e.ItemNum.toUpperCase()):e.ItemNum="",o()});return function(l){return c.apply(this,arguments)}}()))});return function(o,i){return n.apply(this,arguments)}}())})()}onImgError(e){e.ItemImage=localStorage.getItem("Server")+"/img?filename=DefaultImg",e.ImageStatus="None"}formatDate(e){return`${e.getFullYear()}${this.padZero(e.getMonth()+1)}${this.padZero(e.getDate())}`}padZero(e){return e<10?`0${e}`:`${e}`}busyLoading(){return new Promise((e,n)=>{this.closeModal(),u().fire({title:"Please wait",html:"loading..",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{u().showLoading(),e()}})})}onclear(){}shiftTo(e){var n=this;return new Promise(function(){var o=(0,a.Z)(function*(i,c){n.type=e,i()});return function(i,c){return o.apply(this,arguments)}}())}onBack(){var e=this;this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.openModal()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>console.log("rejected!"))}loadData(){var e=this;this.selectedDate=this.formatDate(new Date(this.parameters.dateCreateFrom.year+"/"+this.parameters.dateCreateFrom.month+"/"+this.parameters.dateCreateFrom.day)),this.selectedDateTo=this.formatDate(new Date(this.parameters.dateCreateTo.year+"/"+this.parameters.dateCreateTo.month+"/"+this.parameters.dateCreateTo.day)),this.apiservice.busyLoading().then((0,a.Z)(function*(){return yield e.getProduct()})).then((0,a.Z)(function*(){return yield e.closeModal()})).then((0,a.Z)(function*(){return yield e.apiservice.closeBusyLoading()})).catch(n=>this.apiservice.AlertOne("error","Fetching Data","Error while loading the data!"))}getProduct(){var e=this;return(0,a.Z)(function*(){return new Promise(function(){var n=(0,a.Z)(function*(o,i){"undefined"==e.ItemNum?e.ItemNum="":yield e.apiservice.getItems("&querytag=getRepGen&value1="+e.selectedDate+"&value2="+e.selectedDateTo+"&value3="+e.ItemNum+"&value4=").subscribe(function(){var c=(0,a.Z)(function*(l){e.InvoicedItem=l,o()});return function(l){return c.apply(this,arguments)}}())});return function(o,i){return n.apply(this,arguments)}}())})()}SumInventory(){return this.ledgerDetails.reduce((e,n)=>e+n.Quantity,0)}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(p.NM),t.Y36(x._W),t.Y36(we),t.Y36(p.FF),t.Y36(h.Yg))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-invoice-items"]],viewQuery:function(n,o){if(1&n&&t.Gf(qe,5),2&n){let i;t.iGM(i=t.CRH())&&(o.ParamForms=i.first)}},hostBindings:function(n,o){1&n&&t.NdJ("keyup.enter",function(c){return o.handleEnterKey(c)},!1,t.Jf7)},decls:10,vars:4,consts:[[1,"row","ml-1","mb-1"],[1,"btn","btn-primary","mr-1",3,"click"],[1,"fa","fa-filter"],["class","btn btn-success ml-1",4,"ngIf"],["class","row",4,"ngIf"],["class","col-lg-0 col-sm-12 mt-0 col-md-0",4,"ngIf"],["ParamForms",""],[1,"btn","btn-success","ml-1"],[1,"fa","fa-file-excel-o"],[1,"row"],[1,"col-12"],[1,"table-responsive","bg-white","box-shadow"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["width","70",1,"rounded",3,"src","error"],[1,"col-lg-0","col-sm-12","mt-0","col-md-0"],["pointerEventsMethod","scrollbar",2,"height","500px"],[1,"flip"],[1,"content"],[1,"front"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header","border-0","rounded-0","text-muted"],[1,"mb-0"],[1,"card-body"],[1,"media"],[1,"d-flex","flex-column","justify-content-center"],["alt","Image","width","70",1,"rounded",3,"src","error"],[1,"media-body","ml-4"],[1,"col-4","text-gray","text-left","pr-0","text-truncate"],[1,"col-0","text-gray","text-left","pr-0","text-truncate"],[1,"col-6","pl-2","text-left","text-truncate"],[1,"bg-white","text-center"],[3,"autoHide","maxSize","pageChange"],[1,"modal-header-own"],["id","modal-basic-title",1,"modal-title","mb-2",2,"color","black","margin-top","18px","margin-left","16px"],[1,"card-header","transparent","border-0","text-muted"],[1,"widget-controls"],["data-widgster","close",1,"transition",3,"click"],[1,"fa","fa-times"],[1,"modal-body"],[1,"col-sm-12"],["widget","",1,"card","border-0","box-shadow"],[1,"card-body","widget-body"],[1,"form-group"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],["p1","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["p2","ngbDatepicker"],["placeholder","Enter Item Number",1,"form-control",3,"ngModel","blur","ngModelChange"],[1,"input-group-prepend"],[1,"fa","fa-cube"],[1,"row","pull-right","mr-2"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-refresh"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.onBack()}),t._UZ(2,"i",2),t._uU(3,"\xa0\xa0Filter"),t.qZA(),t.YNc(4,Se,3,0,"button",3),t.qZA(),t.YNc(5,ke,26,9,"div",4)(6,De,3,1,"div",5)(7,Le,4,2,"div",4)(8,Qe,39,3,"ng-template",null,6,t.W1O)),2&n&&(t.xp6(4),t.Q6J("ngIf","list"==o.type),t.xp6(1),t.Q6J("ngIf","list"==o.type),t.xp6(1),t.Q6J("ngIf","grid"==o.type),t.xp6(1),t.Q6J("ngIf","list"==o.type))},dependencies:[m.sg,m.O5,y.KC,g.Fj,g.JJ,g.On,p.J4,M.LS,M._s,P.t],styles:[".flip[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;-o-perspective:800px;perspective:800px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transition:transform .6s;transform-style:preserve-3d}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:0;backface-visibility:hidden}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.front[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:180px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]{z-index:1;transform:rotateY(180deg)}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;margin-top:-1px}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:#378d3b}.flip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.back[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#d22e2e}.flip[_ngcontent-%COMP%]   .content.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.pt-2[_ngcontent-%COMP%], .py-2[_ngcontent-%COMP%]{padding-top:1.5rem!important;padding-left:5rem!important}.dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}.app.light[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#5c6268;background-color:#fff;border-color:#ced4da}.col-xl[_ngcontent-%COMP%], .col-xl-auto[_ngcontent-%COMP%], .col-xl-12[_ngcontent-%COMP%], .col-xl-11[_ngcontent-%COMP%], .col-xl-10[_ngcontent-%COMP%], .col-xl-9[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%], .col-xl-7[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-5[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-3[_ngcontent-%COMP%], .col-xl-2[_ngcontent-%COMP%], .col-xl-1[_ngcontent-%COMP%], .col-lg[_ngcontent-%COMP%], .col-lg-auto[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-1[_ngcontent-%COMP%], .col-md[_ngcontent-%COMP%], .col-md-auto[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-sm[_ngcontent-%COMP%], .col-sm-auto[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-auto[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%], .col-11[_ngcontent-%COMP%], .col-10[_ngcontent-%COMP%], .col-9[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col-7[_ngcontent-%COMP%], .col-6[_ngcontent-%COMP%], .col-5[_ngcontent-%COMP%], .col-4[_ngcontent-%COMP%], .col-3[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%], .col-1[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:6px;padding-left:1px}"]})}return r})(),data:{breadcrumb:"Invoice Item"}}];let Be=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[m.ez,y.kb,Z.JF,J.Bz.forChild(B),g.u5,g.UX,p.IJ,I.Hv,M.JX,E.D]})}return r})()}}]);